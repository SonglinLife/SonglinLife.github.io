{
    "version": "https://jsonfeed.org/version/1",
    "title": "Life",
    "subtitle": null,
    "icon": "https://songlinlife.top/images/favicon.ico",
    "description": "Life is not about lifestyle, it means Lithium and Ferrum.",
    "home_page_url": "https://songlinlife.top",
    "items": [
        {
            "id": "https://songlinlife.top/2022/OpenSCA%E4%BB%A3%E7%A0%81%E7%A0%94%E8%AF%BB/",
            "url": "https://songlinlife.top/2022/OpenSCA%E4%BB%A3%E7%A0%81%E7%A0%94%E8%AF%BB/",
            "title": "OpenSCAä»£ç ç ”è¯»",
            "date_published": "2022-03-20T11:25:01.000Z",
            "content_html": "",
            "tags": []
        },
        {
            "id": "https://songlinlife.top/2022/MIT6-824-Lab4/",
            "url": "https://songlinlife.top/2022/MIT6-824-Lab4/",
            "title": "MIT6.824:Lab4",
            "date_published": "2022-03-17T03:59:19.000Z",
            "content_html": "<p>ç»ˆäºåˆ°äº†è¿™ä¸ª Lab4ï¼Œä¸å®¹æ˜“å•Šã€‚ã€‚ã€‚</p>\n<h3 id=\"4a\"><a class=\"anchor\" href=\"#4a\">#</a> 4A</h3>\n<p><strong>a set of replica groups</strong></p>\n<p>æ¯ä¸€ä¸ª replica group è´Ÿè´£ä¸€ç³»åˆ— shardsã€‚æ¯ä¸ª group å°±æ˜¯ä¸€ä¸ª raft ç»„</p>\n<p><strong>shard master</strong></p>\n<p>shard master è´Ÿè´£ shard key ç”±å“ªä¸ª group è´Ÿè´£ã€‚</p>\n<p>shard controller ä¹Ÿå¿…é¡»æ˜¯ F.Tï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ Raftã€‚</p>\n<p>shardctrler å¿…é¡»ç®¡ç†ä¸€ç³»åˆ— configurationï¼Œæ¯ä¸€ä¸ª configuration éƒ½è¡¨è¿°äº†ä¸€ç»„ replica groups å·²ç»å°† shard åˆ° replica çš„ assignmentã€‚æ¯å½“ assignment éœ€è¦æ”¹å˜çš„æ—¶å€™ï¼Œè¿™ä¸ª shard controller å°±åˆ›å»ºä¸€ä¸ªæ–°çš„ configuration è¿›è¡Œæ–°çš„ assignmentã€‚KV clients å’Œ servers éƒ½å’Œ shardctrler è¿›è¡Œæ²Ÿé€šï¼Œå½“ä»–ä»¬æƒ³è¦æ–°çš„ configurationï¼ˆæˆ–è€…æ—§çš„ configurationï¼Ÿè¿™é‡Œä¸ºä»€ä¹ˆéœ€è¦æ—§çš„ï¼‰</p>\n<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®ç° 4 ä¸ª RPCï¼Œè¿™äº›åˆ—å‡ºç”¨äºæ§åˆ¶ shardctrlerï¼ŒåŠ å…¥æ–°çš„ replica group æˆ–è€…æ¸…é™¤ replica groupsã€‚</p>\n<p><strong>Join</strong>ï¼šç”¨äº replica çš„ç»„çš„åŠ å…¥ï¼Œå‚æ•°æ˜¯ groupID åˆ° servername çš„æ˜ å°„ã€‚å¦‚æœ shardctrler æ•‘åŠ©ç«™äº†è¿™ä¸ªæ–°çš„ç»„ï¼Œé‚£ä¹ˆéœ€è¦åšä¸€ä¸ªæ–°çš„ configurationã€‚shardctrler éœ€è¦å°† shard åˆ‡åˆ†å¾—å°½é‡å‡åŒ€ assign ç»™ replica groupã€‚å¹¶ä¸”éœ€è¦ move å°½é‡å°‘çš„ shard æ¥åˆ°è¾¾ç›®æ ‡ã€‚å¹¶ä¸” GID å¯ä»¥è¢«é‡ç”¨ï¼Œä¹Ÿå°±æ˜¯ GID å…è®¸åŠ å…¥ã€é€€å‡ºã€é‡æ–°åŠ å…¥ã€‚</p>\n<p><strong>Leave</strong>ï¼šleave å°±æ˜¯ä¸€äº› GIDsã€‚shardCtrler éœ€è¦é‡æ–°åˆ›å»ºæ–°çš„ configurationã€‚è¿™ä¸ªæ–°çš„ configuration éœ€è¦åŒæ · shards è¢« divide å°½é‡å‡åŒ€</p>\n<p><strong>Move</strong>ï¼šMove å°±æ˜¯æŠŠä¸€ä¸ª shard åˆ†é…åˆ°ä¸€ä¸ª GIDï¼Œè¿™ä¸ª Move RPC ç”¨äºæµ‹è¯•ã€‚Move æ“ä½œä¹‹åçš„ Join å’Œ Leave å®é™…ä¸Šæ˜¯åœ¨å¯¹ Move è¿›è¡Œ Undoï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ“ä½œéƒ½ä¼šé‡æ–°åˆ†é… shardã€‚</p>\n<p><strong>Query</strong>ï¼šquery æŸ¥è¯¢çš„æ˜¯ä¸€ä¸ª configuration numberï¼Œå¦‚æœè¿™ä¸ª configuration number ä¸å­˜åœ¨ï¼Œé‚£å°±è¿”å›æœ€å¤§çš„ä¸€ç›´ configuration number çš„ configurationã€‚</p>\n<p>æœ€å¼€å§‹çš„ configuration number ä¸º 0ï¼Œå¹¶ä¸”ä¸åŒ…å«ä»»ä½•çš„ groupï¼Œæ‰€æœ‰çš„ shard éƒ½ assign ç»™ GID 0.</p>\n<p>Hintsï¼š</p>\n<ol>\n<li>å¯ä»¥ copy ä¹‹å‰çš„ kvraft serverã€‚</li>\n<li>éœ€è¦è¿‡æ»¤é‡å¤çš„ rpcã€‚</li>\n<li>çŠ¶æ€æœºçš„ shard rebalancing éœ€è¦ç¡®å®š</li>\n</ol>\n<p>ç›´æ¥å¥—ç”¨ Lab3 å¸¦ä»£ç ï¼š</p>\n<pre><code>Test: Basic leave/join ...\n  ... Passed\nTest: Historical queries ...\n  ... Passed\nTest: Move ...\n  ... Passed\nTest: Concurrent leave/join ...\n  ... Passed\nTest: Minimal transfers after joins ...\n  ... Passed\nTest: Minimal transfers after leaves ...\n  ... Passed\nTest: Multi-group join/leave ...\n  ... Passed\nTest: Concurrent multi leave/join ...\n  ... Passed\nTest: Minimal transfers after multijoins ...\n  ... Passed\nTest: Minimal transfers after multileaves ...\n  ... Passed\nTest: Check Same config on servers ...\n  ... Passed\nPASS\nok  \t6.824/shardctrler\t2.389s\n</code></pre>\n<p>ç®€å• pass ä¸€ä¸ªã€‚</p>\n<h3 id=\"4b\"><a class=\"anchor\" href=\"#4b\">#</a> 4B</h3>\n<p>éœ€è¦ä¿®æ”¹ï¼š</p>\n<p><code>shardkv/client.go</code> ,  <code>shardkv/common.go</code> , and  <code>shardkv/server.go</code>  è¿™ä¸‰ä¸ªæ–‡ä»¶ã€‚</p>\n<p>replica groups have to hand off shards to each other</p>\n<p>å¯èƒ½éœ€è¦é‡æ–°è®¾è®¡ 4A çš„ä»£ç ï¼Œå°½é‡å°‘ç§»åŠ¨ shardã€‚é—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆåœ¨ä¸åŒçš„ raft ç»„ä¹‹é—´ç§»åŠ¨æ•°æ®ï¼Ÿ</p>\n<p>å¿…é¡»å®ç°çº¿æ€§ä¸€è‡´æ€§ï¼Œè¿™ä¸ªå¯ä»¥ä»¿ç…§ä¹‹å‰ lab3 æ¥åšã€‚</p>\n<p>This must be true even when  <code>Get</code> s and  <code>Put</code> s arrive at about the same time as configuration changes.</p>\n<p>è¿™è¯´æ˜ configuration change å®Œæ¯•çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¯ç›¸åŒçš„å‰¯æœ¬ï¼Œå¯ä»¥ç®€å•è®¾è®¡ reconfiguration æ—¶å€™ä¸å¤„ç†ä»»ä½• get å’Œ put è¯·æ±‚ï¼Ÿè¿™ä¸ªä¹‹åå†è€ƒè™‘ã€‚</p>\n<blockquote>\n<p>Think about how the shardkv client and server should deal with  <code>ErrWrongGroup</code> . Should the client change the sequence number if it receives  <code>ErrWrongGroup</code> ? Should the server update the client state if it returns  <code>ErrWrongGroup</code>  when executing a  <code>Get</code> / <code>Put</code>  request?</p>\n</blockquote>\n<p>æˆ‘çš„è®¾è®¡ï¼Œå½“æŸ¥è¯¢åˆ°é…ç½®å˜æ›´ä¿¡æ¯åï¼Œç«‹åˆ»åŠ é”è¿›è¡Œè¿ç§»æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥æ‹’ç»æ¥å—è¯·æ±‚å’Œ apply logã€‚å®Œæˆè¿ç§»æ•°æ®ä¹‹åå†é‡Šæ”¾é”ã€‚å¯¹äºæ­¤åå†æ¬¡ apply ä¸Šçš„ log indexï¼Œå¦‚æœæ­¤æ—¶ server ä¸è´Ÿè´£è¿™ä¸ª shardï¼Œé‚£ä¹ˆç›´æ¥ä¸¢å¼ƒå°±å¯ä»¥äº†ï¼Œä¹Ÿä¸æ›´æ–°æŸ¥é‡è¡¨ã€‚å¯¹äºæ­¤åå¦‚æœæ—§çš„è¯·æ±‚å†æ¬¡åˆ°æ¥ï¼Œå¦‚æœæ˜¯ put/appendï¼Œç›´æ¥æŸ¥æŸ¥é‡è¡¨ï¼Œå³ä½¿ä¸è´Ÿè´£è¿™ä¸ª shard å¦‚æœä¹‹å‰åšè¿‡è¿™ä¸ªè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥è¿”å› OKã€‚ä½†æ˜¯ä¹‹åçš„ä¹‹åçš„è¯·æ±‚å°±ä¼šå‘é€ <code>ErrWrongGroup</code> ã€‚</p>\n<p>å¯¹äºæ–°çš„è¿ç§»è¿‡å»çš„ shardï¼ŒæŸ¥é‡è¡¨åˆå§‹ä¸º 0ï¼Œå¯¹åº”ç€ä»»åŠ¡æ²¡æœ‰å®Œæˆï¼Œå› ä¸ºè¿™ä¸ªæ–°çš„ server å¹¶ä¸ä¼šå»æœåŠ¡æ—§çš„ rpcï¼Œæ‰€ä»¥æ­¤æ—¶ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ã€‚</p>\n<p>ï¼ˆæ‰€ä»¥ client çš„é€»è¾‘å°±æ˜¯ï¼Œåªæœ‰æ¥å—åˆ° ErrWrongGroup çš„è¯·æ±‚æ‰ä¼šæŸ¥è¯¢æ–°çš„é…ç½®ï¼Œé˜²æ­¢é‡å¤ applyï¼‰</p>\n<blockquote>\n<p>After a server has moved to a new configuration, it is acceptable for it to continue to store shards that it no longer owns</p>\n</blockquote>\n<p>å³ä½¿è¿ç§»äº†ä¸€ä¸ªæ–°çš„é…ç½®ï¼Œä¹Ÿå¯ä»¥ä¿ç•™åŸæ¥çš„æ•°æ®ã€‚</p>\n<h3 id=\"320-æ›´æ–°\"><a class=\"anchor\" href=\"#320-æ›´æ–°\">#</a> 3.20 æ›´æ–°</h3>\n<p>Lab4 + 2Challenge å®Œç¾é€šè¿‡ï¼Œå¹¶å‘æµ‹è¯•æ²¡æœ‰æï¼Œæˆ‘çš„ç”µè„‘é…ç½®ä¸æ”¯æŒè¿™ä¸ª lab çš„æ‰¹é‡æµ‹è¯•ã€‚ã€‚ã€‚è€Œä¸”æˆ‘ä¹Ÿä¸æƒ³æäº†ï¼Œå¤ªå¿ƒç´¯äº†</p>\n<pre><code>Test: static shards ...\n  ... Passed\nTest: join then leave ...\n  ... Passed\nTest: snapshots, join, and leave ...\n  ... Passed\nTest: servers miss configuration changes...\n  ... Passed\nTest: concurrent puts and configuration changes...\n  ... Passed\nTest: more concurrent puts and configuration changes...\n  ... Passed\nTest: concurrent configuration change and restart...\n  ... Passed\nTest: unreliable 1...\n  ... Passed\nTest: unreliable 2...\n  ... Passed\nTest: unreliable 3...\n  ... Passed\nTest: shard deletion (challenge 1) ...\n  ... Passed\nTest: unaffected shard access (challenge 2) ...\n  ... Passed\nTest: partial migration shard access (challenge 2) ...\n  ... Passed\nPASS\nok  \t6.824/shardkv\t\n</code></pre>\n",
            "tags": [
                "åˆ†å¸ƒå¼"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/MIT6-824%EF%BC%9ASpaner/",
            "url": "https://songlinlife.top/2022/MIT6-824%EF%BC%9ASpaner/",
            "title": "MIT6.824ï¼šSpaner",
            "date_published": "2022-03-16T01:05:47.000Z",
            "content_html": "<p>ç»ˆäºåˆ°äº† Spanner äº†ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘æ‰“ç®—å’Œ GFS è¿˜æœ‰ raft è®ºæ–‡ä¸€æ ·ï¼Œè¯»å¾—ç²¾ç»†ä¸€äº›ï¼Œè€Œä¸” TIDB å°±æ˜¯åŸºäºè¿™ç¯‡è®ºæ–‡çš„å®ç°ã€‚</p>\n<h3 id=\"æ‘˜è¦\"><a class=\"anchor\" href=\"#æ‘˜è¦\">#</a> æ‘˜è¦</h3>\n<blockquote>\n<p>Spanner is Googleâ€™s scalable, multi-version, globally distributed, and synchronously-replicated database.</p>\n</blockquote>\n<p>å•§å•§å•§ï¼Œå¼€ç¯‡ç¬¬ä¸€å¥å°±è¿™ä¹ˆç‰›é€¼ ï¼Ÿæ˜¯ä¸€ä¸ªå¯æ‰©å±•ã€å…¨çƒåŒ–åˆ†å¸ƒå¼ã€å’ŒåŒæ­¥å¤åˆ¶çš„æ•°æ®åº“ã€‚</p>\n<p>æ—¶é’Ÿ API æ˜¯å®ç° Spanner çš„å…³é”®æ‰€åœ¨ã€‚</p>\n<h3 id=\"paxos\"><a class=\"anchor\" href=\"#paxos\">#</a> Paxos</h3>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220316114813593.png\" alt=\"image-20220316114813593\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220316115125809.png\" alt=\"image-20220316115125809\" /></p>\n<h4 id=\"paxosè¦æ±‚\"><a class=\"anchor\" href=\"#paxosè¦æ±‚\">#</a> paxos è¦æ±‚</h4>\n<h5 id=\"safety\"><a class=\"anchor\" href=\"#safety\">#</a> safetyï¼š</h5>\n<ul>\n<li>åªæœ‰ä¸€ä¸ª value å¯ä»¥è¢« chosen</li>\n<li>åªæœ‰ value è¢« chosen ä¹‹åæ‰èƒ½è¢« learnã€‚</li>\n</ul>\n<h5 id=\"liveness\"><a class=\"anchor\" href=\"#liveness\">#</a> Livenessï¼š</h5>\n<ul>\n<li>ä¸€äº› proposed value è¿Ÿæ—©èƒ½è¢« chosenã€‚</li>\n<li>å¦‚æœä¸€ä¸ª value è¢« chosenï¼Œé‚£ä¹ˆ server æœ€ç»ˆéƒ½ä¼šå­¦åˆ°ã€‚</li>\n</ul>\n<h3 id=\"multi-paxos\"><a class=\"anchor\" href=\"#multi-paxos\">#</a> Multi-Paxos</h3>\n<h3 id=\"å¬è¯¾\"><a class=\"anchor\" href=\"#å¬è¯¾\">#</a> å¬è¯¾</h3>\n",
            "tags": [
                "åˆ†å¸ƒå¼"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/MIT6-824%EF%BC%9A%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/",
            "url": "https://songlinlife.top/2022/MIT6-824%EF%BC%9A%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/",
            "title": "MIT6.824ï¼šåˆ†å¸ƒå¼äº‹åŠ¡",
            "date_published": "2022-03-15T07:12:26.000Z",
            "content_html": "<h3 id=\"before-or-after-atomicity-coordinating-concurrent-threads\"><a class=\"anchor\" href=\"#before-or-after-atomicity-coordinating-concurrent-threads\">#</a> Before-or-After Atomicity: Coordinating Concurrent Threads</h3>\n<p>before-or-after åŸå­æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªå¹¶å‘æ“ä½œå‘ç”Ÿåœ¨å¦ä¸€ä¸ªå¹¶å‘æ“ä½œçš„ä¹‹å‰ï¼ˆbeforeï¼‰æˆ–è€…ä¹‹åï¼ˆafterï¼‰å¯¹äºç»“æœå¹¶æ²¡æœ‰å½±å“ã€‚</p>\n<blockquote>\n<p>Concurrent actions have the before-or-after property if their effect from the point of view of their invokers is the same as if the actions occurred either completely before or completely after one another.</p>\n</blockquote>\n<p>åŒæ—¶ä¹Ÿæåˆ°è¦å®ç°è¿™ç§ before-or-after actions çš„å¹¶å‘æ­£ç¡®æ€§ï¼Œéœ€è¦åœ¨æ¯ä¸ª action ä½¿ç”¨å…±äº«å˜é‡æ—¶éµå¾ª locking protocolï¼Œè¯´ç™½äº†å°±æ˜¯åŠ é”ã€‚</p>\n<p>ä»¥ä¸€ä¸ªè½¬è´¦ä¸ºä¾‹ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315160439407.png\" alt=\"image-20220315160439407\" /></p>\n<p>A è´¦å·åˆå§‹æœ‰ 300 å…ƒï¼ŒB è´¦æˆ·åˆå§‹ä¸º 100 å…ƒã€‚ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªè½¬è´¦ï¼š</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>A</mi><mo separator=\"true\">,</mo><mi>B</mi><mo separator=\"true\">,</mo><mn>10</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Trans(A, B, 10)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">s</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">A</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>A è´¦å·å‘ B è´¦å·è½¬è´¦äº† 10 å…ƒï¼ŒåŒæ—¶æ­¤æ—¶æœ‰ä¸€ä¸ª C è´¦å·ï¼Œå…¶åˆå§‹é‡‘é¢ä¸º 290 å…ƒï¼Œå¹¶ä¸” B è´¦å·å‘ C è´¦å·è½¬è´¦ 25 å…ƒï¼š</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>B</mi><mo separator=\"true\">,</mo><mi>C</mi><mo separator=\"true\">,</mo><mn>25</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Trans(B,C,25)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">s</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>è¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°é”™è¯¯ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315160516865.png\" alt=\"image-20220315160516865\" /></p>\n<h3 id=\"correctness-and-serialization\"><a class=\"anchor\" href=\"#correctness-and-serialization\">#</a> Correctness and Serialization</h3>\n<p>é¦–å…ˆå¿…é¡»æ˜ç¡®ï¼š</p>\n<blockquote>\n<p>There is such a correctness concept: coordination among concurrent actions can be considered to be correct if every result is guaranteed to be one that could have been obtained by some purely serial application of those same actions.</p>\n</blockquote>\n<p>åªè¦ actions çš„ç»“æœèƒ½å¤Ÿè¢«ä¸€äº›ä¸²è¡Œçš„åº”ç”¨æ‰€æ‰§è¡Œå¾—åˆ°ï¼Œé‚£ä¹ˆè¿™äº›å¹¶å‘æ“ä½œå°±æ˜¯æ­£ç¡®çš„ã€‚</p>\n<p>æˆ‘è¿™å¥è¯å…¶å®æ²¡æ€ä¹ˆè¡¨è¿°æ¸…é™¤ã€‚ã€‚ã€‚</p>\n<p>å¦‚æœä¸€ä¸ª action ä»…ä»…ç”±å•ä¸ªçº¿ç¨‹æ‰€æ‰§è¡Œï¼Œå¹¶ä¸”å†æ‰§è¡Œä¹‹å‰æ˜¯æ­£ç¡®çš„ï¼Œé‚£ä¹ˆæ‰§è¡Œä¹‹åä¹Ÿä¸€å®šæ˜¯æ­£ç¡®çš„ã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315163719498.png\" alt=\"image-20220315163719498\" /></p>\n<p>å½“æœ‰å¤šä¸ª actions åŒæ—¶å¹¶å‘ï¼Œå¦‚æœè¿™äº› actions æ˜¯ before-or-after å¹¶ä¸”æ‰§è¡Œä¹‹å‰æ˜¯ correctï¼Œé‚£ä¹ˆæ–°çŠ¶æ€ä¹Ÿæ˜¯ correctã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315164015861.png\" alt=\"image-20220315164015861\" /></p>\n<p>è¿™é‡Œå°±å¼•å‡ºäº†å¯ä¸²è¡Œæ€§ï¼š</p>\n<blockquote>\n<p>serializable: there exists some serial order of those concurrent transactions that would, if followed, lead to the same ending state.</p>\n</blockquote>\n<p>è¿™é‡Œçš„å¯ä¸²è¡Œæ€§ä¸€èˆ¬æŒ‡çš„æ˜¯å†²çªå¯ä¸²è¡Œæ€§ä¹Ÿå°±æ˜¯ CSRã€‚å†²çªæ“ä½œå¯ä»¥è¢«å®šä¹‰ä¸ºï¼š</p>\n<blockquote>\n<p>ä¸¤ä¸ªæ•°æ®æ“ä½œ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>o</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">o_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">o</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> å’Œ $ o_i$ æ˜¯ä¸€å¯¹ <em>å†²çªæ“ä½œï¼ˆconflicting operations)</em>ï¼Œå¦‚æœå®ƒä»¬æ»¡è¶³ï¼š å®ƒä»¬å±äºä¸åŒçš„ transactionï¼›ä»¥åŠ å…¶ä¸­è‡³å°‘ä¸€ä¸ªæ“ä½œæ˜¯å†™æ“ä½œã€‚</p>\n</blockquote>\n<p>åªè¦æˆ‘ä»¬æ»¡è¶³å†²çªæ“ä½œçš„æ’åºé¡ºåºå’ŒæŸä¸ªä¸²è¡Œäº‹åŠ¡ schedule ä¸€è‡´ï¼Œé‚£ä¹ˆå°±æ˜¯æ»¡è¶³äº†å†²çªå¯ä¸²è¡Œæ€§ã€‚</p>\n<h3 id=\"å¬è¯¾\"><a class=\"anchor\" href=\"#å¬è¯¾\">#</a> å¬è¯¾</h3>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315194427991.png\" alt=\"image-20220315194427991\" /></p>\n<p>è¿™é‡Œè€å¸ˆè®²äº† <code>serializable</code> ï¼Œç®—æ˜¯æ˜ç™½äº†åˆ°åº•æ˜¯å•¥ã€‚å¦‚æœä¸€ç³»åˆ—äº‹åŠ¡ï¼ˆè¿™é‡Œå°±æ˜¯çº¿æ€§ï¼‰æ‰§è¡Œå¯ä»¥å¾—åˆ°ç›¸åŒç»“æœï¼ˆè¿™é‡Œçš„ç»“æœæŒ‡çš„æ˜¯å¤–éƒ¨è§‚æµ‹å¾—åˆ°çš„ç»“æœï¼‰</p>\n<p>å°±åƒä¸Šé¢çš„å›¾ä¸­æ‰€ç¤ºï¼ŒT1 å’Œ T2 ä¸¤ä¸ªäº‹åŠ¡æ‰§è¡Œç»“æœåªæœ‰ä¸¤ç§æƒ…å†µï¼Œæ‰€ä»¥å…¶ä»–è§‚å¯Ÿåˆ°çš„ç»“æœå°±æ˜¯éå¯ä¸²è¡Œæ€§ã€‚</p>\n<h4 id=\"æ¶ˆæé”\"><a class=\"anchor\" href=\"#æ¶ˆæé”\">#</a> æ¶ˆæé”</h4>\n<h5 id=\"simple-lock\"><a class=\"anchor\" href=\"#simple-lock\">#</a> simple Lock</h5>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315200327884.png\" alt=\"image-20220315200327884\" /></p>\n<p>ç®€å•é”å°±æ˜¯åœ¨ä½¿ç”¨ record ä¹‹å‰è¿›è¡ŒåŠ é”ï¼ŒçŸ¥é“äº‹åŠ¡ç»“æŸåæ‰ä¼šé‡Šæ”¾é”ï¼Œè¿™æ ·æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä¿è¯äº† serializableï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå› ä¸ºä¸èƒ½å¹¶å‘è¿™å°±æ„å‘³ç€å…¶æ€§èƒ½å¾ˆå·®ã€‚</p>\n<h5 id=\"two-phase-locking\"><a class=\"anchor\" href=\"#two-phase-locking\">#</a> Two-Phase Locking</h5>\n<p>2PL å¾ˆç®€å•ï¼Œå®ƒå°±æ˜¯æŠŠåŠ é”å’Œè§£é”åˆ†ä¸ºäº†ä¸¤ä¸ªé˜¶æ®µï¼Œä¸€ä¸ªé˜¶æ®µåªèƒ½åŠ é”ï¼Œä¸€ä¸ªé˜¶æ®µåªèƒ½é‡Šæ”¾é”ã€‚åœ¨ 2PL åè®®ä¸‹ï¼Œæ¯ä¸ª transaction éƒ½ä¼šç»è¿‡ä¸¤ä¸ªé˜¶æ®µï¼šåœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µé‡Œï¼Œtransaction æ ¹æ®éœ€è¦ä¸æ–­åœ°è·å–é”ï¼Œå«åš <strong>growing phase (expanding phase)</strong>ï¼›åœ¨ç¬¬äºŒä¸ªé˜¶æ®µé‡Œï¼Œtransaction å¼€å§‹é‡Šæ”¾å…¶æŒæœ‰çš„é”ï¼Œæ ¹æ® 2PL çš„è§„åˆ™ï¼Œè¿™ä¸ª transaction ä¸èƒ½å†è·å¾—æ–°çš„é”ï¼Œæ‰€ä»¥å®ƒæ‰€æŒæœ‰çš„é”é€æ¸å‡å°‘ï¼Œå«åš <strong>shrinking phase (contracting phase)</strong>ã€‚</p>\n<p>2PL å¯ä»¥æ»¡è¶³ CRS å†²çªä¸€è‡´æ€§ï¼Œè¿™ä½åšä¸»ç»™å‡ºäº† 2PC ä¸€å®šå¯ä»¥æ»¡è¶³ CRS çš„è¯æ˜ï¼š</p>\n<p>Transaction managementï¼šä¸¤é˜¶æ®µé”ï¼ˆtwo-phase lockingï¼‰ - ç‹å­æ—­çš„æ–‡ç«  - çŸ¥ä¹ <span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81OTUzNTMzNw==\">https://zhuanlan.zhihu.com/p/59535337</span></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315220608819.png\" alt=\"image-20220315220608819\" /></p>\n<p>2PL è™½ç„¶å…è®¸ä¸€å®šç¨‹åº¦çš„å¹¶å‘ï¼Œä½†æ˜¯ 2PL ä¼šå¯¼è‡´æ­»é”ã€‚</p>\n<h4 id=\"åˆ†å¸ƒå¼äº‹åŠ¡\"><a class=\"anchor\" href=\"#åˆ†å¸ƒå¼äº‹åŠ¡\">#</a> åˆ†å¸ƒå¼äº‹åŠ¡</h4>\n<h5 id=\"2pc\"><a class=\"anchor\" href=\"#2pc\">#</a> 2PC</h5>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315203835328.png\" alt=\"image-20220315203835328\" /></p>\n<p>è¿™ä¸ª 2PC çœ‹èµ·æ¥ç®€å•ï¼Œä½†è¿˜æ˜¯æœ‰å„ç§å„æ ·çš„æƒ…å†µéœ€è¦è€ƒè™‘ã€‚</p>\n<p>2PC åè®®ï¼š</p>\n<ol>\n<li>coordinate å‘é€å‘½ä»¤ï¼ˆä¹Ÿå°±æ˜¯å›¾ä¸­çš„ getã€putï¼‰ï¼Œparticipate æ”¶åˆ°å‘½ä»¤åå°±å»ç”³è¯·é”ã€‚</li>\n<li>æ¥ç€ï¼Œcoordinate å‘é€ prepare æŒ‡ä»¤ï¼Œå¦‚æœ participate æ²¡æœ‰ failï¼Œæ•°æ®æ²¡æœ‰ä¸¢å¤±ï¼Œrecord ä¸€è‡´æ€§å®Œå¥½ï¼Œç”³è¯·åˆ°äº†é”ç­‰ç­‰ï¼Œparticipate æ£€æŸ¥è‡ªèº«çŠ¶æ€è®¤ä¸ºè‡ªå·±å¯ä»¥å®Œæˆå‘½ä»¤å°±è¿”å› yesï¼Œå¦åˆ™è¿”å› Noã€‚æ³¨æ„åœ¨ participate è¿”å›ä¹‹å‰ï¼Œå®ƒå¿…é¡»å…ˆå†™ LOG åˆ°ç£ç›˜ persistã€‚participate å›å¤ prepare yes ä¹‹åå°±å¼€å§‹æ‰§è¡Œæ“ä½œã€‚</li>\n<li>å¦‚æœæœ‰ä¸€ä¸ªè¿”å› NOï¼Œcoordinate å°±ä¼šè®¤ä¸ºäº‹åŠ¡å¤±è´¥å¹¶ä¸”è®© client retryã€‚å¦‚æœ coordinate æ”¶åˆ°äº†æ‰€æœ‰çš„ prepare yesï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæŠŠè¿™ä¸ªäº‹åŠ¡å†™å…¥ LOGã€‚ä¹‹ååŠæ—¶ coordinate crashï¼Œå®ƒæ¢å¤ä¹‹åä¹Ÿå¿…é¡»æ‰§è¡Œè¿™ä¸ªäº‹åŠ¡ã€‚</li>\n<li>æ¥ç€ coordinate å‘é€ commit æŒ‡ä»¤ï¼Œæ‰€æœ‰ participate æ”¶åˆ°åï¼Œå°±é‡Šæ”¾é”ï¼Œå¹¶ä¸”åœ¨ LOG å°†æ“ä½œä¿®æ”¹ä¸º commit çŠ¶æ€ï¼Œè¿™æ ·å³ä½¿ participate crash äº†ï¼Œé‚£ä¹ˆå®ƒä¹ŸçŸ¥é“è‡ªå·± commit äº†ã€‚participate è¿”å› ACKã€‚</li>\n<li>coordinate æ”¶åˆ°æ‰€æœ‰ ACK ä¹‹åå°±è¿”å› client äº‹åŠ¡æˆåŠŸã€‚</li>\n</ol>\n<p>2PC ä¼šå¯¼è‡´æ­»é”ï¼Œåœ¨ prepare é˜¶æ®µåå¦‚æœ coordinate fail æˆ–è€… crash ä¹‹åï¼Œparticipate å¹¶ä¸ä¼šè¶…æ—¶é‡Šæ”¾é”ï¼Œå®ƒåªä¼šä¸€ç›´æŒæœ‰é”ï¼Œè¿™å°±å¯¼è‡´ time-blockã€‚</p>\n<p>2PC æ€§èƒ½å¾ˆå·®ï¼Œä¸€æ–¹é¢ç”±äºå®ƒéœ€è¦å¾ˆå¤šç½‘ç»œï¼Œå¦ä¸€æ–¹é¢ç”±äº participate è¿”å› prepare ä¹‹å‰å¿…é¡»å†™ LOGï¼ŒåŒæ—¶ coordinate å‘ commit ä¹‹å‰ä¹Ÿå¿…é¡»å†™ LOGã€‚</p>\n<h3 id=\"ç•™ä¸‹çš„é—®é¢˜\"><a class=\"anchor\" href=\"#ç•™ä¸‹çš„é—®é¢˜\">#</a> ç•™ä¸‹çš„é—®é¢˜</h3>\n<p>å¦‚ä½•å°† raft å’Œ 2PC ç»“åˆèµ·æ¥ï¼Œä½¿å¾—å…¶æ—¢å¯ä»¥æ»¡è¶³äº‹åŠ¡åˆå¯ä»¥æœ‰ availabilityï¼Ÿ</p>\n",
            "tags": [
                "åˆ†å¸ƒå¼"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/MIT6-824%EF%BC%9AFrangipani-A-Scalable-Distributed-File-System/",
            "url": "https://songlinlife.top/2022/MIT6-824%EF%BC%9AFrangipani-A-Scalable-Distributed-File-System/",
            "title": "MIT6.824ï¼šFrangipani: A Scalable Distributed File System",
            "date_published": "2022-03-15T03:36:02.000Z",
            "content_html": "<p>è¿™ä¸ªå†…å®¹ä¸æ˜¯é‡ç‚¹ï¼Œè€Œä¸”è¿™ç¯‡è®ºæ–‡çš„å¹´çºªæ¯”æˆ‘è¿˜å¤§ï¼Œè¯´å®è¯ï¼Œæˆ‘è¯»äº†ä¸€éƒ¨åˆ†æ„Ÿè§‰ï¼Œæ”¶è·ä¸å¤§ã€‚</p>\n<h3 id=\"å¬è¯¾\"><a class=\"anchor\" href=\"#å¬è¯¾\">#</a> å¬è¯¾</h3>\n<h4 id=\"challenge\"><a class=\"anchor\" href=\"#challenge\">#</a> Challenge</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315115544252.png\" alt=\"image-20220315115544252\" /></p>\n<ol>\n<li>cache ä¸€è‡´</li>\n<li>åŸå­æ€§</li>\n<li>crash recovery</li>\n</ol>\n<h4 id=\"cache-coherence\"><a class=\"anchor\" href=\"#cache-coherence\">#</a> Cache coherence</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315120915790.png\" alt=\"image-20220315120915790\" /></p>\n<h4 id=\"è·å¾—é”çš„è¿‡ç¨‹\"><a class=\"anchor\" href=\"#è·å¾—é”çš„è¿‡ç¨‹\">#</a> è·å¾—é”çš„è¿‡ç¨‹</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315143416693.png\" alt=\"image-20220315143416693\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315123136719.png\" alt=\"image-20220315123136719\" /></p>\n<h4 id=\"atomic\"><a class=\"anchor\" href=\"#atomic\">#</a> ATOMIC</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220315124144566.png\" alt=\"image-20220315124144566\" /></p>\n<p>è¿™é‡Œæ˜¯æ‹¿åˆ°æ‰€æœ‰çš„é”ã€‚</p>\n",
            "tags": [
                "åˆ†å¸ƒå¼"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/%E6%96%B0%E6%97%B6%E4%BB%A3/",
            "url": "https://songlinlife.top/2022/%E6%96%B0%E6%97%B6%E4%BB%A3/",
            "title": "æ–°æ—¶ä»£",
            "date_published": "2022-03-14T06:33:47.000Z",
            "content_html": "<h3 id=\"æ–°æ—¶ä»£çš„ä¸»è¦å†…æ¶µå’Œé‡å¤§æ„ä¹‰\"><a class=\"anchor\" href=\"#æ–°æ—¶ä»£çš„ä¸»è¦å†…æ¶µå’Œé‡å¤§æ„ä¹‰\">#</a> æ–°æ—¶ä»£çš„ä¸»è¦å†…æ¶µå’Œé‡å¤§æ„ä¹‰</h3>\n<p>å†å²æ€§æˆå°±å’Œå†å²æ€§å˜é©ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314143410767.png\" alt=\"image-20220314143410767\" /></p>\n<p>è¿›å…¥æ–°æ—¶ä»£çš„ä¾æ®ï¼š</p>\n<ol>\n<li><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314143522931.png\" alt=\"image-20220314143522931\" /></li>\n<li><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314143538184.png\" alt=\"image-20220314143538184\" /></li>\n<li><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314143630414.png\" alt=\"image-20220314143630414\" /></li>\n<li><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314143707504.png\" alt=\"image-20220314143707504\" /></li>\n</ol>\n<p>æ–°æ—¶ä»£ä¸»è¦å†…æ¶µï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314143850984.png\" alt=\"image-20220314143850984\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314143951961.png\" alt=\"image-20220314143951961\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144041361.png\" alt=\"image-20220314144041361\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144101541.png\" alt=\"image-20220314144101541\" /></p>\n<p>è¿›å…¥æ–°æ—¶ä»£çš„é‡å¤§æ„ä¹‰ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144236167.png\" alt=\"image-20220314144236167\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144303933.png\" alt=\"image-20220314144303933\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144325545.png\" alt=\"image-20220314144325545\" /></p>\n<h3 id=\"æˆ‘å›½ç¤¾ä¼šä¸»è¦çŸ›ç›¾çš„è½¬æ¢\"><a class=\"anchor\" href=\"#æˆ‘å›½ç¤¾ä¼šä¸»è¦çŸ›ç›¾çš„è½¬æ¢\">#</a> æˆ‘å›½ç¤¾ä¼šä¸»è¦çŸ›ç›¾çš„è½¬æ¢</h3>\n<p>æˆ‘å›½ç¤¾ä¼šä¸»è¦çŸ›ç›¾çš„è½¬æ¢çš„ä¾æ®</p>\n<p>ç†è®ºä¾æ®ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144609858.png\" alt=\"image-20220314144609858\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144636855.png\" alt=\"\" /></p>\n<p>æˆ‘å›½ç¤¾ä¼šä¸»è¦çŸ›ç›¾å˜åŒ–çš„æ–°è¡¨è¿°ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144704119.png\" alt=\"image-20220314144704119\" /></p>\n<p>å®è·µä¾æ®ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144813151.png\" alt=\"image-20220314144813151\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144823476.png\" alt=\"image-20220314144823476\" /></p>\n<p>ä¸»è¦çŸ›ç›¾çš„å†æ¬¡å˜åŒ–ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144906765.png\" alt=\"image-20220314144906765\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144914288.png\" alt=\"image-20220314144914288\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144930332.png\" alt=\"image-20220314144930332\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314144945649.png\" alt=\"image-20220314144945649\" /></p>\n<h3 id=\"æˆ‘å›½ä»å¤„äºå¹¶å°†é•¿æœŸå¤„äºç¤¾ä¼šä¸»ä¹‰åˆçº§é˜¶æ®µ\"><a class=\"anchor\" href=\"#æˆ‘å›½ä»å¤„äºå¹¶å°†é•¿æœŸå¤„äºç¤¾ä¼šä¸»ä¹‰åˆçº§é˜¶æ®µ\">#</a> æˆ‘å›½ä»å¤„äºå¹¶å°†é•¿æœŸå¤„äºç¤¾ä¼šä¸»ä¹‰åˆçº§é˜¶æ®µ</h3>\n<p>ç¤¾ä¼šä¸»ä¹‰åˆçº§é˜¶æ®µç†è®ºçš„ä¸»è¦å†…å®¹ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145449581.png\" alt=\"image-20220314145449581\" /></p>\n<p>ç¤¾ä¼šä¸»ä¹‰å‘å±•çš„é•¿æœŸæ€§å’Œé˜¶æ®µæ€§ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145554777.png\" alt=\"image-20220314145554777\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145611358.png\" alt=\"image-20220314145611358\" /></p>\n<p>æˆ‘å›½æ˜¯æœ€å¤§å‘å±•ä¸­å›½å®¶çš„å›½é™…åœ°ä½æ²¡æœ‰å˜ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145651562.png\" alt=\"image-20220314145651562\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145712025.png\" alt=\"image-20220314145712025\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145732926.png\" alt=\"image-20220314145732926\" /></p>\n<p>å…šåœ¨ç¤¾ä¼šä¸»ä¹‰åˆçº§é˜¶æ®µçš„åŸºæœ¬è·¯çº¿ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145828831.png\" alt=\"image-20220314145828831\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145852582.png\" alt=\"image-20220314145852582\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145918552.png\" alt=\"image-20220314145918552\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145935586.png\" alt=\"image-20220314145935586\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314145952669.png\" alt=\"image-20220314145952669\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150006922.png\" alt=\"image-20220314150006922\" /></p>\n<h3 id=\"ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»ç†è®ºå’Œåˆ¶åº¦\"><a class=\"anchor\" href=\"#ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»ç†è®ºå’Œåˆ¶åº¦\">#</a> ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»ç†è®ºå’Œåˆ¶åº¦</h3>\n<p>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»ç†è®ºï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150559520.png\" alt=\"image-20220314150559520\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150613747.png\" alt=\"image-20220314150613747\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150630631.png\" alt=\"image-20220314150630631\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150659271.png\" alt=\"image-20220314150659271\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150708876.png\" alt=\"image-20220314150708876\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150726215.png\" alt=\"image-20220314150726215\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150810846.png\" alt=\"image-20220314150810846\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150834035.png\" alt=\"image-20220314150834035\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150851684.png\" alt=\"image-20220314150851684\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314150914474.png\" alt=\"image-20220314150914474\" /></p>\n<p>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»åˆ¶åº¦ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151014465.png\" alt=\"image-20220314151014465\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151043278.png\" alt=\"image-20220314151043278\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151101926.png\" alt=\"image-20220314151101926\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151406265.png\" alt=\"image-20220314151406265\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151434072.png\" alt=\"image-20220314151434072\" /></p>\n<h3 id=\"ç”¨æ›´åŠ å¥å…¨çš„åˆ¶åº¦ä½“ç³»ä¿è¯äººæ°‘å½“å®¶ä½œ\"><a class=\"anchor\" href=\"#ç”¨æ›´åŠ å¥å…¨çš„åˆ¶åº¦ä½“ç³»ä¿è¯äººæ°‘å½“å®¶ä½œ\">#</a> ç”¨æ›´åŠ å¥å…¨çš„åˆ¶åº¦ä½“ç³»ä¿è¯äººæ°‘å½“å®¶ä½œ</h3>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151601718.png\" alt=\"image-20220314151601718\" /></p>\n<p>äººæ°‘å½“å®¶ä½œä¸»ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151626519.png\" alt=\"image-20220314151626519\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151641314.png\" alt=\"image-20220314151641314\" /></p>\n<p>äººæ°‘å½“å®¶ä½œä¸»çš„å†…æ¶µï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151712254.png\" alt=\"image-20220314151712254\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151727548.png\" alt=\"image-20220314151727548\" /></p>\n<p>ä¸ºä»€ä¹ˆåšæŒäººæ°‘å½“å®¶ä½œä¸»ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151753281.png\" alt=\"image-20220314151753281\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314151806862.png\" alt=\"image-20220314151806862\" /></p>\n<p>ç¤¾ä¼šä¸»ä¹‰æ°‘ä¸»æ”¿æ²»åˆ¶åº¦çš„ä¼˜åŠ¿ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314152259011.png\" alt=\"image-20220314152259011\" /></p>\n<p>ç¤¾ä¼šä¸»ä¹‰æ°‘ä¸»æ”¿æ²»åˆ¶åº¦çš„ä¿è¯ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314152348489.png\" alt=\"image-20220314152348489\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314152400703.png\" alt=\"image-20220314152400703\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314152414689.png\" alt=\"image-20220314152414689\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314152430910.png\" alt=\"image-20220314152430910\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314152447716.png\" alt=\"image-20220314152447716\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314152549458.png\" alt=\"image-20220314152549458\" /></p>\n<h3 id=\"å…¨é¢ä¾æ³•æ²»å›½å»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ³•æ²»å›½å®¶\"><a class=\"anchor\" href=\"#å…¨é¢ä¾æ³•æ²»å›½å»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ³•æ²»å›½å®¶\">#</a> å…¨é¢ä¾æ³•æ²»å›½ï¼Œå»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ³•æ²»å›½å®¶</h3>\n<p>æ˜ç¡®å…¨é¢æ¨è¿›ä¾æ³•æ²»å›½ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153031519.png\" alt=\"image-20220314153031519\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314152905367.png\" alt=\"image-20220314152905367\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314152917105.png\" alt=\"image-20220314152917105\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153106201.png\" alt=\"image-20220314153106201\" /></p>\n<p>åšå®šä¸ç§»èµ°ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153303968.png\" alt=\"image-20220314153303968\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153331059.png\" alt=\"image-20220314153331059\" /></p>\n<p>å»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ³•æ²»å›½å®¶:</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153406778.png\" alt=\"image-20220314153406778\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153422299.png\" alt=\"image-20220314153422299\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153439128.png\" alt=\"image-20220314153439128\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153506113.png\" alt=\"image-20220314153506113\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153532435.png\" alt=\"image-20220314153532435\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153546328.png\" alt=\"image-20220314153546328\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153606840.png\" alt=\"image-20220314153606840\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153635660.png\" alt=\"image-20220314153635660\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153652041.png\" alt=\"image-20220314153652041\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314153700237.png\" alt=\"image-20220314153700237\" /></p>\n",
            "tags": [
                "çäº‹"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/MIT6-824-Aurora/",
            "url": "https://songlinlife.top/2022/MIT6-824-Aurora/",
            "title": "MIT6.824: Amazon Aurora: Design Considerations for High Throughput Cloud-Native Relational Databases",
            "date_published": "2022-03-14T04:04:58.000Z",
            "content_html": "<h3 id=\"aurora\"><a class=\"anchor\" href=\"#aurora\">#</a> Aurora</h3>\n<p>å°±æ˜¯ cloud scale çº§åˆ«çš„æ•°æ®åº“ã€‚</p>\n<h3 id=\"durability-at-scale\"><a class=\"anchor\" href=\"#durability-at-scale\">#</a> DURABILITY AT SCALE</h3>\n<h4 id=\"replication-and-correlated-failures\"><a class=\"anchor\" href=\"#replication-and-correlated-failures\">#</a> Replication and Correlated Failures</h4>\n<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å„ç§æ•…éšœï¼Œå¹¶ä¸”è¿™äº›æ•…éšœæœ‰äº›æ˜¯ç‹¬ç«‹çš„ï¼Œæœ‰äº›æ˜¯ç›¸å…³çš„ã€‚ä¸€ä¸ªæ€è·¯æ¥è®¾è®¡å®¹é”™çš„ replicated system å°±æ˜¯ä½¿ç”¨ quorum-based voting protocolã€‚</p>\n<p>ä¸ºäº†æ»¡è¶³ä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯èƒ½è¯»åˆ°æœ€æ–°çš„æ•°æ®ï¼Œä¸€ä¸ªè¯»æ“ä½œè·å¾—çš„ç¥¨æ•° <code>Vr</code>  ä¸ä¸€ä¸ªå†™æ“ä½œè·å¾—çš„ç¥¨æ•° <code>Vw</code>  çš„å’Œå¿…é¡»æ˜¯ <code>Vr + Vw &gt; V</code> ã€‚è¿™ä¸ªä¸ç­‰å¼å¾ˆå¥½ç†è§£ï¼Œæ»¡è¶³äº†è¿™ä¸ªä¸ç­‰å¼é‚£ä¹ˆè¯»æ“ä½œå¿…ç„¶èƒ½å¤Ÿè¯»åˆ°æœ€æ–°çš„æ•°æ®ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦æ»¡è¶³ <code>Vw &gt; V/2</code> ã€‚</p>\n<p>ä½†æ˜¯é€šå¸¸ä¸ºäº†å®¹é”™çš„åšæ³•æ˜¯ï¼š</p>\n<blockquote>\n<p>A common approach to tolerate the loss of a single node is to replicate data to (V = 3) nodes and rely on a write quorum of 2/3 (Vw = 2) and a read quorum of 2/3 (Vr = 2).</p>\n</blockquote>\n<p>ä½†æ˜¯ä½œè€…è®¤ä¸ºè¿™ä¸ªæ•°é‡ä¸æ˜¯è¶³å¤Ÿçš„ã€‚æ–‡ç« ä¸­ç»™å‡ºäº†ä¸€ä¸ªå®¹é”™è®¾è®¡ï¼š</p>\n<p>æ¯ä¸ª AZï¼ˆAvailability Zoneï¼‰ä¸­æœ‰ä¸¤ä¸ª replicasï¼Œå¹¶ä¸”éœ€è¦ç»´æŒ 3 ä¸ª AZã€‚æ•´ä¸ªç³»ç»Ÿå°±æœ‰ 6 ç¥¨ï¼Œå†™æ“ä½œéœ€è¦ 4 ç¥¨ï¼Œè¯»æ“ä½œéœ€è¦ 3 ç¥¨ã€‚è¿™æ ·å®ç°å†™å®¹é”™å°±åªéœ€è¦ä¸€ä¸ª AZ + ä¸€ä¸ªé¢å¤–èŠ‚ç‚¹å®Œå¥½ï¼Œå†™æ“ä½œåªéœ€è¦æ»¡è¶³ 2 ä¸ª AZ å®Œå¥½å°±è¡Œã€‚</p>\n<h3 id=\"the-log-is-the-database\"><a class=\"anchor\" href=\"#the-log-is-the-database\">#</a> THE LOG IS THE DATABASE</h3>\n<h3 id=\"å¬è¯¾\"><a class=\"anchor\" href=\"#å¬è¯¾\">#</a> å¬è¯¾</h3>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314194722941.png\" alt=\"image-20220314194722941\" /></p>\n<p>EBS ç”¨ chain å¤åˆ¶çš„æ–¹æ³•</p>\n<h4 id=\"db-tutorial\"><a class=\"anchor\" href=\"#db-tutorial\">#</a> DB tutorial</h4>\n<p>åªå†™ log record ä¸å†™ b treeï¼Œè¿™æ ·çœæ—¶é—´</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314200345601.png\" alt=\"image-20220314200345601\" /></p>\n<h4 id=\"rds\"><a class=\"anchor\" href=\"#rds\">#</a> RDS</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314202015099.png\" alt=\"image-20220314202015099\" /></p>\n<h4 id=\"ft-goals\"><a class=\"anchor\" href=\"#ft-goals\">#</a> F.T. Goals</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314202734284.png\" alt=\"image-20220314202734284\" /></p>\n<h4 id=\"quorum\"><a class=\"anchor\" href=\"#quorum\">#</a> Quorum</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314212029093.png\" alt=\"image-20220314212029093\" /></p>\n",
            "tags": [
                "åˆ†å¸ƒå¼"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/linux/MIT6-S081%EF%BC%9AIntroduction/",
            "url": "https://songlinlife.top/2022/linux/MIT6-S081%EF%BC%9AIntroduction/",
            "title": "MIT6.S081ï¼šIntroduction",
            "date_published": "2022-03-14T01:55:18.000Z",
            "content_html": "<h3 id=\"å†™åœ¨å¼€å¤´çš„è¯\"><a class=\"anchor\" href=\"#å†™åœ¨å¼€å¤´çš„è¯\">#</a> å†™åœ¨å¼€å¤´çš„è¯</h3>\n<p>MIT6.824 è¿™é—¨è¯¾æˆ‘å·²ç»åšå®Œä¸€åŠå†…å®¹äº†ï¼Œè€Œä¸” lab ä¹Ÿåªå‰©ä¸‹æœ€åçš„ lab4ã€‚æ‰€ä»¥æˆ‘åœ¨æƒ³ä¼¼ä¹ç°åœ¨æ˜¯æ—¶å€™å¼€å¯æ–°çš„å‰¯æœ¬äº†ã€‚</p>\n<p>æˆ‘çŸ¥é“ä¸Šä¸€ä¸ªå‰¯æœ¬æˆ‘è¿˜æ²¡æ‰“é€šå…³ï¼Œè€Œä¸” MIT6.824 æ˜¯å¤§å‰¯æœ¬ï¼Œæ•´ä¸ª 3 æœˆä»½åŠ ä¸Šè¯»è®ºæ–‡ï¼Œæˆ‘ä¹Ÿå¹¶æ²¡æœ‰å¾ˆå¤§æŠŠæ¡èƒ½å¤ŸæŠŠè¿™ä¹ˆè¯¾ç¨‹å¹²æ‰ã€‚æˆ‘çš„è§„åˆ’é‡Œé¢è¿™ä¹ˆè¯¾ç¨‹æ˜¯ä½œä¸ºæˆ‘çš„æ ¸å¿ƒè¯¾ç¨‹ï¼Œè‡ªç„¶ä¹Ÿè¦ç²¾ç»†ä¸€äº›ã€‚ä½†æ˜¯ 6.S081 çš„éš¾åº¦å¹¶æ²¡æœ‰é‚£ä¹ˆå¤§ï¼Œå¦‚æœæ—¶é—´å®‰æ’çš„å¥½çš„è¯ï¼Œåœ¨ 4 æœˆä¸­æ—¬æˆ‘æ˜¯å¯ä»¥ç»“æŸè¿™é—¨è¯¾çš„ã€‚</p>\n<p>å…³äºæˆ‘ä¸ºä»€ä¹ˆè¦å­¦è¿™ä¹ˆè¯¾ã€‚</p>\n<p>ä¸€ä¸ªå¾ˆå¤§çš„åŸå› å°±æ˜¯ç›´æ¥å…³äºæ“ä½œç³»ç»Ÿçš„çŸ¥è¯†å¤ªè–„å¼±äº†ï¼Œä½†æ˜¯å¦‚æœè¦èµ°å‘æ•°æ®åº“ã€åˆ†å¸ƒå¼æ–¹å‘å°±å¿…é¡»å’Œåº•å±‚ä¹Ÿå°±æ˜¯æ“ä½œç³»ç»Ÿæ‰“äº¤é“ã€‚æ‰€ä»¥æ“ä½œç³»ç»Ÿä¸å¾—ä¸å­¦ã€‚è¿™é—¨è¯¾ç¨‹ä¹Ÿæ˜¯ä¸€ä¸ªæœ¬ç§‘ç”Ÿè¯¾ç¨‹ï¼Œæˆ‘çš„å­¦ä¹ èƒ½åŠ›è¿˜æ˜¯æœ‰ç‚¹è‡ªä¿¡çš„ã€‚</p>\n<p>MIT6.824 å’Œ MIT6.S081ï¼Œäº‰å–å…¨éƒ¨åœ¨å››æœˆä¸­ç»“æŸã€‚ç„¶åå°±æ˜¯æ„‰å¿«çš„ CPP åº·å¤è®­ç»ƒäº†ã€‚äº”æœˆäº‰å–å­¦å®Œ CMU445ã€‚å¦‚æœé‚£æ—¶å€™æ²¡æœ‰æ‰¾åˆ°å®ä¹ å°±æ¥ç€å­¦ CMU721ã€‚</p>\n<p>okï¼Œä½ å¯ä»¥åšåˆ°çš„å¯¹å§ï¼Ÿ</p>\n<h3 id=\"å‘½ä»¤\"><a class=\"anchor\" href=\"#å‘½ä»¤\">#</a> å‘½ä»¤</h3>\n<h4 id=\"fork\"><a class=\"anchor\" href=\"#fork\">#</a> fork</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314104858521.png\" alt=\"image-20220314104858521\" /></p>\n<p>fork åœ¨å­è¿›ç¨‹ä¸­è¿”å› 0ï¼Œåœ¨çˆ¶è¿›ç¨‹ä¸­è¿”å›å­è¿›ç¨‹çš„ pidã€‚</p>\n<h4 id=\"exec\"><a class=\"anchor\" href=\"#exec\">#</a> exec</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314105419719.png\" alt=\"image-20220314105419719\" /></p>\n<p>exec å°±æ˜¯å°†å½“å‰è¿›ç¨‹å†…å­˜æ¸…ç©ºï¼Œæ‰§è¡Œæ–°çš„å‘½ä»¤ã€‚è¿™é‡Œå°±æ˜¯ä¼šå»æ‰§è¡Œ echo å‘½ä»¤ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæ˜¯æ¸…ç©ºå½“å‰è¿›ç¨‹çš„å†…å­˜ï¼Œè€Œä¸æ˜¯å¦å¼€ä¸€ä¸ªæ–°è¿›ç¨‹ã€‚å¦‚æœ exec æ‰§è¡ŒæˆåŠŸï¼Œexec ä¼šæ‰§è¡Œ exit (0)ã€‚å¦‚æœ exec æ‰§è¡Œå¤±è´¥ï¼Œå°±ä¼šæ‰§è¡Œ exec æ¥ä¸‹æ¥çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ printfã€‚</p>\n<h4 id=\"forkexec\"><a class=\"anchor\" href=\"#forkexec\">#</a> forkexec</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314110105319.png\" alt=\"image-20220314110105319\" /></p>\n<p>å½“å‰è¿›ç¨‹ fork äº†ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä½¿ç”¨ exec æ¸…ç©ºäº†å½“å‰è¿›ç¨‹å†…å­˜ï¼Œå¹¶ä¸”æ‰§è¡Œäº† echoã€‚å¦‚æœ exec æ‰§è¡Œå¤±è´¥ï¼Œæ‰ä¼šæ‰§è¡Œä¸‹é¢çš„ printf å’Œ exitã€‚</p>\n<p>è€Œçˆ¶è¿›ç¨‹ä½¿ç”¨ wait ç­‰å¾…å­è¿›ç¨‹ä¼ å›ç»“æŸçš„ statusã€‚å¦‚æœå­è¿›ç¨‹æ‰§è¡Œ exec ç»“æŸï¼Œä¹Ÿå°±æ˜¯ exit (0)ï¼Œè¿”å› status 0ã€‚å¦‚æœæ‰§è¡Œ exec å¤±è´¥å°±ä¼šæ˜¯ exit (1)ã€‚</p>\n<h4 id=\"redirect\"><a class=\"anchor\" href=\"#redirect\">#</a> redirect</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220314111428220.png\" alt=\"image-20220314111428220\" /></p>\n<p>è¿™é‡Œå°†å­è¿›ç¨‹çš„ output é‡å®šå‘ output.txtã€‚ä¸»è¦ï¼Œfork ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œä½†æ˜¯ç»´æŠ¤äº†ä¸€ä¸ªå¤åˆ¶çš„æ–‡ä»¶æè¿°ç¬¦è¡¨ï¼Œè¿™æ„å‘³ç€å³ä½¿æˆ‘ä»¬ä¿®æ”¹äº†å­è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¸ä¼šå½±å“åˆ°çˆ¶è¿›ç¨‹ã€‚</p>\n",
            "tags": [
                "Linux"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/GrimoireLab%EF%BC%9A%E5%A1%AB%E5%9D%91%E8%AE%B0/",
            "url": "https://songlinlife.top/2022/GrimoireLab%EF%BC%9A%E5%A1%AB%E5%9D%91%E8%AE%B0/",
            "title": "GrimoireLabï¼šå¡«å‘è®°",
            "date_published": "2022-03-13T08:19:54.000Z",
            "content_html": "<p>ç”¨äºè®°å½•æˆ‘åœ¨ä½¿ç”¨ GrimoireLab é‡åˆ°çš„å„ç§é—®é¢˜ã€‚</p>\n<h3 id=\"æ­å»º\"><a class=\"anchor\" href=\"#æ­å»º\">#</a> æ­å»º</h3>\n<p>åœ¨é˜¿é‡Œäº‘çš„äº‘æœåŠ¡å™¨ä¸Šæ­å»ºçš„å®ä¾‹ã€‚ä½¿ç”¨çš„æ˜¯é¦™æ¸¯çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ‹‰å–é•œåƒçš„é€Ÿåº¦ä¼šå¾ˆå¿«ã€‚</p>\n<h4 id=\"é‡åˆ°çš„å‘ç‚¹\"><a class=\"anchor\" href=\"#é‡åˆ°çš„å‘ç‚¹\">#</a> é‡åˆ°çš„å‘ç‚¹</h4>\n<p>ElasticSearch æ— æ³•å¯åŠ¨</p>\n<blockquote>\n<pre><code>elasticsearch_1  | max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]\n</code></pre>\n</blockquote>\n<p>æŠ¥é”™ä¿¡æ¯æ˜¯è™šå†…å­˜ä¸å¤Ÿç”¨ï¼Œæ— æ³•å¯åŠ¨ Elasticã€‚è§£å†³åŠæ³•ï¼š</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>sysctl <span class=\"token operator\">-</span>w vm<span class=\"token punctuation\">.</span>max_map_count<span class=\"token operator\">=</span><span class=\"token number\">262144</span></pre></td></tr></table></figure><h3 id=\"é£Ÿç”¨æ–¹æ³•\"><a class=\"anchor\" href=\"#é£Ÿç”¨æ–¹æ³•\">#</a> é£Ÿç”¨æ–¹æ³•</h3>\n<h4 id=\"git\"><a class=\"anchor\" href=\"#git\">#</a> git</h4>\n<p>git ä¸éœ€è¦é…ç½® config æ–‡ä»¶ï¼Œåªè¦åœ¨ projects.json æ–‡ä»¶ä¸­ç»™å‡ºåœ°å€å°±è¡Œäº†ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">\"OpenDigger\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token property\">\"meta\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"OpenDigger\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token property\">\"git\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>          <span class=\"token string\">\"https://github.com/X-lab2017/open-digger\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>          <span class=\"token string\">\"https://github.com/X-lab2017/open-digger-website\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ•ˆæœå›¾ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220313165938014.png\" alt=\"image-20220313165938014\" /></p>\n<p>å¯ä»¥ç‚¹å‡»æ·»åŠ  filterã€‚</p>\n<p>æ³¨æ„ï¼šå¦‚æœæ˜¯ private repo éœ€è¦åœ¨ url ä¸­æŒ‡å®š</p>\n",
            "tags": [
                "xlab"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-lab3-KV-Service/",
            "url": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-lab3-KV-Service/",
            "title": "MIT6.824: lab3 KV Service",
            "date_published": "2022-03-07T05:51:07.000Z",
            "content_html": "<p>ç»ˆäºåˆ°äº† Lab3 äº†ï¼Œå†™ä¸€ä¸ª KV æœåŠ¡ğŸ</p>\n<h3 id=\"è¦æ±‚\"><a class=\"anchor\" href=\"#è¦æ±‚\">#</a> è¦æ±‚</h3>\n<p>lab3 éœ€è¦æ„å»ºä¸€ä¸ª fault-tolerance key/value storage serviceã€‚ç”¨åˆ°ä¹‹å‰ lab2 å†™çš„ Raft libraryã€‚</p>\n<ol>\n<li>\n<p>ä¸‰ä¸ª api æ¥å£ï¼š <code>Put(key, value)</code> ,  <code>Append(key, arg)</code> , and  <code>Get(key)</code> ã€‚å¦‚æœ key ä¸å­˜åœ¨ï¼Œ <code>Get(key)</code>  è¿”å›ç©º stringï¼Œå¹¶ä¸” <code>append</code>  ä¸ <code>put</code>  æ“ä½œç­‰ä»·ã€‚</p>\n</li>\n<li>\n<p>each client talks to the service through a  <code>Clerk</code>  with Put/Append/Get methods.</p>\n</li>\n<li>\n<p>å®ç°å¼ºä¸€è‡´æ€§ã€‚</p>\n</li>\n<li>\n<p>è¾¾æˆæ•ˆæœ</p>\n</li>\n<li>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220309191901863.png\" alt=\"image-20220309191901863\" /></p>\n</li>\n</ol>\n<h3 id=\"part-a\"><a class=\"anchor\" href=\"#part-a\">#</a> Part A</h3>\n<p>æ¯ä¸€ä¸ª kv server éƒ½å…³è”äº†ä¸€ä¸ª raft peerã€‚</p>\n<p>å®ç° <code>Put</code> ã€ <code>Append</code> ã€ <code>Get</code> ã€‚kvserver å…ˆ raft æäº¤è¿™ä¸‰ä¸ª operationï¼Œraft log å†™è¿™ä¸‰ä¸ªæ“ä½œçš„åºåˆ—ã€‚</p>\n<p>kv server ç”± raft å†³å®šåº”è¯¥æ‰§è¡Œä»€ä¹ˆ operationã€‚</p>\n<p><code>Clerk</code>  å¹¶ä¸çŸ¥é“è°æ˜¯ leaderï¼Œå› æ­¤å¦‚æœ Clerk å‘é€ RPC åˆ°é”™çš„ kvserverï¼Œæˆ–è€…ä¸èƒ½åˆ°è¾¾è¿™ä¸ª kvserverï¼Œé‚£ä¹ˆ Clerk éœ€è¦é‡æ–°å‘é€åˆ°å¦ä¸€ä¸ª kvserverã€‚</p>\n<p>å¦‚æœè¿™ä¸ªå‘½ä»¤ commit ä¹‹åï¼Œé‚£ä¹ˆ raft ä¼š apply commandï¼Œäº server ä¼šå…ˆæ‰§è¡Œçš„ç»“æœè¿”å›ç»™ Clerkã€‚</p>\n<p>å¦‚æœ operation æ²¡æœ‰è¢« commitï¼Œé‚£ä¹ˆ server å‘é€ä¸€ä¸ª errorï¼Œç„¶å <code>Clerk</code>  éœ€è¦é‡è¯•ã€‚</p>\n<h4 id=\"æˆ‘çš„æ€è€ƒ\"><a class=\"anchor\" href=\"#æˆ‘çš„æ€è€ƒ\">#</a> æˆ‘çš„æ€è€ƒ</h4>\n<p>client é€šè¿‡ clerk å‘é€ä¸‰ç§ operationï¼Œè¿™ä¸‰ç§ operation åªèƒ½è¢« leader æ¥æ‰§è¡Œã€‚åªè¦æ˜¯ leader apply çš„ operation ä¸€å®šæ˜¯ commitï¼Œè¿™æ¯«æ— ç–‘é—®ã€‚ç°åœ¨çš„é—®é¢˜æ˜¯å¦‚ä½•è®© kvserver æ¥æ£€æŸ¥è¿™ä¸ªæ“ä½œæ˜¯æ‰§è¡Œçš„å‘¢ï¼Ÿ</p>\n<p>Put å’Œ Append æ“ä½œåªèƒ½è¢«æ‰§è¡Œä¸€æ¬¡ä¸èƒ½è¢«å¤šæ¬¡æ‰§è¡Œï¼Œè¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚</p>\n<p>å¯¹äº commandï¼Œéœ€è¦è®¾è®¡ä¸€ä¸ªæ ¼å¼ï¼Œèƒ½å¤Ÿè®© kvserver çŸ¥é“ operation æ˜¯ä»€ä¹ˆã€‚å› ä¸º command å°±æ˜¯ä¸€ä¸ª stringã€‚</p>\n<p>æŒ‰ç…§è¦æ±‚ä¹Ÿå°±æ˜¯è¯´ client å¦‚æœæ²¡æœ‰æ‰§è¡ŒæˆåŠŸæŸä¸ª operation å°±ä¼šä¸€ç›´è¢«é˜»å¡ã€‚</p>\n<p>æˆ‘å…³äº PutAppend çš„è€ƒè™‘ï¼Œå› ä¸ºæ“ä½œéœ€è¦å»é™¤é‡å¤ï¼Œå› ä¸º client éœ€è¦å¹¶å‘ã€‚æ‰€ä»¥ä¸èƒ½</p>\n<h3 id=\"raftå®ç°çº¿æ€§ä¸€è‡´æ€§\"><a class=\"anchor\" href=\"#raftå®ç°çº¿æ€§ä¸€è‡´æ€§\">#</a> Raft å®ç°çº¿æ€§ä¸€è‡´æ€§</h3>\n<p>å¤šç”¨æˆ·å¹¶å‘ï¼ˆæ¯ä¸ª client åªæ˜¯è°ƒç”¨ä¸€ä¸ªè¯·æ±‚ï¼‰</p>\n<blockquote>\n<p>It's OK to assume that a client will make only one call into a Clerk at a time.</p>\n</blockquote>\n<p>æå‡ä¸­ä¹Ÿè¯´äº†ï¼Œå¯ä»¥å‡è®¾ client æ¯ä¸€æ¬¡åªæ˜¯ call ä¸€æ¬¡ã€‚</p>\n<blockquote>\n<p>it's OK in this case for the server and client to wait indefinitely until the partition heals.</p>\n</blockquote>\n<p>ä¹Ÿå°±æ˜¯è¯´å¯ä»¥è®©è¿™ä¸ª wait æ— é™åˆ¶ç­‰ä¸‹å»ã€‚ï¼ˆç­‰ commit å¯ä»¥ä¸é™æ—¶é—´ï¼‰</p>\n<p>ä½†æ˜¯æˆ‘ä»¬èƒ½ä¸èƒ½æ“ä½œä¸€ä¸‹ï¼Ÿæä¸€ä¸ªè¶…æ—¶ï¼Ÿ</p>\n<p>æˆ‘æ²¡å¤´ç»ªçš„æ—¶å€™ï¼Œçœ‹åˆ°äº† Raft åšå£«è®ºæ–‡ï¼ŒçœŸçš„æ„ŸåŠ¨å•Šã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturespicturesimage-20220307222045412.png\" alt=\"image-20220307222045412\" /></p>\n<p>æŒ‰ç…§è¿™ä¸ªå‚æ•°å†™ RPC å°±è¡Œäº†ã€‚</p>\n<h4 id=\"å»é‡å¤\"><a class=\"anchor\" href=\"#å»é‡å¤\">#</a> å»é‡å¤</h4>\n<p>æˆ‘ä»¬å‡å®šæ¯ä¸€ä¸ª client æ¯ä¸€æ¬¡åªæ˜¯æ‰§è¡Œï¼ˆcallï¼‰ä¸€ä¸ªæ“ä½œï¼Œå¹¶ä¸”å¦‚æœæ‰§è¡Œå¤±è´¥çš„è¯ï¼Œé‚£ä¹ˆå®ƒä¼šé˜»å¡ä½ï¼Œå¹¶ä¸”ä¸€ç›´æ‰§è¡Œè¿™ä¸ªè¯·æ±‚ã€‚</p>\n<p>è¿™æ ·å»é‡å¤å°±å¾ˆç®€å•äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ server ç«¯ç»´æŠ¤ä¸€ä¸ª lastComandID å°±è¡Œäº†ï¼Œæ•°æ®ç»“æ„ä¸º map []</p>\n<h3 id=\"39å·æ›´æ–°\"><a class=\"anchor\" href=\"#39å·æ›´æ–°\">#</a> 3.9 å·æ›´æ–°</h3>\n<p>æœ€è¿‘ä¸€ä¸ªéå¸¸ä¸¥é‡çš„ bug å¡äº†æˆ‘ä¸€å¤©ï¼Œæ€ä¹ˆéƒ½æ²¡åŠæ³•å¤„ç†å¥½ã€‚æ˜¯å…³äºçº¿æ€§ä¸€è‡´æ€§çš„ï¼Œæˆ‘ä¸€ç›´æ²¡æœ‰æ€ä¹ˆç†è§£çº¿æ€§ä¸€è‡´æ€§è¿™å°±å¯¼è‡´æˆ‘è¿™ä¸ª lab åšå¾—å¾ˆç—›è‹¦ã€‚</p>\n<p>å…ˆçœ‹ä¸€ä¸‹ raft ä½œè€…å¯¹çº¿æ€§ä¸€è‡´æ€§çš„ç†è§£ï¼š</p>\n<blockquote>\n<p>In linearizability, each operation appears to execute instantaneously, exactly once, at some point between its invocation and its response. This is a strong form of consistency that is simple for clients to reason about, and it disallows commands being processed multiple times.</p>\n</blockquote>\n<p>æ³¨æ„è¿™ä¸ª exactly onceï¼Œ at some pointã€‚ä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰æ“ä½œéƒ½åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”æ˜¯åŸå­æ€§ç¬æ—¶çš„ã€‚è¿™ä¼¼ä¹æœ‰äº›å¥‡æ€ªï¼Œå› ä¸ºæˆ‘ä»¬æ˜æ˜å¯ä»¥æ‰§è¡Œå¤šæ¬¡çš„ï¼Œå› ä¸ºå½“æœ‰è¯·æ±‚åˆ° kv server æ—¶å€™æˆ‘ä»¬å°±è¿›è¡Œäº†ä¸€æ¬¡å†™ raft logï¼Œç„¶åå› ä¸ºè¶…æ—¶åŸå› æˆ‘ä»¬åˆä¸€æ¬¡å‘ raft å‘é€äº†è¯·æ±‚ï¼Œæœ‰ä¸€æ¬¡å†™äº†ä¸€æ¬¡ raft logã€‚æ‰€ä»¥åœ¨ apply é˜¶æ®µï¼Œä¸ºäº†å®ç°è¿™ä¸ª exactly once æˆ‘ä»¬éœ€è¦å¯¹æ“ä½œè¿›è¡Œå»é‡å¤ï¼Œä¿è¯æ‰€æœ‰æ“ä½œåªèƒ½æ‰§è¡Œä¸€æ¬¡ã€‚</p>\n<p>ä½†æ˜¯é—®é¢˜è¿˜æ²¡ç»“æŸï¼Œå»é‡çœŸçš„ä¿è¯äº†çº¿æ€§ä¸€è‡´æ€§å—ï¼Ÿæ³¨æ„ä½œè€…è¿™å¥è¯ï¼š<strong>at some point between its invocation and its response. **  between its invocation and its response. æ˜¯å…³é”®æ‰€åœ¨ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„æ‰§è¡Œæ˜¯è¦å‘ç”Ÿåœ¨è°ƒç”¨å’Œè¿”å›ä¹‹é—´çš„ã€‚ä½†æ˜¯åœ¨ä¸Šé¢çš„æè¿°ä¸­ï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆæ“ä½œçš„ï¼Ÿå¦‚æœå½“è¶…æ—¶å°±</strong>é‡æ–°å‘é€è¯·æ±‚ **ã€‚è¿™æ„å‘³ç€é‚£ä¸ªè¶…æ—¶çš„è¯·æ±‚å·²ç»ç»“æŸäº†ï¼Œå®ƒæ²¡æœ‰åœ¨è°ƒç”¨å’Œè¿”å›ä¹‹é—´æ‰§è¡Œï¼</p>\n<p>æ¥çœ‹ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220309100623892.png\" alt=\"image-20220309100623892\" /></p>\n<p>è¿™é‡Œæœ‰ä¸‰ä¸ª clientï¼Œå¹¶å‘å‘é€è¯·æ±‚ã€‚ç°åœ¨æˆ‘ä»¬æŠŠé—®é¢˜ç®€å•åŒ–ï¼Œåªæ˜¯å¯¹ log ä¸­çš„ä¸€ä¸ªå˜é‡ x è¿›è¡Œè€ƒè™‘ï¼Œå®ƒåˆå§‹ä¸ºç©ºï¼ŒA1 è¡¨ç¤ºå‘ x Append 1ã€‚R è¡¨ç¤ºè¯»è¿™ä¸ªå˜é‡ xã€‚</p>\n<p>æ³¨æ„ï¼è¿™é‡Œæˆ‘çš„çº¿æ®µè¡¨ç¤º client<strong> å‘èµ·æŸä¸€ä¸ªè¯·æ±‚åˆ°ç»“æŸçš„æ—¶é—´</strong>ï¼Œè¿™æ®µæ—¶é—´å†… client å¯èƒ½å› æ­¤è¶…æ—¶ç­‰åŸå› å¤šæ¬¡å‘é€é‡å¤çš„è¯·æ±‚ï¼ŒçŸ¥é“æœ€ç»ˆæ”¶åˆ°ç­”å¤ã€‚</p>\n<p>å› ä¸º KV server é¦–å…ˆæ‰§è¡Œäº† A1ã€A2ã€‚æ‰€ä»¥è¿™æ—¶å€™ client1 å…ˆè¯»å– xï¼Œå®ƒè¯»åˆ°äº† x çš„å€¼ä¸º 12ã€‚ä½†æ˜¯å› ä¸º rpc è°ƒç”¨ç­‰åŸå› ï¼Œè¿™ä¸ªè¯»å–åˆ°çš„å€¼æ²¡æœ‰è¿”å›ç»™ clientã€‚é‚£ä¹ˆ client è‚¯å®šä¼šé‡æ–°å‘é€è¯»è¯·æ±‚çš„ã€‚ä½†æ˜¯å› ä¸º<strong>å»é‡</strong>ï¼Œæˆ‘ä»¬ä¸èƒ½å†æ‰§è¡Œè¿™ä¸ªè¯»æ“ä½œäº†ï¼Œäºæ˜¯æˆ‘ä»¬æŠŠè¿™ä¸ªè¯»åˆ°çš„ç»“æœå­˜èµ·æ¥ã€‚ç­‰ä¸‹ä¸€æ¬¡ client1 å‘é€è¯»è¯·æ±‚çš„æ—¶å€™ç›´æ¥å‘é€å­˜å¥½çš„ç»“æœã€‚</p>\n<p>okï¼Œclient3 æ­¤æ—¶æ‰§è¡Œäº† A3ï¼Œx çš„å€¼å˜ä¸º 123ï¼Œé‚£ä¹ˆ client2 å†è¯»åå°±è¯»åˆ°äº† 123. å¹¶ä¸”ç›´æ¥è¿”å›ç»™äº† client2ã€‚</p>\n<p>è¿‡äº†ä¸€ä¼šï¼Œclient1 ä¹Ÿè¯»åˆ°äº†ç»“æœï¼Œx å€¼ä¸º 12ã€‚</p>\n<p><strong>äºæ˜¯è¿™å°±æ²¡æœ‰äº†çº¿æ€§ä¸€è‡´æ€§äº†ï¼Œå› ä¸º client1 è¯»åˆ°äº†ä¸€ä¸ªæ—§çš„å€¼ï¼</strong></p>\n<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªæƒ…å†µï¼Œå› ä¸ºæˆ‘ä»¬è¿èƒŒäº†ï¼š</p>\n<p><strong>each operation appears to execute instantaneously, exactly once, at some point between its invocation and its response)</strong></p>\n<p>client çš„è¯»æ“ä½œæŒç»­äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œè€Œä¸æ˜¯ execute instantaneouslyã€‚</p>\n<p>æˆ‘çš„æ€è€ƒå°±æ˜¯ï¼Œè¯»è¯·æ±‚ä¸èƒ½è¿›è¡Œå»é‡ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªèƒ½åœ¨å½“å‰çš„ KV request å¾—åˆ°å¤„ç†ã€‚</p>\n<p>å…¶å®æ•™æˆåœ¨è¯¾ä¸Šè®²åˆ°è¿‡è¿™ç§åœºæ™¯ï¼ŒRead æ“ä½œè¿”å›æ—§å€¼å¹¶ä¸ä¸€å®šç ´åŒ–äº†ä¸€è‡´æ€§ã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220316094851952.png\" alt=\"image-20220316094851952\" /></p>\n<p>æ¯”å¦‚ C2 çš„ read æ“ä½œï¼Œåœ¨ç®­å¤´å¤„åé¢å®ƒä¼šè¿”å› 4ï¼Œä½†æ˜¯åœ¨ç®­å¤´å¤„ä¹‹å‰å®ƒå¯èƒ½è¿”å› 3ã€‚rpc æœ‰ç½‘ç»œå»¶è¿Ÿï¼Œæ‰€ä»¥å®¢æˆ·ç«¯æ˜¯å¯ä»¥æ¥æ”¶åˆ°æ—§å€¼çš„ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€ç ´åäº†çº¿æ€§ä¸€è‡´æ€§ï¼Œå› ä¸ºè¿™ä¸ªæ—§å€¼ä¸æ˜¯ server å¸Œæœ›çš„è€Œæ˜¯ client çœ‹åˆ°äº†ã€‚</p>\n<h3 id=\"310å·æ›´æ–°\"><a class=\"anchor\" href=\"#310å·æ›´æ–°\">#</a> 3.10 å·æ›´æ–°</h3>\n<p>é‡åˆ°é—®é¢˜ï¼Œ10 æ¬¡æµ‹è¯•é‡Œé¢æ€»æ˜¯ä¼šä¸€æ¬¡æµ‹è¯•è«åå¥‡å¦™ä¸¢å¤± logï¼Œå¯¼è‡´æ•°æ®åœ¨ä¸åŒçš„ kv ä¸ŠåŒæ­¥å¤±è´¥ã€‚ã€‚ã€‚å¾ˆå¤±è´¥ï¼Œæˆ‘æ‰“äº†ä¸€å¤©çš„ debugï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°åŸå› ã€‚</p>\n<p>æˆ‘çŸ¥é“é—®é¢˜å‡ºåœ¨æˆ‘çš„ raft å±‚ï¼Œä½†æ˜¯å³ä½¿æˆ‘æŸ¥çœ‹äº†å¾ˆä¹…ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ‰¾æˆ‘æˆ‘çš„ raft å±‚é—®é¢˜å‡ºåœ¨å“ªé‡Œã€‚ã€‚ã€‚ã€‚</p>\n<ol>\n<li>leader é€‰ä¸¾å¯èƒ½æœ‰ç‚¹é—®é¢˜ï¼Œå¯¼è‡´é€‰ä¸¾äº†ä¸åº”è¯¥æˆä¸º leader çš„èŠ‚ç‚¹ï¼Œè‡´ä½¿è¦†ç›–äº†åç»­çš„æ—¥å¿—ã€‚ä½†æ˜¯è¿™ä¸ªå¯èƒ½æ€§ä¸å¤§</li>\n<li>AppendEntries å‡ºé”™ï¼Œæ²¡æœ‰ commit çš„ log entries è®¤ä¸º committed äº†ï¼Œè¿™å°±å¯¼è‡´åç»­è¿™ä¸ªä¸¢å¤±ã€‚</li>\n</ol>\n<p>é—®é¢˜æ˜¯æˆ‘æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå¯¼è‡´æ€ä¹ˆæƒ…å†µã€‚ã€‚ã€‚å°±è¿™æ ·å§ï¼Œå¿ƒç´¯äº†ã€‚ã€‚ã€‚</p>\n<p>è€Œä¸” 3B æ˜¯çœŸçš„è¿‡ä¸äº†ï¼Œå¿…é¡»ä»£ç é‡æ„ï¼ŒæŠŠ raft é‡æ–°å†™ä¸€éã€‚ã€‚ã€‚æ„Ÿè§‰å¿ƒå¥½ç´¯å•Šã€‚</p>\n<h3 id=\"rafté‡æ„\"><a class=\"anchor\" href=\"#rafté‡æ„\">#</a> Raft é‡æ„</h3>\n<p>å‚è€ƒä»£ç ï¼š</p>\n<h3 id=\"312å·æ›´æ–°\"><a class=\"anchor\" href=\"#312å·æ›´æ–°\">#</a> 3.12 å·æ›´æ–°</h3>\n<p>æ„‰å¿«æ‰“è¿‡ lab3</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220312193359692.png\" alt=\"image-20220312193359692\" /></p>\n",
            "tags": [
                "åˆ†å¸ƒå¼",
                "MIT6.824"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-Object-Storage-on-CRAQ-High-throughput-chain-replication-for-read-mostly-workloads/",
            "url": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-Object-Storage-on-CRAQ-High-throughput-chain-replication-for-read-mostly-workloads/",
            "title": "MIT6.824: Object Storage on CRAQ High-throughput chain replication for read-mostly workloads",
            "date_published": "2022-03-06T11:19:37.000Z",
            "content_html": "<h3 id=\"ç®€ä»‹\"><a class=\"anchor\" href=\"#ç®€ä»‹\">#</a> ç®€ä»‹</h3>\n<p>è¯´ç™½äº†å°±æ˜¯ CR çš„åŠ å¼ºç‰ˆï¼Œå°†è¯»è¯·æ±‚åˆ†æ‘Šåˆ°é“¾ä¸Šçš„æ¯ä¸ª replicasï¼Œæ­é… zookeeper å®ç°äº†åˆ†å¸ƒå¼å®¹é”™æœºåˆ¶ã€‚</p>\n<h3 id=\"åŸºæœ¬æ¨¡å‹\"><a class=\"anchor\" href=\"#åŸºæœ¬æ¨¡å‹\">#</a> åŸºæœ¬æ¨¡å‹</h3>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220306192043325.png\" alt=\"image-20220306192043325\" /></p>\n<p>CRAQ (Chain Replication with Apportioned Queries), åªä¼šæä¾›ä¸¤ä¸ªåŸè¯­ï¼Œè¯»å’Œå†™ã€‚</p>\n<p>ä¸¤ç§ä¸€è‡´æ€§ï¼š</p>\n<p><strong>å¼ºä¸€è‡´æ€§</strong>ï¼šæ‰€æœ‰è¯»æ“ä½œéƒ½èƒ½è¯»åˆ°æœ€æ–°çš„æ•°æ®ã€‚</p>\n<p><strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šæ‰€æœ‰èŠ‚ç‚¹ apply write order ç›¸åŒï¼Œä½†æ˜¯è¯»æ“ä½œå¯èƒ½è¯»åˆ° stale dataã€‚</p>\n<p>CRAQ èƒ½å¤Ÿä¿è¯å¼ºä¸€è‡´æ€§ã€‚</p>\n<h4 id=\"chain-replication\"><a class=\"anchor\" href=\"#chain-replication\">#</a> Chain Replication</h4>\n<p>è¿™å¼ å›¾è¶³å¤Ÿè§£é‡Š Chain Replicationï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220307111243918.png\" alt=\"image-20220307111243918\" /></p>\n<p>æ‰€æœ‰çš„ write request éƒ½å¿…é¡»é€šè¿‡ head æ¥å¤„ç†ï¼Œhead å¤„ç† writeï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹å¯¹åº”çš„ objectã€‚æ³¨æ„æ¯ä¸ª object éƒ½æœ‰ä¸€ä¸ª <code>version</code> ã€‚ä¿®æ”¹ object å version ä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚å½“ head æ”¶åˆ°äº† write è¯·æ±‚ä¹‹åå°±ä¼šå°†è¿™ä¸ª write operation é€šè¿‡ chain ä¼ é€’ä¸‹å»ã€‚åœ¨ tail å¤„æ‰ä¼š commit è¿™ä¸ª writeï¼Œå¹¶ä¸”æŠŠ reply è¿”å›ç»™ clientã€‚</p>\n<h4 id=\"chain-replication-with-apportioned-queries\"><a class=\"anchor\" href=\"#chain-replication-with-apportioned-queries\">#</a> Chain Replication with Apportioned Queries</h4>\n<p>Object åœ¨ replicas ä¸Šæœ‰ä¸åŒçš„ versionï¼Œæ¯ä¸ª version æœ‰ä¸¤ç§çŠ¶æ€ï¼š <code>clean</code>  ä¸ <code>dirty</code> ã€‚</p>\n<p><code>clean</code> ï¼šå½“ object è¢«åˆ›å»ºæ—¶ï¼Œå®ƒçš„å¯¹åº” version æ˜¯ cleanã€‚åªæœ‰ clean çŠ¶æ€ version æ‰èƒ½è¢«è¯»å–ã€‚</p>\n<p><code>dirty</code> ï¼šå½“ object è¢«ä¿®æ”¹å version åå¢åŠ ã€‚å¦‚æœèŠ‚ç‚¹ä¸æ˜¯ tailï¼Œé‚£ä¹ˆå®ƒéœ€è¦å°†è¿™ä¸ª version çš„ object appendã€‚å¹¶å°†è¿™ä¸ª version æ ‡ä¸º <code>dirty</code> ã€‚</p>\n<p><strong>åªæœ‰ tail çš„ committed æ‰èƒ½å°† version ä» dirty è½¬æ¢ä¸º clean</strong></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220307113000838.png\" alt=\"image-20220307113000838\" /></p>\n<p>Figure 3 å¾ˆå¥½åœ°è§£é‡Šäº† Query æ–¹å¼ï¼Œå¯¹äºä¸€ä¸ª Query æ¥è¯´ï¼š</p>\n<ol>\n<li>å¦‚æœæŸ¥è¯¢çš„è¿™ä¸ª object çš„æœ€æ–°çš„ version æ˜¯ cleanï¼Œé‚£ä¹ˆå°±å°†è¿™ä¸ª object è¿”å›ã€‚</li>\n<li>å¦‚æœå¯¹åº”çš„ version æ˜¯ dirtyï¼Œé‚£ä¹ˆ replicas å‘ Tail è¯¢é—®å“ªä¸ª version æ˜¯ clean çš„ã€‚tail è¿”å› clean çš„ version å·ã€‚</li>\n<li>replicas å°†å¯¹åº” clean version çš„ object è¿”å›ç»™ clientã€‚</li>\n</ol>\n<p><strong>æ³¨æ„ï¼šå¦‚æœä¸€ä¸ª version è¢«ç¡®è®¤ä¸º cleanï¼Œå®ƒä¼šåˆ é™¤ä¹‹å‰æ‰€æœ‰ dirty versionã€‚ä½† clean version ä¹‹åçš„å´ä¸ä¼šè¢«åˆ é™¤ï¼</strong></p>\n<p>å°†åƒå›¾ 3 æ‰€ç¤ºï¼ŒV1 è¢«ç¡®è®¤ä¸º clean versionï¼Œå®ƒä¼šåˆ é™¤ V0ï¼ˆå¦‚æœæœ‰ V0 çš„è¯ï¼‰ï¼Œè€Œä¸ä¼šåˆ é™¤ V2ã€‚</p>\n<p>é€šè¿‡è¿™æ ·çš„æœºåˆ¶å°±å¯ä»¥è®©æ¯ä¸€ä¸ª replicas æ‰¿æ‹… readï¼Œå¹¶ä¸”è¿˜ä¿è¯äº†<strong>å¼ºä¸€è‡´æ€§</strong>ã€‚</p>\n<h3 id=\"scaling-craq\"><a class=\"anchor\" href=\"#scaling-craq\">#</a> Scaling CRAQ</h3>\n<p>è¿™ä¸€å—æœ‰ç‚¹æ¨¡ç³Šï¼Œå¤§è‡´æ˜¯çœ‹æ‡‚äº†ã€‚ã€‚ã€‚</p>\n<p>ä¸€ä¸ª object çš„ identifier æœ‰ä¸¤ä¸ªç»„æˆ</p>\n<p><code>chain identifier</code> ï¼šå†³å®šæœ‰å“ªäº›èŠ‚ç‚¹ä¼šæ„æˆè¿™æ¡é“¾</p>\n<p><code>key identifier</code> ï¼šå†³å®šè¿™ä¸ª object åœ¨è¿™æ¡é“¾ä¸­çš„å”¯ä¸€æ ‡è¯†</p>\n<h4 id=\"é“¾æ”¾ç½®ç­–ç•¥\"><a class=\"anchor\" href=\"#é“¾æ”¾ç½®ç­–ç•¥\">#</a> é“¾æ”¾ç½®ç­–ç•¥</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220307122506089.png\" alt=\"image-20220307122506089\" /></p>\n<p>ç¬¬ä¸€ç§ï¼šæŒ‡å®šç¡®å®šæ•°é‡çš„ num_datacenters å°†ä¼šæ„æˆé“¾ï¼Œæ€»å…±æœ‰ chain_size çš„é“¾ï¼Œä½¿ç”¨ä¸€è‡´æ€§ hash æ¥å†³å®š datacenter identifierã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220307122714827.png\" alt=\"image-20220307122714827\" /></p>\n<p>ç¬¬äºŒç§ï¼šé“¾çš„å¤´éƒ¨æ˜¯ dc1ï¼Œé“¾çš„å°¾éƒ¨æ˜¯ dcNã€‚ä¸¥æ ¼æŒ‰ç…§è¿™ä¸ªé¡ºåºå®šä¹‰é“¾ã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220307122908296.png\" alt=\"image-20220307122908296\" /></p>\n<p>ç¬¬äºŒç§ï¼šè™½ç„¶é“¾çš„é¡ºåºå®šä¹‰äº†ï¼Œä½†æ˜¯æ¯ä¸ª datacenter èƒ½æ”¾ç½®çš„é“¾æ•°é‡ä¹Ÿæ˜¯é™å®šçš„ã€‚</p>\n<h4 id=\"craq-within-a-datacenter\"><a class=\"anchor\" href=\"#craq-within-a-datacenter\">#</a> CRAQ within a Datacenter</h4>\n<p>ä¸€ä¸ª datacenter ä¸­å¦‚ä½•é€‰æ‹©æˆ–è€…è¯´å¤„ç†å¤šä¸ªé“¾é€šè¿‡è¯¥ datacenterã€‚è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>\n<ul>\n<li>ä¸€è‡´æ€§ hashã€‚</li>\n<li>ç±»ä¼¼äº GFS çš„ membership managementã€‚</li>\n</ul>\n<h4 id=\"craq-across-multiple-datacenters\"><a class=\"anchor\" href=\"#craq-across-multiple-datacenters\">#</a> CRAQ Across Multiple Datacenters</h4>\n<blockquote>\n<p>CRAQâ€™s ability to read from any node improves its latency when chains stretch across the wide-area.</p>\n</blockquote>\n<p>CRAQ èƒ½å¤Ÿæ˜¾è‘—é™ä½å»¶è¿Ÿï¼Œå½“ CRAO across wide areaã€‚</p>\n<h3 id=\"åé¢éƒ¨åˆ†å¾…ç»­\"><a class=\"anchor\" href=\"#åé¢éƒ¨åˆ†å¾…ç»­\">#</a> åé¢éƒ¨åˆ†å¾…ç»­</h3>\n<h3 id=\"å¬è¯¾\"><a class=\"anchor\" href=\"#å¬è¯¾\">#</a> å¬è¯¾</h3>\n",
            "tags": [
                "åˆ†å¸ƒå¼"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-zookeeper/",
            "url": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-zookeeper/",
            "title": "MIT6.824: ZooKeeper: Wait-free coordination for Internet-scale systems",
            "date_published": "2022-03-05T02:13:48.000Z",
            "content_html": "<h3 id=\"lock-free-wait-free-ä»¥åŠ-cas\"><a class=\"anchor\" href=\"#lock-free-wait-free-ä»¥åŠ-cas\">#</a> lock-free wait-free ä»¥åŠ CAS</h3>\n<p>è¯»è¿™ç¯‡æ–‡ç« éœ€è¦ä¸€ç‚¹å…³äº wait-freeã€lock-free å’Œ CAS çš„å‰ç½®çŸ¥è¯†ã€‚</p>\n<p>çŸ¥ä¹æœ‰ä¸€ç¯‡æ–‡ç« å†™äº†å…³äº wait-free å’Œ lock-free çš„ç†è§£ï¼šå¯¹ wait-free å’Œ lock-free çš„ç†è§£ - æˆ‘çš„çŒªçŒªå‘¢çš„æ–‡ç«  - çŸ¥ä¹ <span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNDI5MjEzMjM=\">https://zhuanlan.zhihu.com/p/342921323</span></p>\n<p>å¯¹äºæœ‰é”ç®—æ³•ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220305122831221.png\" alt=\"image-20220305122831221\" /></p>\n<p>å¯ä»¥çœ‹åˆ°åœ¨ <code>slip3</code>  æ²¡æœ‰ä»»ä½•çº¿ç¨‹ <code>MakeProgress</code> ã€‚è¿™å°±æ˜¯å› ä¸º T2 åœ¨ slip2 åŠ äº†é”ï¼Œç„¶åå¯èƒ½å› ä¸º IO æ“ä½œï¼Œå®ƒåœ¨ slips ä¸å†å ç”¨ CPUï¼Œä½†ç”±äºæ“ä½œè¿˜æ²¡æœ‰å®Œæˆï¼Œå› æ­¤ T2 å¹¶æ²¡æœ‰é‡Šæ”¾é”ï¼Œå¯¼è‡´ T1 å’Œ T3 åœ¨ slip3 æ²¡æœ‰ç”³è¯·åˆ°é”ä¹Ÿå°±æ²¡æœ‰æ‰§è¡Œã€‚</p>\n<p>lock-freeï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220305123155562.png\" alt=\"image-20220305123155562\" /></p>\n<p>å¯ä»¥ä¿è¯æ¯ä¸ª slip éƒ½èƒ½æœ‰çº¿ç¨‹ MakeProgressã€‚è¿™ä¸ªæ€ä¹ˆå®ç°å‘¢ï¼Ÿå¯ä»¥é€šè¿‡ CASï¼ˆCompare And Swapï¼‰ã€‚</p>\n<p>CAS æœ‰ä¸‰ä¸ªæ“ä½œå‚æ•°ï¼š</p>\n<ol>\n<li>å†…å­˜ä½ç½® V</li>\n<li>ä¸Šä¸€æ¬¡ä»å†…å­˜ä¸­è¯»åˆ°çš„å€¼ A</li>\n<li>æ–°çš„å€¼ B</li>\n</ol>\n<p>CAS çš„æ“ä½œè¿‡ç¨‹ï¼šå°†å†…å­˜ä½ç½® V çš„å€¼ä¸ A è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸ç­‰è¯´æ˜æ²¡æœ‰å…¶ä»–çº¿ç¨‹æ¥ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œäºæ˜¯æŠŠå†…å­˜ V çš„å€¼æ›´æ–°ä¸º Bï¼ˆswapï¼‰ï¼Œå¦‚æœä¸ç›¸ç­‰ï¼Œè¯´æ˜ V ä¸Šçš„å€¼è¢«ä¿®æ”¹è¿‡äº†ã€‚äºæ˜¯ç¨‹åºå›åˆ°å¼€å§‹ï¼Œç»§ç»­æ‰§è¡Œæ¯”è¾ƒç½®æ¢æ“ä½œã€‚ç›´åˆ°æˆåŠŸç»“æŸ loopã€‚å› æ­¤ä»»æ„æ—¶é—´å†…ï¼Œæ€»æœ‰è¿›ç¨‹èƒ½å¤Ÿ MakeProgressï¼Œè€Œä¸”æ—¶é—´è¶³å¤Ÿé•¿çš„è¯æ‰€æœ‰è¿›ç¨‹éƒ½èƒ½æ‰§è¡Œå®Œã€‚</p>\n<p>è€Œ wait-free èƒ½æä¾›æ›´é«˜çš„ä¿è¯ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220305150003064.png\" alt=\"image-20220305150003064\" /></p>\n<p>ä»»æ„çš„ä¸€ä¸ª slip ä¸‹ï¼Œæ¯æ¡çº¿ç¨‹éƒ½èƒ½å¤Ÿ MakeProgressã€‚</p>\n<p>Wait-free è¢«å®šä¹‰ä¸ºç®—æ³•åœ¨å®Œæˆæœ€ç»ˆç›®æ ‡ä¹‹å‰ï¼Œæ¯ä¸€ä¸ªæ“ä½œéƒ½èƒ½åœ¨æœ‰é™æ­¥å†…å®ç°ã€‚è¿™é‡Œçš„ç¬¬ä¸€ä¸ª operation å¯ä»¥ç†è§£ä¸ºæœ¬æ–‡çš„ Make Progressï¼Œstep å¯ä»¥ç†è§£ä¸º Slipï¼Œå½“çº¿ç¨‹çš„æ¯ä¸€ä¸ª Slip éƒ½åœ¨ Make Progress æ—¶ï¼Œé‚£ä¹ˆé’ˆå¯¹ä¸€ä¸ªç‰¹å®šçš„ç®—æ³•å°±ä¸€å®šèƒ½åœ¨æœ‰é™ä¸ª Slip å†…å®Œæˆï¼Œè¿™æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚</p>\n<h3 id=\"ç®€ä»‹\"><a class=\"anchor\" href=\"#ç®€ä»‹\">#</a> ç®€ä»‹</h3>\n<blockquote>\n<p>Zookeeperï¼Œa service for coordinating processes of distributed applications.</p>\n</blockquote>\n<p>è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªåè°ƒå¤„ç†åˆ†å¸ƒå¼ process çš„æœåŠ¡ã€‚</p>\n<h3 id=\"the-zookeeper-service\"><a class=\"anchor\" href=\"#the-zookeeper-service\">#</a> The ZooKeeper service</h3>\n<h4 id=\"znode\"><a class=\"anchor\" href=\"#znode\">#</a> Znode</h4>\n<p>znode å°±ç±»ä¼¼ä¸æ–‡ä»¶ç³»ç»Ÿï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ª zondeï¼Œæ¯ä¸ª znode èƒ½å¯èƒ½æœ‰ parent æˆ–è€… childrenã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220305151252501.png\" alt=\"image-20220305151252501\" /></p>\n<h4 id=\"watch\"><a class=\"anchor\" href=\"#watch\">#</a> watch</h4>\n<p>å½“ client issue ä¸€ä¸ª watch flag ç»™ä¸€ä¸ªè¯»æ“ä½œã€‚é‚£ä¹ˆå½“è¿™ä¸ªè¯»å–çš„ä¿¡æ¯å‘ç”Ÿäº†æ”¹å˜çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ watch ç»™è¿™ä¸ª client å‘é€ä¸€ä¸ª notificationã€‚å› ä¸ºæˆ‘ä»¬å¹¶ä¸éœ€è¦å‘ŠçŸ¥ clientï¼Œè€Œåªè¦å‘ŠçŸ¥å‘ç”Ÿäº† change è¿™ä¸ªäº‹å®ï¼Œå› æ­¤åœ¨ä¸€ä¸ªæ—¶é—´æ®µ change äº†ä»€ä¹ˆï¼Œå‘ç”Ÿäº†å‡ æ¬¡ change éƒ½ä¸éœ€è¦è€ƒè™‘ã€‚</p>\n<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œwatch æ“ä½œæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œæ‰§è¡Œå®Œé€šçŸ¥ watch å°±ç»“æŸäº†ï¼Œclient çš„ä¸‹ä¸€æ¬¡è¯»å¯ä»¥æ¥ç€åŠ ä¸Šä¸€ä¸ª watch flagã€‚</p>\n<p>åŒæ—¶ï¼Œå¦‚æœå½“å‰ replicas å®•æœºäº†ï¼Œclient ä¼šè½¬å‘å¦ä¸€ä¸ª replicasï¼Œä¹‹å‰æ‰€æœ‰æ³¨å†Œçš„ watch éƒ½å¤±æ•ˆï¼Œå› ä¸º watch table ä¸¢å¤±äº†ã€‚</p>\n<p>è¿™é‡Œæœ‰ä¸€ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº† zookeeper çš„ watchï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sdnFpdXNoaS5naXRodWIuaW8vMjAyMC8wMS8yMi96b29rZWVwZXItMi8=\">https://lvqiushi.github.io/2020/01/22/zookeeper-2/</span></p>\n<p>è¿™å¼ å›¾ä¹Ÿå†™çš„å¾ˆå¥½ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/pictureszk-watch-eventType.png\" alt=\"watch-eventType\" /></p>\n<p>å½“é None äº‹ä»¶å‡ºç°æ—¶å°±ä¼šè§¦å‘ watchï¼Œå¹¶ä¸” watch ä¼šå¤±æ•ˆã€‚</p>\n<h4 id=\"zookeeper-guarantees\"><a class=\"anchor\" href=\"#zookeeper-guarantees\">#</a> ZooKeeper guarantees</h4>\n<p>zookeeper æœ‰ä¸¤ä¸ªåŸºæœ¬çš„ ordering guaranteeï¼š</p>\n<p><code>Linearizable write</code> ï¼šzookeeper ä¿è¯æ‰€æœ‰å…³äº updateï¼ˆä¹Ÿå°±æ˜¯å†™ï¼‰çš„ request éƒ½æ˜¯ serializabelã€‚ï¼ˆæ³¨æ„å®ƒå¹¶ä¸åŒ…æ‹¬è¯»ï¼‰</p>\n<p><code>FIFO client order</code> ï¼šæ¥è‡ªä¸€ä¸ª client æ‰€æœ‰çš„ request æ‰§è¡Œé¡ºåºéµä» client å‘é€è¿™äº› request çš„é¡ºåºï¼Œä¹Ÿå°±æ˜¯ FIFOã€‚</p>\n<h4 id=\"å…³äºconfiguration\"><a class=\"anchor\" href=\"#å…³äºconfiguration\">#</a> å…³äº configuration</h4>\n<p>zookeeper ä½¿ç”¨ leader/worker æœºåˆ¶ï¼Œè¿™å°±æ„å‘³ç€å½“ leader æ”¹å˜çš„æ—¶å€™ï¼Œæœ‰å¤§é‡çš„ configuration å‚æ•°ä¹Ÿéœ€è¦æ”¹å˜ã€‚ä½†æ˜¯å¿…é¡»æ»¡è¶³ï¼š</p>\n<ul>\n<li>å½“ leader å¼€å§‹å¯¹ configuration make changeï¼Œå…¶ä»– processes ä¸åº”è¯¥ä½¿ç”¨è¿™äº›å·²ç»æ”¹å˜çš„ configurationã€‚</li>\n<li>å¦‚æœ leader åœ¨ configuration æ•´ä¸ª update å®Œäº†ä¹‹å‰å°± dead äº†ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è¿™ä¸ª partial configuration è¢«ä½¿ç”¨ã€‚</li>\n</ul>\n<p>å¯¹äºç¬¬ä¸€ä¸ªè¦æ±‚ï¼Œå¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥æ§åˆ¶ï¼Œå³ leader å†™çš„æ—¶å€™å…¶ä»– worker ä¸åº”è¯¥è¯»ã€‚ä½†æ˜¯åˆ†å¸ƒå¼é”å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œæ‰€ä»¥ zookeeper æå‡ºäº†ä¸€ä¸ª <code>ready znode</code>  æœºåˆ¶ã€‚</p>\n<p>leader ä¼šåˆ›å»ºä¸€ä¸ª <code>ready</code>  znodeï¼Œå¹¶ä¸”å…¶ä»– process éƒ½åªèƒ½é€šè¿‡è¯»è¿™ä¸ª znode æ¥æ›´æ–° configurationã€‚å¦‚æœè¿™ä¸ª leader éœ€è¦æ›´æ–° configurationï¼Œå°±æŠŠ <code>ready</code>  åˆ é™¤ã€æ›´æ–°æ•°æ®å¹¶ä¸”åˆ›å»º readyã€‚éœ€è¦æ³¨æ„çš„ ready å¹¶ä¸æ˜¯åªæœ‰ä¸€ä¸ªï¼Œè®ºæ–‡ä¸­æåˆ°å¯èƒ½éœ€è¦ update 5000 ä¸ªä¸åŒçš„ znodeã€‚</p>\n<p>ä½†æ˜¯è®ºæ–‡ä¸­ä¹Ÿæåˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸€ä¸ª client è¯»åˆ°äº† ready existï¼Œä½†æ˜¯ new leader åœ¨æ­¤ä¹‹åå¯¹ ready è¿›è¡Œäº† changeï¼Œé‚£ä¹ˆ client å°±ä¼šåœ¨ change in progress æ—¶å€™è¯»åˆ°æ•°æ®ã€‚</p>\n<p>è§£å†³åŠæ³•ï¼šè®¾ç½® watch flagã€‚zookeeper å¯ä»¥ä¿è¯åœ¨ make change ä¹‹åï¼Œåœ¨ client è¯»åˆ°æ–°çš„æ•°æ®ä¹‹å‰ä¸€å®šèƒ½å¤Ÿæ”¶åˆ° notificationã€‚</p>\n<h4 id=\"sync\"><a class=\"anchor\" href=\"#sync\">#</a> Sync</h4>\n<p>sync ç±»ä¼¼äº Flush å‘½ä»¤ï¼Œæ³¨æ„ ZooKeeper guaranteesï¼Œzookeeper ä¿è¯ orderã€‚åœ¨åæ–‡é‡Œæœ‰å†™è¿™ä¸ª read order æŒ‡çš„ä¸åªæ˜¯æ‰§è¡Œé¡ºåº FIFOï¼Œè¿˜è¦æœ‰ä¸èƒ½å›å¤´è¯»çš„æ„æ€ã€‚</p>\n<p>sync åšçš„å°±æ˜¯æŠŠ read å‘½ä»¤å…ˆæŒ‚èµ·ï¼Œç„¶å replicas å‘ leader æ‹‰å–æ–°çš„æ•°æ®ï¼Œæ³¨æ„è¿™ä¸ªæ–°æ•°æ®å¹¶ä¸æŒ‡çš„å®Œå…¨æ–°ï¼Œåªæ˜¯åˆ° read éœ€è¦çš„é‚£ä¸ª point å°±è¡Œäº†ã€‚</p>\n<h4 id=\"examples-of-primitives\"><a class=\"anchor\" href=\"#examples-of-primitives\">#</a> Examples of primitives</h4>\n<h5 id=\"configuration-management\"><a class=\"anchor\" href=\"#configuration-management\">#</a> Configuration Management</h5>\n<p>Zookeeper éœ€è¦ä½¿ç”¨åˆ°åŠ¨æ€çš„ configurationï¼Œä½†æ˜¯å®ƒå®ç°è¿™ä¸ªçš„æ–¹å¼çŸ¥è¯†å°† config å­˜åœ¨åœ¨ä¸€ä¸ª znode ä¸­ï¼Œ<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>c</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ã€‚processes å¯åŠ¨åä¼šè¯»å– <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>c</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> è·å¾—é…ç½®ï¼Œå¹¶ä¸”è®¾ç½® watch flagã€‚å½“ configuration ä¿®æ”¹ä¹‹åï¼Œprocess å¯ä»¥è·å¾— notification å¹¶ä¸”è¯»å–æœ€æ–°çš„ configurationã€‚</p>\n<h5 id=\"rendezvous\"><a class=\"anchor\" href=\"#rendezvous\">#</a> Rendezvous</h5>\n<p>æœ‰æ—¶å€™ï¼Œclient éœ€è¦å¯åŠ¨ä¸€ä¸ª master process å’Œä¸€äº› worker processï¼Œä½†æ˜¯è¿™ä¸ª starting processes æ˜¯è¢«è°ƒåº¦å™¨å®Œæˆçš„ï¼Œå› æ­¤ client å¹¶æ²¡æœ‰åŠæ³•é¢„å…ˆçŸ¥é“ master æš´éœ²çš„ç«¯å£å’Œåœ°å€ã€‚Zookeeper ä½¿ç”¨ä¸€ä¸ª Rendezvous znodeï¼Œ<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>r</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚master å¯åŠ¨ä¹‹åï¼Œä¼šæŠŠè‡ªå·±æä¾›æœåŠ¡çš„ç«¯å£å’Œåœ°å€å†™åˆ° <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>r</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ä¸­ã€‚worker å¯åŠ¨ä¹‹åå°±è¯»å–è¿™ä¸ª znodeï¼Œå¹¶ä¸”è®¾ç½® watch flagã€‚</p>\n<h5 id=\"group-membership\"><a class=\"anchor\" href=\"#group-membership\">#</a> Group Membership</h5>\n<p>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸ºä¸€ä¸ª group è®¾ç½®ä¸€ä¸ª znodeï¼Œ<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>g</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span>ã€‚å½“è¿™ä¸ª group çš„ process å¯åŠ¨æ—¶ï¼Œå°±ä¼šåœ¨è¿™ä¸ª <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>g</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> ä¸‹åˆ›å»ºå­ znodeã€‚è¿™äº› znode æ˜¯ ephemeral nodeï¼Œå¦‚æœ client fail æˆ–è€… session å…³é—­åï¼Œzookeeper ä¼šè‡ªåŠ¨å›æ”¶ã€‚å› æ­¤ï¼Œè¦å¾—åˆ° group ä¿¡æ¯åªéœ€è¦çœ‹ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>g</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> çš„å­èŠ‚ç‚¹å°±è¡Œäº†ã€‚åŒæ—¶è¿˜å¯ä»¥è®¾ç½®ä¸€ä¸ª watch flagï¼Œå½“ group information change æ—¶å€™æ¥æ”¶é€šçŸ¥ã€‚</p>\n<h4 id=\"é”\"><a class=\"anchor\" href=\"#é”\">#</a> é”</h4>\n<h5 id=\"ç®€å•é”\"><a class=\"anchor\" href=\"#ç®€å•é”\">#</a> ç®€å•é”</h5>\n<p>æœ€ç®€å•çš„å®ç°é”çš„æ–¹å¼å°±æ˜¯åˆ›å»ºä¸€ä¸ª ephemeral znodeã€‚å¦‚æœ client åˆ›å»ºè¯¥æ–‡ä»¶æˆåŠŸå°±æ„å‘³ç€è·å¾—é”ï¼Œå¦‚æœåˆ é™¤è¯¥æ–‡ä»¶å°±æ„å‘³ç€é‡Šæ”¾é”ã€‚ä½†æ˜¯è¿™å°±ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæœ‰å¾ˆå¤šç”¨æˆ·åŒæ—¶åœ¨ç”³è¯·é”ï¼Œé‚£å°±æ— æ³•æ»¡è¶³æŒ‰ç”³è¯·é¡ºåºè·å¾—é”ã€‚ï¼ˆHerd Effectï¼‰</p>\n<h5 id=\"simple-locks-without-herd-effect\"><a class=\"anchor\" href=\"#simple-locks-without-herd-effect\">#</a> Simple Locks without Herd Effect</h5>\n<p>å®ƒçš„å®ç°æ–¹å¼å¾ˆå·§å¦™ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220305205542785.png\" alt=\"image-20220305205542785\" /></p>\n<ol>\n<li>ç”³è¯·é”æ—¶ï¼Œå…ˆåˆ›å»º <code>znode l</code>  ä¸‹çš„å­ znodeã€‚å¹¶ä¸”è®¾ç½® Sequential å’Œ ephemeralã€‚</li>\n<li>è·å– <code>znode l</code>  çš„æ‰€æœ‰ childrenã€‚</li>\n<li>å¦‚æœ n æ˜¯ C ä¸­æœ€ä½çš„ znodeï¼Œé‚£ä¹ˆè·å¾—é”ã€‚</li>\n<li>æŸ¥çœ‹ n ä¹‹å‰çš„é‚£ä¸ª znode pã€‚</li>\n<li>å¦‚æœ p å­˜åœ¨é‚£ä¹ˆ waitï¼Œå¦åˆ™è·³è½¬åˆ° 2ã€‚</li>\n</ol>\n<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œæœ€åè·³è½¬æ˜¯è·³è½¬åˆ°æ­¥éª¤ 2ï¼Œå› ä¸º znode p å¯¹åº”çš„é‚£ä¸ª client å¦‚æœå…³é—­äº† sessionï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè‡ªåŠ¨å›æ”¶è¿™ä¸ª znode pã€‚ä¹Ÿå°±æ˜¯è¯´ znode p ä¸å­˜åœ¨å¹¶ä¸æ„å‘³è¿™ p åˆšåˆšé‡Šæ”¾äº†é”ã€‚</p>\n<h4 id=\"readwrite-locks\"><a class=\"anchor\" href=\"#readwrite-locks\">#</a> Read/Write Locks</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220305210202530.png\" alt=\"image-20220305210202530\" /></p>\n<p>çœ‹å›¾è¯´è¯ç½¢äº†ã€‚</p>\n<h3 id=\"zookeeper-implementation\"><a class=\"anchor\" href=\"#zookeeper-implementation\">#</a> ZooKeeper Implementation</h3>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220305155146341.png\" alt=\"image-20220305155146341\" /></p>\n<p>è¿™å—å†…å®¹æ²¡æ€ä¹ˆçœ‹æ‡‚ã€‚ã€‚ã€‚ä½†æ˜¯è¿™ä¸ª<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mi>x</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">zxid</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">d</span></span></span></span> å¬è¯¾çš„æ—¶å€™å¤§è‡´å¬æ‡‚äº†ï¼Œè¿™ä¸ª<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mi>x</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">zxid</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">d</span></span></span></span> å°±æ˜¯ä¸ºäº†é˜²æ­¢å‡ºç° read back æ“ä½œã€‚</p>\n<p>æ¯ä¸€ä¸ª read æ“ä½œéƒ½åœ¨ä¸€ä¸ª<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mi>x</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">zxid</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">d</span></span></span></span> ä¸Šè¿›è¡Œï¼Œ<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mi>x</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">zxid</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">d</span></span></span></span> åªèƒ½éšç€è¯»æ“ä½œå¢å¤§ï¼Œå½“åˆ‡æ¢ replicas çš„æ—¶å€™ï¼Œread æ“ä½œä¹Ÿè¦åœ¨ç›¸åŒçš„<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mi>x</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">zxid</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">d</span></span></span></span> ä¸Šè¿›è¡Œã€‚</p>\n<h3 id=\"å¬è¯¾\"><a class=\"anchor\" href=\"#å¬è¯¾\">#</a> å¬è¯¾</h3>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220305173809911.png\" alt=\"image-20220305173809911\" /></p>\n<p>zookeeper å¹¶æ²¡æœ‰å®ç°çº¿æ€§ä¸€è‡´æ€§ï¼Œå®ƒå…è®¸è¯»åˆ° stale dataã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220307102215737.png\" alt=\"image-20220307102215737\" /></p>\n<p>zookeeper å®ç° mini-transactionï¼š</p>\n<p><code>data, v = GETDATA(p, watch)</code></p>\n<p><code>SETDATA(p, data+1, v)</code></p>\n<p>zookeeper é€šè¿‡ getdata ä¼šè¿”å›å½“å‰ data çš„ versionï¼Œsetdata å¦‚æœ replicas ä¸­ dataversion ä¸€è‡´æ‰èƒ½ setdataã€‚</p>\n<p>è¿™å°±å®ç°äº†ä¸€ä¸ª mini-transaction</p>\n",
            "tags": [
                "åˆ†å¸ƒå¼",
                "MIT6.824"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/grimoireLab-%E5%B9%B3%E5%8F%B0%E7%AE%A1%E7%90%86%E7%BB%84%E4%BB%B6/",
            "url": "https://songlinlife.top/2022/grimoireLab-%E5%B9%B3%E5%8F%B0%E7%AE%A1%E7%90%86%E7%BB%84%E4%BB%B6/",
            "title": "grimoireLab: å¹³å°ç®¡ç†ç»„ä»¶",
            "date_published": "2022-02-27T12:18:08.000Z",
            "content_html": "<h3 id=\"mordred\"><a class=\"anchor\" href=\"#mordred\">#</a> Mordred</h3>\n<blockquote>\n<p>SirMordred is the tool used to coordinate the execution of the GrimoireLab platform, via two main configuration files, the  <code>setup.cfg</code>  and  <code>projects.json</code> , which are summarized in their corresponding sections.</p>\n</blockquote>\n<p>ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå·¥å…·æ˜¯ç®¡ç†å¹³å°ç”¨çš„ã€‚ä¸»è¦çš„é…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ª <code>Setup.cfg</code>  å’Œ <code>Projects.json</code> ã€‚</p>\n<h4 id=\"setupcfg\"><a class=\"anchor\" href=\"#setupcfg\">#</a> Setup.cfg</h4>\n<p>è¿™ä¸ªé…ç½®æ–‡ä»¶ç”¨äºç®¡ç† <code>GrimoireLab</code>  çš„ processesã€‚æ¯”å¦‚è®¾ç½® log æ—¥å¿—æ”¾åœ¨å“ªï¼ŒSortingHat å’Œ ElasticSearch æ€ä¹ˆè®¿é—®ï¼Œä¹Ÿå¯ä»¥è®¾ç½® Perceval çš„è®¿é—®ä»¤ç‰Œã€‚</p>\n<h4 id=\"projectsjson\"><a class=\"anchor\" href=\"#projectsjson\">#</a> Projects.json</h4>\n<blockquote>\n<p>The projects.json aims at describing the repositories grouped by a project that will be shown on the dashboards.</p>\n</blockquote>\n<p>ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªé…ç½®æ–‡ä»¶ç”¨äºé…ç½® repos æ˜¯å¦‚ä½•è¢« grouped by a project ç„¶ååœ¨ dashboard ä¸Šæ˜¾ç¤ºçš„ã€‚</p>\n<h3 id=\"grimoirelab-toolkit\"><a class=\"anchor\" href=\"#grimoirelab-toolkit\">#</a> grimoirelab-toolkit</h3>\n<p>grimoirelab projects ç»å¸¸ç”¨åˆ°çš„åŒ…ï¼Œæ¯”å¦‚å¤„ç†æ—¥æœŸçš„å‡½æ•°ã€‚</p>\n<h3 id=\"grimoirelab-bestiary\"><a class=\"anchor\" href=\"#grimoirelab-bestiary\">#</a> grimoirelab-bestiary</h3>\n<blockquote>\n<p>A tool to visually manage software development ecosystems description.</p>\n</blockquote>\n<p>ç”¨äºç›´è§‚æè¿°è½¯ä»¶å¼€å‘ç”Ÿæ€çš„å·¥å…·ã€‚</p>\n<h3 id=\"hatstall\"><a class=\"anchor\" href=\"#hatstall\">#</a> Hatstall</h3>\n<blockquote>\n<p>Hatstall is a web interface for <span class=\"exturl\" data-url=\"aHR0cDovL2dpdGh1Yi5jb20vZ3JpbW9pcmVsYWIvc29ydGluZ2hhdA==\">SortingHat</span> databases developed mainly with <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZGphbmdvcHJvamVjdC5jb20v\">Django</span></p>\n</blockquote>\n<p>å°±æ˜¯ SortingHat çš„ Web æ¥å£ã€‚</p>\n<p>SortingHat åšçš„å·¥ä½œï¼š</p>\n<ul>\n<li>they might be using several usernames in the same data source (i.e. different emails for git commits)</li>\n<li>to get a whole view, you need to take into account their contribution in different data sources (git, issues, chats, etc.). You need to merge multiple usernames under a single unique identity</li>\n<li>they might be working for several organizations during project life</li>\n</ul>\n<p>è€Œ Hatstall å°±æ˜¯å¤„ç† multi-identites æ›´ç®€å•çš„å·¥å…·ã€‚</p>\n",
            "tags": [
                "xlab"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/grimoireLab-%E6%95%B0%E6%8D%AE%E6%B6%88%E8%B4%B9%E7%BB%84%E4%BB%B6/",
            "url": "https://songlinlife.top/2022/grimoireLab-%E6%95%B0%E6%8D%AE%E6%B6%88%E8%B4%B9%E7%BB%84%E4%BB%B6/",
            "title": "grimoireLab: æ•°æ®æ¶ˆè´¹ç»„ä»¶",
            "date_published": "2022-02-27T11:26:10.000Z",
            "content_html": "<h3 id=\"kibiter\"><a class=\"anchor\" href=\"#kibiter\">#</a> Kibiter</h3>\n<p><code>Kibiter</code>  å°±æ˜¯<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWxhc3RpYy5jby9jbi9raWJhbmEv\"> Kibana</span> çš„å®šåˆ¶åŒ– forkã€‚</p>\n<p>ä¸‹å›¾ä¸º kibanaï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220227192947022.png\" alt=\"image-20220227192947022\" /></p>\n<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªä»ªè¡¨ç›˜ã€‚ã€‚ã€‚</p>\n<h4 id=\"åŠŸèƒ½\"><a class=\"anchor\" href=\"#åŠŸèƒ½\">#</a> åŠŸèƒ½</h4>\n<h5 id=\"é¢æ¿èœå•\"><a class=\"anchor\" href=\"#é¢æ¿èœå•\">#</a> é¢æ¿èœå•</h5>\n<p><img data-src=\"https://camo.githubusercontent.com/5719bb8ee2bd3caadb0293bc6c2a4e56c8571ec10dc173b2886d548b32614281/68747470733a2f2f692e696d6775722e636f6d2f36684f346145562e706e67\" alt=\"img\" /></p>\n<h5 id=\"new-visualization-plugins\"><a class=\"anchor\" href=\"#new-visualization-plugins\">#</a> New visualization plugins</h5>\n<p><code>Kibiter</code>  é»˜è®¤å®‰è£…äº†ä¸€äº›å¯è§†åŒ–æ’ä»¶ï¼Œæ¯”å¦‚ Network pluginï¼Œå…è®¸ç”¨æˆ·é€šè¿‡å›¾æ–¹å¼æŸ¥çœ‹æ•°æ®ã€‚</p>\n<h3 id=\"sigils\"><a class=\"anchor\" href=\"#sigils\">#</a> sigils</h3>\n<p>è¿™ä¸ªå°±æ˜¯ä¸€ä¸ª Json æ–‡ä»¶å¤¹ï¼ŒåŒ…å«äº†æ‰€æœ‰å…³äº kibana dashboard çš„ä¿¡æ¯ã€‚</p>\n<ul>\n<li>Original indexes where the information come from.</li>\n<li>Searches on those indexes that provide a sub-set of the information.</li>\n<li>Widgets either built on top of the original indexes or on top of the searches.</li>\n<li>Final panels that are an aggregation of several widgets.</li>\n</ul>\n<p>è¿™å°±è¯´å°±æ˜¯å…³äº Dash Board çš„é…ç½®ã€‚</p>\n<h3 id=\"kidash\"><a class=\"anchor\" href=\"#kidash\">#</a> Kidash</h3>\n<p>è¿™ä¸ªå°±æ˜¯ç®¡ç† Kibana-related dashboards çš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p>\n<h3 id=\"manuscripts\"><a class=\"anchor\" href=\"#manuscripts\">#</a> Manuscripts</h3>\n<p>è¿™ä¸ªç»„ä»¶ç”¨äºè‡ªåŠ¨ç”Ÿæˆ enrich æ•°æ®çš„ Reportã€‚</p>\n",
            "tags": [
                "xlab"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/grimoireLab-%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E7%9B%B8%E5%85%B3%E7%BB%84%E4%BB%B6/",
            "url": "https://songlinlife.top/2022/grimoireLab-%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E7%9B%B8%E5%85%B3%E7%BB%84%E4%BB%B6/",
            "title": "grimoireLab: æ•°æ®å¢å¼ºç›¸å…³ç»„ä»¶",
            "date_published": "2022-02-27T09:39:07.000Z",
            "content_html": "<h3 id=\"grimoireelk\"><a class=\"anchor\" href=\"#grimoireelk\">#</a> GrimoireELK</h3>\n<p><code>GrimoireELK</code>  å°±æ˜¯ä¸€ä¸ªæ•°æ®å¢å¼ºç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶åŸºäº ElasticSearchã€‚è¿™ä¸ªç»„ä»¶çš„ä½œç”¨æœ‰ä¸¤ä¸ªã€‚</p>\n<ol>\n<li>å­˜å‚¨ <code>perceval</code>  è·å¾—çš„æ•°æ®ï¼Œè¿™æ ·å°±ä¸ç”¨åå¤æ‹‰å–ã€‚</li>\n<li>å¯¹åŸæ¥çš„æ•°æ®è¿›è¡ŒåŠ å·¥å’Œ enrichï¼Œä½¿å…¶èƒ½è¢« K ä» bit è€Œä½¿ç”¨ã€‚</li>\n</ol>\n<p>å…³äº raw æ•°æ®å’Œ enrich æ•°æ®å¯ä»¥ç›´æ¥æŸ¥çœ‹ https://github.com/chaoss/grimoirelab-elkï¼Œè¿™é‡Œä¸å¤šæè¿°ã€‚</p>\n<h3 id=\"ceres\"><a class=\"anchor\" href=\"#ceres\">#</a> Ceres</h3>\n<p><code>Ceres</code>  å°±æ˜¯ä¸€ä¸ªæ•°æ®è§£æå·¥å…·ï¼Œä»–è´Ÿè´£è§£æä» <code>perceval</code>  è·å–å¾—åˆ°çš„æ•°æ®ã€‚</p>\n<p>å®ƒçš„å·¥ä½œé€»è¾‘å¦‚ä¸‹ï¼š</p>\n<h4 id=\"eventize\"><a class=\"anchor\" href=\"#eventize\">#</a> Eventize</h4>\n<p><code>perceval</code>  ä¼šäº§ç”Ÿ JSON æ ¼å¼çš„æ•°æ®ï¼Œè€Œ ceres åšçš„å°±æ˜¯ <code>split</code> ã€‚é€šè¿‡ <code>eventizing</code> ï¼Œceres å°† json æ–‡ä»¶è¾¨æä¸º Pandas çš„ DataFrame æ ¼å¼ã€‚ceres æœ‰ä¸¤ç§è§£æç¨‹åº¦ï¼Œè¿™ä¸ªåç»­å†çœ‹ã€‚</p>\n<h4 id=\"format\"><a class=\"anchor\" href=\"#format\">#</a> Format</h4>\n<p>format åŠŸèƒ½å°±æ˜¯æ ¼å¼è½¬æ¢ï¼Œæ¯”å¦‚å°†æ—¶é—´ä» string è½¬æ¢ä¸º Date æ ¼å¼ã€‚</p>\n<h4 id=\"filter\"><a class=\"anchor\" href=\"#filter\">#</a> Filter</h4>\n<p>filter å¯ä»¥ç”¨äºè¿‡æ»¤æŸä¸€è¡Œçš„ä¿¡æ¯ã€‚</p>\n<h4 id=\"data-enrich\"><a class=\"anchor\" href=\"#data-enrich\">#</a> Data Enrich</h4>\n<p>æ•°æ®å¢å¼ºï¼Œè™½ç„¶æˆ‘ä¸çŸ¥é“å®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„ã€‚</p>\n<h3 id=\"sorting-hat\"><a class=\"anchor\" href=\"#sorting-hat\">#</a> Sorting Hat</h3>\n<blockquote>\n<p>A tool to manage identities.</p>\n</blockquote>\n<p>è¿™æ˜¯ç®€ä»‹å¯¹äº Sorting Hat çš„æè¿°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯å¤„ç† identities çš„ã€‚ä½†æ˜¯ç®€ä»‹å¥½åƒæ²¡æœ‰è¯´è¿™ä¸ª identities åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå¥½åƒåªè¯´æœ‰å”¯ä¸€ uuidï¼Œå¯¹äºæ¯ä¸€ç‹¬ç‰¹çš„ identity å¯ä»¥å®šä¹‰ä¸€ä¸ª profileã€‚</p>\n<p>identity å¯ä»¥å¯¹åº”ä¸åŒæ—¶é—´æ®µçš„ä»å±å…³ç³»ã€‚</p>\n<p>Sorting Hat ä½¿ç”¨ Perceval çš„æ£€ç´¢æ•°æ®ï¼Œå¹¶æŠŠè·å¾—çš„ identities ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚</p>\n<p>è¿™ç©æ„çš„ç”¨æ³•æˆ‘è¿˜æ˜¯æ²¡æ€ä¹ˆææ‡‚ï¼Œidentites å’Œ profile åˆ°åº•æ€ä¹ˆæï¼Ÿ</p>\n",
            "tags": [
                "xlab"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-lab2-Raft/",
            "url": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-lab2-Raft/",
            "title": "MIT6.824: lab2 Raft",
            "date_published": "2022-02-26T03:38:28.000Z",
            "content_html": "<p>é¦–å…ˆæˆ‘æ˜¯è¯»äº†è®ºæ–‡ä¹‹åå†å†™è¿™ä¸ª lab çš„ï¼Œä½† raft è®ºæ–‡çš„å†…å®¹å¤ªå¤šäº†ï¼Œåªèƒ½æ…¢æ…¢ä¸€ç‚¹ç‚¹çœ‹ã€‚ç°åœ¨è¿˜æ˜¯å…ˆæŠŠ lab å®Œæˆã€‚</p>\n<p>å¼ºçƒˆå®‰åˆ©ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvbFViVkJWenZOVnhoZ2JjSFFCYmtrUQ==\">https://mp.weixin.qq.com/s/lUbVBVzvNVxhgbcHQBbkkQ</span></p>\n<p>å…ˆä¸Šå›¾</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220305162951465.png\" alt=\"image-20220305162951465\" /></p>\n<p>4 ä¸ªå°é¢˜å…¨éƒ¨é€šå…³ï¼Œå¹¶ä¸”å¹¶è¡Œæµ‹è¯• 1000 æ¬¡æ— å‡ºé”™ã€‚</p>\n<h3 id=\"part-2a\"><a class=\"anchor\" href=\"#part-2a\">#</a> Part 2A</h3>\n<p><strong>ä»»åŠ¡è¦æ±‚</strong>ï¼šå®ç°é€‰ä¸¾ç®—æ³•å’Œå¿ƒè·³åŒ…ã€‚å¦‚æœæ—§çš„ leader æ²¡æœ‰é—®é¢˜å°±è®©æ—§çš„ leader ç»§ç»­æ‰§è¡Œï¼Œå¦‚æœæ—§çš„ leader æœ‰é—®é¢˜é‚£ä¹ˆå°±é€‰ä¸¾æ–°çš„ leaderã€‚</p>\n<p>è¿™æ„å‘³ç€æˆ‘ä»¬ä¸ç”¨è®¾ç½® normal termï¼Œåªè¦è€ƒè™‘ leader fail è¿™ç§æƒ…å†µã€‚</p>\n<p><strong>ä»»åŠ¡æç¤º</strong>ï¼š</p>\n<ul>\n<li>å®Œæˆ <code>raft.go</code></li>\n<li>å®Œæˆ <code>RequestVote</code>   RPC</li>\n<li>å®ç° <code>AppendEntries</code>  RPC</li>\n<li>æ³¨æ„ä¸è¦å‘ç”ŸåŒæ—¶è¿›è¡Œé€‰ä¸¾çš„æƒ…å†µã€‚</li>\n<li>è¦æ±‚ leader å‘ç”Ÿå¿ƒè·³åŒ…æ¯ç§’ä¸è¶…è¿‡ 10 æ¬¡ã€‚</li>\n<li>è¦æ±‚æ—§çš„ leader fail 5 ç§’å†…å®Œæˆé€‰ä¸¾ã€‚</li>\n<li>å› ä¸º tester æ—…ç¨‹æ¯ç§’åªèƒ½å‘é€ 10 æ¬¡å¿ƒè·³ï¼Œæ‰€ä»¥ election timeout å¿…é¡»è¦å¤§äº paper é‡Œæè¿°çš„ 150-300ã€‚</li>\n</ul>\n<h3 id=\"part2b\"><a class=\"anchor\" href=\"#part2b\">#</a> Part2B</h3>\n<h4 id=\"33æ›´æ–°\"><a class=\"anchor\" href=\"#33æ›´æ–°\">#</a> 3.3 æ›´æ–°</h4>\n<p>æˆ‘çœŸçš„æƒ³å¹²æ­»ä»–å¦ˆäº†ï¼ŒæŠ˜è…¾äº†å¥½å‡ å¤©ç»ˆäºæ— ä¼¤æ‰“è¿‡ LAB2Bï¼Œè¿è¡Œ 100 æ¬¡ä¹Ÿæ²¡æœ‰å‡ºé”™ï¼Œè¿™é‡Œé¢çš„å‘ç‚¹çœŸçš„å¾ˆå¤šã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220303115450291.png\" alt=\"image-20220303115450291\" /></p>\n<p>é¦–å…ˆéœ€è¦æ˜ç¡® committed æ˜¯å¦‚ä½•è¢«ç¡®è®¤çš„ï¼š</p>\n<p>å¯¹äº leader æ¥è¯´ï¼š<strong>nextIndex -&gt; matchIndex -&gt; commitIndex -&gt; applyIndex</strong></p>\n<blockquote>\n<p>If there exists an N such that N &gt; commitIndex, a majority of matchIndex[i] â‰¥ N, and log[N].term == currentTerm:  set commitIndex = N</p>\n</blockquote>\n<p>åˆšå¼€å§‹æˆ‘ä¹Ÿæä¸æ‡‚è¿™ä¸ª <code>matchIndex</code>  æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œleader æ˜¯é€šè¿‡ check majority matchIndex å¹¶ä¸”å¦‚æœè¯¥ log entry å±äºå½“å‰ term å°±ç¡®è®¤ committedã€‚</p>\n<p>å¯¹äº follower: **preLogIndex -(åŒ¹é…æˆåŠŸ)&gt; len (logs) -compart with leadercommitted&gt; commitIndex -&gt; applyIndex **</p>\n<p><strong>commitIndex = min(len(logs) , leaderCommitted</strong></p>\n<p>å¯¹äº follower æ¥è¯´å¯ä»¥æ˜¯ leader å‘ŠçŸ¥ committedï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡ append log åè‡ªå·±ç¡®è®¤ï¼Œæ€»ä¹‹è¿™ä¸ªè¿‡ç¨‹é€»è¾‘è‡ªæ´½ã€‚</p>\n<p>ä½†æ˜¯è¿™ä¸ªæœ‰ä¸€ä¸ªå¾ˆä¸¥é‡çš„å‘ç‚¹ï¼Œä¼šå¯¼è‡´æ—¶ä¸æ—¶å‡ºç° <strong>index out of range</strong> è¿™ä¸ªé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å…¶å®æœ‰åœ¨ raft guide ä¸Šå†™æ˜ï¼Œä½†æ˜¯æˆ‘å½“æ—¶å¹¶æ²¡æœ‰çœ‹æ‡‚ï¼Œå¯¼è‡´æ‰§è¡Œ 100 æ¬¡æ€»æœ‰å‡ æ¬¡æŠ¥è¿™ä¸ª out of range é”™è¯¯ã€‚ã€‚ã€‚ã€‚</p>\n<p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› å°±æ˜¯ follower åº”ç”¨äº† stale AppendEntries PRCï¼Œç„¶åç»™ leader å‘é€äº† reply success = trueã€‚å› ä¸º leader ä¼šé‡å¤å‘é€ AppendEntries PRCï¼Œå¦‚æœæŸä¸ª AppendEntries PRC è¿”å› true åï¼Œleader å°±ä¼šæ‰§è¡Œï¼š<strong>nextIndex[server] += len(args.entries)</strong>ï¼Œè¿™å°±å¯¼è‡´æœ‰æ—¶å€™ leader ä¼šå°†ç›¸åŒçš„ AppendEntries PRC åº”ç”¨ä¸¤æ¬¡åï¼ŒnextIndex [server] += len (args.entries) ä¹Ÿæ‰§è¡Œä¸¤æ¬¡ã€‚æœ€åå¯¼è‡´ nextIndex [server] è¦è¶…è¿‡äº† log çš„é•¿åº¦ã€‚</p>\n<p>è§£å†³æ–¹æ³•ï¼š</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>last <span class=\"token operator\">:=</span> rf<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">[</span>args<span class=\"token punctuation\">.</span>PrevLogIndex<span class=\"token operator\">+</span><span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> <span class=\"token function\">len</span><span class=\"token punctuation\">(</span>rf<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// éš¾ç‚¹åœ¨äºå¦‚ä½•åˆ¤æ–­æ—§çš„ rpc</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token function\">len</span><span class=\"token punctuation\">(</span>last<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token function\">len</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">.</span>Entries<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">len</span><span class=\"token punctuation\">(</span>last<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// åˆ¤æ–­è¦ append çš„ log entries æ˜¯ä¸æ˜¯å·²ç» append ä¸Šäº†</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    flag <span class=\"token operator\">:=</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token operator\">:=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token function\">len</span><span class=\"token punctuation\">(</span>last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">if</span> last<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>TermNumber <span class=\"token operator\">!=</span> args<span class=\"token punctuation\">.</span>Entries<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>TermNumber <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            flag <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">if</span> flag <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        reply<span class=\"token punctuation\">.</span>XTerm <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">2</span> <span class=\"token comment\">// è¡¨ç¤ºè¿™ä¸ªæ˜¯è¿‡æ—¶çš„ rpc</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ä¸ªå¾ˆä¸¥é‡çš„å‘ç‚¹ï¼Œå°±æ˜¯é€‰ä¸¾è¶…æ—¶é‡ç½®ï¼Œå®ƒä¼šå¯¼è‡´<strong> rejoin of partitioned leader <em>...</em></strong> è¿™ä¸ªæµ‹è¯•æ—¶ä¸æ—¶å¤±è´¥ï¼Œè¿™æ˜¯å› ä¸ºé€‰ä¸¾ä¸å½“ï¼Œå¯¼è‡´ cluster æ²¡æœ‰åŠæ—¶é€‰ä¸¾å‡º leaderã€‚</p>\n<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä»€ä¹ˆæ—¶å€™æ‰ä¼šé‡ç½® election timeoutï¼š</p>\n<ul>\n<li>å½“ follower å‡çº§ä¸º candidate æ—¶ä¼šé‡ç½®ã€‚</li>\n<li>å½“ follower æŠ•å‡ºè‡ªå·±çš„ä¸€ç¥¨æ—¶ä¼šé‡ç½®ã€‚</li>\n<li>å½“ follower æ¥å—åˆ° leader çš„ appendEntries PRC æ—¶ä¼šé‡ç½®ã€‚</li>\n</ul>\n<p>ç¬¬ä¸€ç§æƒ…å†µå¾ˆç®€å•ï¼Œå°±æ˜¯å› ä¸ºè¶…æ—¶æ‰ä¼šå‡çº§ä¸º candidateï¼Œæ‰€ä»¥æˆä¸º candidate åå¿…é¡»é‡ç½®ã€‚</p>\n<p>ç¬¬äºŒæƒ…å†µæœ‰äº›å¤æ‚ï¼Œå¦‚æœä¸€ä¸ª leader æˆ–è€… candidate æ¥å—åˆ°ä¸€ä¸ª vote requestï¼Œå…¶ä¸­ rf.currentTerm &lt; args.Termã€‚è¿™è¯´æ˜è¯¥ leader æˆ–è€… candidate å·²ç» out of dateï¼Œå¿…é¡»å¼ºåˆ¶è½¬æ¢ä¸º followerï¼Œæ³¨æ„ï¼Œå¼ºåˆ¶è½¬æ¢ä¸º follower å¹¶ä¸ä»£è¡¨å®ƒå¯ä»¥é‡ç½®å®ƒè‡ªèº«çš„ election timeoutã€‚åªæœ‰æ»¡è¶³ä¸¥æ ¼é€‰ä¸¾è¦æ±‚ï¼ŒæŠŠè‡ªå·±çš„ç¥¨æŠ•å‡ºå»åæ‰å¯ä»¥é‡ç½®ã€‚follower åœ¨æ¯ä¸€ä¸ª Term æœ‰ä¸”åªæœ‰ä¸€å¼ é€‰ç¥¨ï¼ä½† server è¿›è¡Œ term æå‡åå°±å¯ä»¥åˆ†é…ä¸€å¼ æ–°é€‰ç¥¨ã€‚</p>\n<p>ç¬¬ä¸‰ç§æƒ…å†µå…¶å®å’Œç¬¬äºŒç§æƒ…å†µç±»ä¼¼ï¼ŒappendEntries PRC åªèƒ½ç”± leader å‘å‡ºï¼Œä¸€æ—¦å½“å‰ server ç¡®è®¤å…¶è‡ªèº«çš„ currentTerm &lt;= args.Term å°±ä¼šæŠŠé€‰ä¸¾æ—¶é—´é‡ç½®ã€‚</p>\n<p>åªè¦æ³¨æ„è¿™ä¸¤ä¸ªé—®é¢˜ï¼šæ—§ AppendEntries å’Œ election timeoutï¼Œå°±å¯ä»¥è½»æ¾ pass all test äº†ï¼</p>\n<h3 id=\"part-2c\"><a class=\"anchor\" href=\"#part-2c\">#</a> Part 2C</h3>\n<p>è¿™ä¸ª lab è¦æ±‚æˆ‘ä»¬å®ç° persistenceã€‚</p>\n<h4 id=\"33æ›´æ–°-2\"><a class=\"anchor\" href=\"#33æ›´æ–°-2\">#</a> 3.3 æ›´æ–°</h4>\n<p>æ— ä¼¤é€šå…³ï¼Œå°±å¾ˆ niceï¼</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220303191029815.png\" alt=\"image-20220303191029815\" /></p>\n<p>æ‰§è¡Œè¶…è¿‡ 100 æ¬¡ï¼Œä»ç„¶è¿™ä¹ˆåšæŒºï¼å¤ªä½©æœæˆ‘è‡ªå·±äº†ï¼Œå˜¿å˜¿ğŸ˜„</p>\n<p>è¿™ä¸ªåŸºæœ¬æ€è·¯å¾ˆç®€å•ï¼Œå°±æ˜¯å®ç° <code>persist</code> ï¼Œç„¶åæŠŠ <code>persist()</code>  æ’å…¥åˆ° persist state å˜æ¢çš„åœ°æ–¹ï¼Œé€šè¿‡ figure 2 ä¸éš¾çŸ¥é“ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220303172723928.png\" alt=\"image-20220303172723928\" /></p>\n<p>åªè¦è¿™ä¸‰ä¸ªå˜é‡æ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æ’å…¥ <code>persist</code> ã€‚</p>\n<p>ä½†æ˜¯è¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªå‘ç‚¹ï¼Œè¿™å°± appendEntries RPC ä¼šå› ä¸ºç½‘ç»œå‡ºé”™ï¼Œä¸‹é¢æˆ‘æ¥æè¿°ä¸€ä¸‹å‡ºé”™æƒ…å¢ƒï¼š</p>\n<p>é¦–å…ˆæ˜ç¡®ï¼Œå› ä¸ºæˆ‘ä»¬ä¼šä¸æ–­é‡å¤å‘ AppendEntries RPCï¼Œè¿™å°±å¯¼è‡´ follower éœ€è¦æ£€æŸ¥ï¼Œè¿™ä¸ª AppendEntries RPC æ˜¯å¦å·²ç»è¿‡æ—¶ï¼Œå¦‚æœè¿‡æ—¶å°±è¿”å› falseï¼Œå¦‚æœæ²¡è¿‡æ—¶å°±è¿”å› true</p>\n<h5 id=\"testfigure8unreliable2cæŠ¥é”™è¿”å›trueçš„appendentriesrpcä¸¢å¤±é—®é¢˜\"><a class=\"anchor\" href=\"#testfigure8unreliable2cæŠ¥é”™è¿”å›trueçš„appendentriesrpcä¸¢å¤±é—®é¢˜\">#</a> TestFigure8Unreliable2C æŠ¥é”™ï¼Œè¿”å› true çš„ AppendEntriesRPC ä¸¢å¤±é—®é¢˜</h5>\n<p>åŸå› åœ¨äºï¼Œleader é¦–å…ˆå‘é€äº†ä¸€ä»½ entriesï¼Œfollower é€šè¿‡ AppendEntries æ”¶åˆ°äº†è¿™ä»½ Entriesã€‚follower æ£€æŸ¥åˆ°è¿™ä¸ª AppendEntries ä¸­æºå¸¦çš„ Entries æ²¡æœ‰è¢« Append åˆ°è‡ªå·±çš„ logs ä¸­ï¼Œäºæ˜¯å®ƒ appendï¼Œå¹¶è¿”å› trueã€‚ä½†æ˜¯è¿™ä¸ªæœ¬è¯¥è¿”å› true çš„ AppendEntries RPC å› ä¸ºç½‘ç»œæ²¡æœ‰è¿”å›ï¼ˆæ°¸ä¹…ä¸¢å¤±ï¼Œæˆ–è€…è¿”å›å¾ˆæ…¢ï¼Œleader è¶…æ—¶ä¸å†æ¥å—ï¼‰ï¼Œleader äºæ˜¯åˆé‡æ–°å‘é€äº†ä¸€ä»½ç›¸åŒçš„ Entriesã€‚follower æ£€æŸ¥åˆ°è¿™ä¸ª AppendEntries ä¸­æºå¸¦çš„ Entries ä¹‹å‰å·²ç» Append è¿‡äº†ï¼Œäºæ˜¯å®ƒè¿”å›ç»™ leader falseã€‚leader æ”¶åˆ° false åäºæ˜¯é‡å¤å‘é€ï¼Œäºæ˜¯æ•´ä¸ªç³»ç»Ÿé™·å…¥äº† <code>living lock</code> ã€‚</p>\n<p><strong>è§£å†³åŠæ³•</strong>ï¼šå½“ follower æ£€æµ‹åˆ° stale AppendEntriesRPC æ—¶ï¼Œå®ƒå‘Šè¯‰ leaderï¼Œè¿™ä¸ª RPC è¿‡æ—¶äº†ï¼Œå¹¶ä¸”åŒæ—¶è¿”å› follower è‡ªå·±çš„ <code>len(logs)</code>  ä¹Ÿå°±æ˜¯ <code>XIndex</code> ã€‚leader æ£€æŸ¥åˆ°è¿‡æ—¶çš„ RPCï¼Œå®ƒé€šè¿‡æ£€æŸ¥ <code>reply.XIndex == len(args.Entris) + rf.nextIndex[server]</code>  ï¼Œå¦‚æœæ»¡è¶³è¯´æ˜å®ƒæ²¡æœ‰æ¥å—åˆ°é‚£ä¸ªè¿”å› true çš„ AppendEntriesï¼Œäºæ˜¯å®ƒå°† <code>rf.nextIndex[server] = reply.Xindex</code> ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿè§£å†³è¿”å› true çš„ AppendEntriesRPC ä¸¢å¤±é—®é¢˜ã€‚</p>\n<h5 id=\"unreliable-churn-out-of-range-é—®é¢˜\"><a class=\"anchor\" href=\"#unreliable-churn-out-of-range-é—®é¢˜\">#</a> unreliable churn out of range é—®é¢˜</h5>\n<p>åŸå› åœ¨äºï¼Œç½‘ç»œå¤ªæ··ä¹±äº†ã€‚åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°ï¼Œè¿”å› true çš„ AppendEntriesRPC ä¼šå› ä¸ºç½‘ç»œä¸¢å¤±ï¼Œç„¶å leader ä¸€ç›´é™·å…¥æ´»é”ã€‚æˆ‘ä»¬çš„è§£å†³åŠæ³•æ˜¯å‘Šè¯‰ leaderï¼Œè¿™ä¸ª AppendEntries è¿‡æ—¶äº†ï¼Œleader æ¥æ£€æŸ¥éœ€ä¸éœ€è¦ä¿®æ”¹ <code>rf.nextIndex</code> ã€‚</p>\n<p>ä½†æ˜¯ï¼ï¼ï¼</p>\n<p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå› ä¸ºç½‘ç»œå¾ˆä¹±ï¼Œå¦‚æœ stale appendEntriesRPC è¦æ¯”é‚£ä¸ªè¿”å› true çš„ AppendEntriesRPC å…ˆè¿”å›å‘¢ï¼Ÿleader å¯¹äº stale AppendEntriesRPCï¼Œå®ƒä¼šè®¤ä¸ºè‡ªå·±ä¹‹å‰çš„é‚£ä¸ªè¿”å› True çš„ AppendEntriesRPC ä¸¢å¤±äº†ã€‚äºæ˜¯ leader ä¿®æ”¹äº†è‡ªå·±çš„ nextIndexã€‚ä½†æ˜¯é‚£ä¸ªè¿”å› true çš„ AppendEntries å› ä¸ºç½‘ç»œè¿˜å¯ä»¥ï¼Œæœ€åè¿˜æ˜¯æˆåŠŸè¿”å›äº†ã€‚leader äºæ˜¯åˆä¿®æ”¹äº†è‡ªå·±çš„ <code>nextIndex</code> ã€‚è¿™å°±å¯¼è‡´äº† out of range çš„å‡ºç°ï¼Œå¹¶ä¸”è¿™ä¸ªé—®é¢˜æ˜¯å¶å‘æ€§çš„ï¼Œå› ä¸ºè¿™å±äºç½‘ç»œä¸­çš„æç«¯æƒ…å†µã€‚</p>\n<p>æˆ‘ä»¬çš„è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚æœ leader è¦ä¿®æ”¹è‡ªå·±çš„ nextIndexï¼Œå¿…é¡»æ»¡è¶³ï¼š</p>\n<p><code>reply.XIndex == len(args.Entries) + rf.nextIndex[server]</code></p>\n<h5 id=\"testfigure8unreliable2cç¨€æœ‰out-of-range\"><a class=\"anchor\" href=\"#testfigure8unreliable2cç¨€æœ‰out-of-range\">#</a> TestFigure8Unreliable2C ç¨€æœ‰ out of range</h5>\n<p>å› ä¸ºæˆ‘çš„ log æ—¥å¿—çš„ index æ˜¯ä» 1 å¼€å§‹çš„ï¼Œäºæ˜¯åœ¨åˆå§‹åŒ–æ—¶å€™ï¼Œæˆ‘ä¼šé»˜è®¤å°† index = 0 è®¾ç½®ä¸º 0ï¼Œ applyindex =0 , commitIndex= 0ã€‚</p>\n<p>ä½†æ˜¯åœ¨è®¾ç½® nextIndexï¼Œå› ä¸ºæ—¥å¿—ä¸åŒ¹é…ï¼Œæˆ‘å°±éœ€è¦éå†æ‰¾åˆ°æœ€ä¼˜çš„ Indexï¼Œä½†æ˜¯è¿™é‡Œæˆ‘çš„éå†æ¡ä»¶æ˜¯ï¼š</p>\n<p><code>for i = len(rf.logs) - 1; i &gt;= 0; i--</code></p>\n<p>è¿™å°±ä¼šå¯¼è‡´åœ¨å¾ˆç½•è§çš„æƒ…å†µä¸‹ï¼Œi ä¼šè¢«å½’ä¸º 0ï¼Œè€Œæˆ‘ä»¬ç”¨ 0 ç»™ nextIndex èµ‹å€¼ï¼Œå°±å¯¼è‡´ preLogIndex å˜æˆäº† - 1ã€‚è¿™å°±ä¼šå‡ºç° out of rangeã€‚ä½†è¿™ä¸ªæƒ…å†µå¾ˆå°‘è§ï¼Œ100 æ¬¡é‡Œèƒ½å‡ºç° 1 æ¬¡ï¼Ÿ</p>\n<p>æ”¹æˆï¼š <code>for i = len(rf.logs) - 1; i &gt;= 1; i--</code>  å°±è¡Œäº†ã€‚</p>\n<p><strong>éƒ½æ˜¯ç»†èŠ‚ï¼çœŸçš„å¤ªç»†äº†ã€‚ã€‚ã€‚ã€‚</strong></p>\n<h3 id=\"part2d\"><a class=\"anchor\" href=\"#part2d\">#</a> Part2D</h3>\n<p>è¿™ä¸ª lab è¦æ±‚æˆ‘ä»¬å®Œæˆ log compactionã€‚</p>\n<p>éœ€è¦å®ç° <code>Snapshot(index int, snapshot []byte)</code> ï¼Œtester æ¥å®šæœŸè°ƒç”¨ã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220303200330913.png\" alt=\"image-20220303200330913\" /></p>\n<h4 id=\"æ— ä¼¤é€šå…³34æ›´æ–°\"><a class=\"anchor\" href=\"#æ— ä¼¤é€šå…³34æ›´æ–°\">#</a> æ— ä¼¤é€šå…³ï¼ï¼ï¼ï¼ï¼ï¼ˆ3.4 æ›´æ–°ï¼‰</h4>\n<p>ç»ˆäºæ— ä¼¤é€šå…³äº† lab2 äº†ï¼ŒçœŸçš„æœäº†æˆ‘è‡ªå·±äº†ã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220304214412025.png\" alt=\"image-20220304214412025\" /></p>\n<p>æ‰¹é‡æµ‹è¯•è¿˜åœ¨è·‘ï¼Œä½†æ˜¯é—®é¢˜ä¸å¤§ï¼Œå˜¿å˜¿ã€‚</p>\n<p>2D å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯éœ€è¦å°†åŸæ¥çš„ç´¢å¼•è¿›è¡Œæ›¿æ¢ï¼Œæˆ‘çš„é€‰æ‹©æ˜¯å†™ä¸¤ä¸ªè½¬æ¢å‡½æ•°ï¼š</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token punctuation\">(</span>rf <span class=\"token operator\">*</span>Raft<span class=\"token punctuation\">)</span> <span class=\"token function\">Convert</span><span class=\"token punctuation\">(</span>index <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token builtin\">int</span> <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token keyword\">return</span> index <span class=\"token operator\">-</span> rf<span class=\"token punctuation\">.</span>lastIncludedIndex</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">func</span> <span class=\"token punctuation\">(</span>rf <span class=\"token operator\">*</span>Raft<span class=\"token punctuation\">)</span> <span class=\"token function\">Reconvert</span><span class=\"token punctuation\">(</span>index <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token builtin\">int</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">return</span> index <span class=\"token operator\">+</span> rf<span class=\"token punctuation\">.</span>lastIncludedIndex</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åœ¨åˆšå¼€å§‹æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œå› ä¸ºæ¯ä¸€æ¬¡åš snap éƒ½ä¼šåˆ‡æ–­ logsï¼Œäºæ˜¯éœ€è¦è€ƒè™‘å¤„ç†ç©º log æ—¥å¿—çš„æƒ…å†µï¼Œä½†æ˜¯å…¶å®æ²¡æœ‰å¿…è¦ï¼Œå¦‚æœè€ƒè™‘ç©º log ä¼šå¯¼è‡´æ•´ä¸ªä»£ç é€»è¾‘å˜å¾—éå¸¸å¤æ‚ã€‚</p>\n<p>è§£å†³æ–¹æ³•ï¼šæ¯ä¸€æ¬¡åš snapshot å¾—åˆ°æ–°çš„ log æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ logs å‰é¢æ’å…¥ä¸€ä¸ªç©º log entryï¼Œå¹¶ä¸”å®ƒçš„ term ç­‰äº <code>lastIncludeTerm</code> ã€‚äºæ˜¯æˆ‘ä»¬ä¹‹å‰å†™çš„ä»£ç å°±åªè¦ä¸€ç‚¹ç‚¹æ”¹å˜ã€‚</p>\n<p>ç¬¬äºŒä¸ªå‘ç‚¹å°±æ˜¯ï¼Œé€‰æ‹©ä»€ä¹ˆæ—¶å€™è°ƒç”¨ Installsnapshotã€‚æˆ‘æœ€å¼€å§‹æƒ³çš„æ˜¯åœ¨ sendAppendEntries åœ¨è¿™ä¸ªå‡½æ•°çš„è¿”å›é€»è¾‘éƒ¨åˆ†è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯ç”±äº RPC æ˜¯å»ºç«‹åœ¨ UDP ä¸Šçš„ï¼Œæ•´ä¸ªç½‘ç»œå¼‚å¸¸æ··ä¹±ï¼Œå¯¼è‡´å¯èƒ½å¤šä¸ª Installsnapshot è°ƒç”¨ä¹‹é—´é¡ºåºå¾ˆä¹±ï¼Œä¸åˆ©äºæˆ‘ä»¬çš„æ€è€ƒã€‚</p>\n<p>è§£å†³åŠæ³•ï¼šæŠŠè°ƒç”¨ Installsnapshot æ”¾åˆ° heartbeat å‡½æ•°é‡Œï¼Œè®©æ¯ä¸€æ¬¡ heartbeat è€ƒè™‘è¦ä¸è¦è°ƒç”¨ installsnapshotã€‚</p>\n<h4 id=\"installsnapshot-rpc\"><a class=\"anchor\" href=\"#installsnapshot-rpc\">#</a> Installsnapshot RPC</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220304215521240.png\" alt=\"image-20220304215521240\" /></p>\n<p>æŒ‰ç…§è¦æ±‚å®ç°è¿™ä¸ª RPC å°±è¡Œäº†ï¼Œéœ€è¦æ³¨æ„å› ä¸ºæ•´ä¸ªç½‘ç»œä¸å¯ä¿¡ï¼Œæˆ‘ä»¬éœ€è¦éªŒè¯è¿™ä¸ª InstallSnapshot æ˜¯å¦å·²ç»è¿‡æ—¶ã€‚</p>\n<h3 id=\"é—ç•™çš„é—®é¢˜\"><a class=\"anchor\" href=\"#é—ç•™çš„é—®é¢˜\">#</a> é—ç•™çš„é—®é¢˜</h3>\n<p>è¿™æ˜¯æˆ‘åšè¿™ä¸ª lab å‘ç°çš„ä¸€ä¸ªå¾ˆå¥‡å¦™çš„ç°è±¡ï¼Œä½†æˆ‘å®Œæˆäº† 2D çš„æ—¶å€™ï¼Œå›è¿‡å¤´æˆ‘æ£€æŸ¥ä¹‹å‰çš„ ABC æµ‹è¯•ï¼Œå‘ç° B æµ‹è¯•ä¸­çš„ *ğŸ˜— RPC byte count æµ‹è¯•å‡ºç° RPC byte count failedã€‚</p>\n<p>è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºï¼Œæ•´ä¸ªç½‘ç»œæ˜¯ UDP çš„ï¼Œä¼šå‡ºç°è¿™ä¹ˆä¸€ç§æƒ…å†µï¼šRPC åŒ…å‘å‡ºå»åï¼Œå› ä¸º UDP å¹¿æ’­ï¼Œè¢«è‡ªå·±ç«‹å³æ¥å—äº†ï¼Œå¹¶è¿”å›ã€‚è¿™æ ·å°±ä½¿å¾—æ•´ä¸ªç½‘ç»œå˜å¾—å¼‚å¸¸è‡ƒè‚¿ã€‚</p>\n<p>è¿™ä¸ª Bug å‡ºç°çš„åŸå› æ˜¯å› ä¸ºï¼Œæˆ‘åœ¨ä»£ç ä¸­å¢åŠ äº†è¿™æ ·ä¸€ä¸ªé€»è¾‘ï¼Œä¸€æ—¦æ£€æŸ¥åˆ°è‡ªå·±å‘å‡ºçš„ RPC åŒ…è¢«è‡ªå·±æ¥æ”¶åå°± returnã€‚</p>\n<p>ä½†æ˜¯æˆ‘è‡³ä»Šä¹Ÿæ²¡ææ‡‚ï¼Œä¸ºä»€ä¹ˆä¸è¡Œï¼</p>\n<p>è¿™ä¸ªé—®é¢˜ï¼Œæœªæ¥çš„æˆ‘ï¼Œä½ å¯ä»¥è§£å†³çš„å¯¹å§ï¼ŸğŸ˜</p>\n<h3 id=\"raft-basic\"><a class=\"anchor\" href=\"#raft-basic\">#</a> Raft Basic</h3>\n<p>å°† servers åˆ†ä¸ºä¸‰ç§çŠ¶æ€ï¼šleaderã€follower å’Œ candidateã€‚</p>\n<p>follower æ˜¯æ¶ˆæçš„ï¼Œä»–ä»¬åªèƒ½å“åº” leader æˆ–è€… candidate çš„è¯·æ±‚ã€‚candidate æ˜¯é€‰ä¸¾æ—¶äº§ç”Ÿçš„ã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220226123046018.png\" alt=\"image-20220226123046018\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220226123113136.png\" alt=\"image-20220226123113136\" /></p>\n<p>å°±åƒå›¾ä¸­æè¿°çš„ï¼Œterm åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ election å’Œ normalã€‚æ¯ä¸ª term éƒ½æœ‰å¯¹äºçš„ current term numberã€‚<strong>å¦‚æœ candidate æˆ–è€… leader å‘ç°ä»–çš„ term è¿‡æ—¶äº†ï¼Œé‚£ä¹ˆä»–ä»¬ä¼šè‡ªåŠ¨å˜ä¸º followsã€‚</strong></p>\n<p>RequestVote RPCs åœ¨é€‰ä¸¾æ—¶ç”± candidate è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸” AppendEntries RPCs è¢« leader åˆå§‹åŒ–ç”¨äºå¤åˆ¶ log entries å’Œæä¾› heartbeatï¼ˆå°±æ˜¯ç©ºçš„ AppendEntriesï¼‰ã€‚</p>\n<p><strong>è®°ä½ raft ä¸­çš„èŠ‚ç‚¹å…¶å®å°±æ˜¯çŠ¶æ€æœºï¼</strong></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220228220844868.png\" alt=\"image-20220228220844868\" /></p>\n<p>è¿™é‡Œæˆ‘æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œå› ä¸ºæ˜¯ state machineï¼Œç”±äº raft å±‚è®°å½•äº† lastApplyï¼Œè€Œä¸” state machine åªèƒ½ apply committed entriesã€‚æ‰€æœ‰çš„æœºå­éƒ½ä¼š apply ç›¸åŒçš„ committed entriesã€‚å› æ­¤è¿™é‡Œå¯èƒ½ä¼šå‡ºç°é‡å¤å“åº”æƒ…å†µï¼Œæ¯”å¦‚ client å‘é€è¯·æ±‚ç»™ leaderï¼Œleader committed è¯·æ±‚åè¿”å›ç»™ client å“åº”ä¹‹åé©¬ä¸ŠæŒ‚æ‰äº†ï¼Œraft é€šè¿‡é€‰ä¸¾äº§ç”Ÿäº†æ–°çš„ leaderï¼Œé‚£ä¹ˆæ–°çš„ leader å¯èƒ½ä¼šè®© state machine é‡å¤ applyï¼Œä¹Ÿå°±æ˜¯é‡å¤å‘é€å“åº”ã€‚</p>\n<p><strong>ä½†æ˜¯è¿™æ²¡æœ‰é—®é¢˜ï¼é‡å¤æ˜¯ tcp å±‚åº”è¯¥è§£å†³çš„é—®é¢˜ã€‚</strong></p>\n<p>LastApply æ°¸è¿œåº”è¯¥å°äºæˆ–ç­‰äº committed indexï¼</p>\n<h3 id=\"leaderé€‰ä¸¾\"><a class=\"anchor\" href=\"#leaderé€‰ä¸¾\">#</a> Leader é€‰ä¸¾</h3>\n<p>server å¼€å¯ï¼Œåˆå§‹çŠ¶æ€ä¸º followerï¼Œå¹¶ä¸”å¦‚æœä»–æ”¶åˆ° <code>leader</code>  æˆ–è€… <code>candidate</code>  çš„æœ‰æ•ˆ RPCsï¼Œé‚£ä¹ˆå°±ä¼šä¸€ç›´ç»´æŒ followerã€‚å¦‚æœ follower åœ¨ election timeout å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½• RPCsï¼Œé‚£ä¹ˆä»–å°±ä¼šå¢åŠ  current term å¹¶ä¸”æˆä¸º candidate å¼€å¯é€‰ä¸¾ã€‚</p>\n<h4 id=\"follower\"><a class=\"anchor\" href=\"#follower\">#</a> follower</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220226150941941.png\" alt=\"image-20220226150941941\" /></p>\n<h4 id=\"candidate\"><a class=\"anchor\" href=\"#candidate\">#</a> candidate</h4>\n<p>é€šè¿‡ RequestVote RPC åŒæ—¶å‘é›†ç¾¤ä¸­æ‰€æœ‰çš„ server è¦æ±‚æŠ•ç¥¨ã€‚</p>\n<h5 id=\"requestvote-rpcçš„ç»“æ„\"><a class=\"anchor\" href=\"#requestvote-rpcçš„ç»“æ„\">#</a> RequestVote RPC çš„ç»“æ„ï¼š</h5>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220226150031701.png\" alt=\"image-20220226150031701\" /></p>\n<h5 id=\"candidateéœ€è¦åšçš„\"><a class=\"anchor\" href=\"#candidateéœ€è¦åšçš„\">#</a> candidate éœ€è¦åšçš„ï¼š</h5>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220226150232338.png\" alt=\"image-20220226150232338\" /></p>\n<p>è¿™é‡Œå…¶å®è¿˜å°‘äº›äº†ä¸€ä¸ªå¾ˆé‡è¦çš„æ¡ä»¶ï¼š</p>\n<blockquote>\n<p>Current terms are exchanged whenever servers communicate; if one serverâ€™s current term is smaller than the otherâ€™s, then it updates its current term to the larger value. If a candidate or leader discovers that its term is out of date, it immediately reverts to follower state. If a server receives a request with a stale term number, it rejects the request.</p>\n</blockquote>\n<p>ä¹Ÿå°±è¯´å¦‚æœ leader æˆ–è€… candidate å‘ç°æœ‰äººçš„ current term number æ¯”å®ƒçš„è¿˜è¦å¤§ï¼Œé‚£ä¹ˆå°±è‡ªåŠ¨å˜æˆ followerï¼Œè¿™ä¸ªç‰¹æ€§å¾ˆé‡è¦ï¼</p>\n<h4 id=\"å…³äºrandomized-election-timeouts\"><a class=\"anchor\" href=\"#å…³äºrandomized-election-timeouts\">#</a> å…³äº randomized election timeouts</h4>\n<p>è®ºæ–‡ä¸­æåˆ°ï¼š</p>\n<blockquote>\n<p>raft uses randomized election timeouts to ensure that split votes are rare and that they are resolved quickly.</p>\n</blockquote>\n<p>è¿™ä¸ªä¸€ç›´å›°æ¼æˆ‘ï¼Œæ•´ä¸ªéšæœº election timeouts æ˜¯å¦‚ä½•è§£å†³ split votesã€‚å› ä¸ºæœ‰ä¸€æ®µè¯ï¼š</p>\n<blockquote>\n<p>This spreads out the servers so that in most cases only a single server will time out; it wins the election and sends heartbeats before any other servers time out.</p>\n</blockquote>\n<p>è¿™æ®µè¯çš„æ„æ€æ˜¯è¯´å…ˆ timeout çš„ server ä¼šè·å¾—é€‰ä¸¾èƒœåˆ©ã€‚è¿™é‡Œå°±æœ‰ä¸€ä¸ªç–‘é—®ä¸ºä»€ä¹ˆå…ˆ timeout çš„ server ä¸€å®šä¼šè·å¾—é€‰ä¸¾èƒœåˆ©ã€‚å…¶å®è¦ææ‡‚è¿˜å¾—çœ‹ followerã€‚follower åšäº†ä¸€ä»¶äº‹ï¼š</p>\n<blockquote>\n<p>If a follower receives no communication over a period of time called the election timeout, then it assumes there is no viable leader and begins an election to choose a new leader.</p>\n</blockquote>\n<p>å¦‚æœ follower åœ¨ <code>election timeout</code>  æ²¡æœ‰æ”¶åˆ° leader æˆ– candidate çš„ rpcï¼Œé‚£ä¹ˆå®ƒä¼šå¼€å¯é€‰ä¸¾ï¼Œæ³¨æ„è¿™é‡Œçš„è¶…æ—¶æ—¶é—´æ˜¯ <code>election timeout</code> ã€‚ä¹Ÿå°±æ˜¯è¯´è¿‡ leader æŒ‚äº†çš„è¯ï¼Œé‚£ä¹ˆ <code>election timeout</code>  æœ€å°çš„é‚£ä¸ªæœºå­å°±ä¼šå…ˆæ„è¯†åˆ°ï¼Œäºæ˜¯ä»–æˆä¸º candidate å¹¶ä¸”å‘å…¶ä»– server å‘é€ RequestVote RPCã€‚è€Œ raft çš„æŠ•ç¥¨æœºåˆ¶å°±æ˜¯å…ˆæ¥å…ˆåˆ°è§„åˆ™ï¼Œå…ˆå‘èµ·æŠ•ç¥¨çš„é‚£ä¸ª server å¾ˆæœ‰å¯èƒ½å¯ä»¥èµ¢å¾—é€‰ä¸¾ã€‚</p>\n<p>candidate åˆå§‹åŒ–ä¹Ÿåšäº†ä¸€ä»¶äº‹ï¼š</p>\n<blockquote>\n<p>Each candidate restarts its randomized election timeout at the start of an<br />\nelection, and it waits for that timeout to elapse before starting the next election</p>\n</blockquote>\n<p>candidate åˆå§‹åŒ–åä¹Ÿä¼šé‡æ–°éšæœºåˆå§‹åŒ–è¿™ä¸ª <code>election timeout</code> ã€‚å¦‚æœåœ¨è¿™ä¸ªé˜¶æ®µå‘ç”Ÿäº† split vote æƒ…å†µï¼Œé‚£ä¹ˆ <code>election timeout</code>  æœ€å°çš„ candidate å°±ä¼šç‡å…ˆè¶…æ—¶ï¼Œå¹¶ä¸”å¼€å¯æ–°çš„æŠ•ç¥¨ï¼Œäºæ˜¯å…¶ä»– candidate çœ‹åˆ°æ–°çš„ RequestVote ä¸­çš„ <code>current term</code>  å¤§äºè‡ªèº«çš„ term numberï¼Œäºæ˜¯è¿™äº› candidate å°±ä¼šè‡ªåŠ¨å˜æˆ followers å¹¶ç»™æ–°çš„ candidate æŠ•ç¥¨ã€‚äºæ˜¯ splitvote é—®é¢˜å°±å¯ä»¥å¾ˆå¥½åœ°è§£å†³äº†ï¼</p>\n<h3 id=\"state\"><a class=\"anchor\" href=\"#state\">#</a> State</h3>\n<h4 id=\"æ‰€æœ‰çš„serveréƒ½æœ‰çš„çŠ¶æ€\"><a class=\"anchor\" href=\"#æ‰€æœ‰çš„serveréƒ½æœ‰çš„çŠ¶æ€\">#</a> æ‰€æœ‰çš„ server éƒ½æœ‰çš„çŠ¶æ€</h4>\n<p><code>committedIndex</code> ï¼šè¿™å°±æ˜¯ logs ä¸­ committed highest log entry indexï¼Œè¿™ä¸ªåˆå§‹åŒ–ä¸º 0ã€‚</p>\n<p><code>log[]</code> ï¼šlog åˆå§‹åŒ–ä¸­ä¼šæŠŠ index ä¸º 0 åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯åç»­æ·»åŠ  entry çš„ index éƒ½æ˜¯ä» 1 å¼€å§‹ã€‚</p>\n<p><code>lastApplied</code> ï¼šindex of highes log entry applied to state machineã€‚é€šè¿‡ heartbeat å‘é€äº† entry ä¹‹åå—åˆ°äº† confirmï¼Œç¡®å®šæ˜¯ committed ä¹‹åå°±å¯ä»¥æ‰§è¡Œäº†ã€‚è¿™ä¸ª lab å¯èƒ½ä¸ä¼šæ¶‰åŠã€‚</p>\n<p><code>commitIndex</code> ï¼šé€šè¿‡ heartbeat å¾—åˆ°å›å¤ï¼Œleader å°±å¯ä»¥ç¡®è®¤ committed äº†ã€‚</p>\n<h4 id=\"leader-ç»´æŠ¤çš„çŠ¶æ€\"><a class=\"anchor\" href=\"#leader-ç»´æŠ¤çš„çŠ¶æ€\">#</a> leader ç»´æŠ¤çš„çŠ¶æ€</h4>\n<p><code>matchIndex[]</code> ï¼šå¯¹äºæ¯ä¸ª serverï¼Œéœ€è¦å¤åˆ¶çš„æœ€é«˜ log entry indexï¼Œåˆå§‹åŒ–ä¸º 0ã€‚æˆ‘è¿˜æ²¡ææ‡‚è¿™ä¸ªæœ€é«˜éœ€è¦è¢«å¤åˆ¶ä¸ºå•¥è¦åˆå§‹åŒ–ä¸º 0ã€‚</p>\n<p><code>nextIndex[]</code> : leader ä¼šä¿å­˜ä¸‹ä¸€ä¸ªä¸º server å‘é€äº† log entry çš„ indexã€‚è¿™é‡Œçš„ index æˆ‘ç›´æ¥è®¾å®šä¸º log çš„ç´¢å¼•ã€‚ï¼ˆåˆå§‹åŒ–ä¸º <code>len(logs)</code> ï¼‰</p>\n<h3 id=\"å…³äº54-safety\"><a class=\"anchor\" href=\"#å…³äº54-safety\">#</a> å…³äº 5.4 Safety</h3>\n<p>æœ‰ä¸ªå¤§å‰æï¼šleader å¯ä»¥æ— é™ append logï¼Œä½†æ˜¯å®ƒä¸èƒ½é€šè¿‡é€‰ä¸¾ç„¶åå¢å¤§è‡ªå·±çš„ termã€‚</p>\n<h4 id=\"ä¸¥æ ¼é€‰ä¸¾\"><a class=\"anchor\" href=\"#ä¸¥æ ¼é€‰ä¸¾\">#</a> ä¸¥æ ¼é€‰ä¸¾</h4>\n<p>Raft ä¿è¯æ–°é€‰ä¸¾å‡ºæ¥çš„ leader å¿…é¡»æ‹¥æœ‰ä¹‹å‰ term æ‰€æœ‰çš„ committed entriesï¼Œä¹Ÿå°±æ˜¯è¯´ log entries åªèƒ½é€šè¿‡ leader æµå‘ follower è€Œä¸èƒ½ä» follower æµå‘ leaderã€‚</p>\n<p>è¿™é‡Œ candidate èµ¢å¾—é€‰ä¸¾çš„æ¡ä»¶æœ‰æ‰€ä¸åŒã€‚</p>\n<p>candidate åœ¨è¯·æ±‚æŠ•ç¥¨æ—¶ï¼Œä¼šå‘é€è‡ªå·±çš„ last log entry å’Œ follower çš„ last log entry è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœ candidate last log çš„ term è¦å¤§ï¼Œè·å¾— term ç›¸åŒæ—¶ candidate log entry çš„ index è¦å¤§ï¼Œåˆ™è®¤ä¸º candidate æ˜¯ä¼˜å…ˆçš„ï¼Œè¿™æ—¶å€™æ‰èƒ½è¿›è¡ŒæŠ•ç¥¨ã€‚</p>\n<h4 id=\"committedè§„åˆ™\"><a class=\"anchor\" href=\"#committedè§„åˆ™\">#</a> committed è§„åˆ™</h4>\n<p>è®ºæ–‡çš„ figure 8 ç»™å‡ºäº†è¿™æ ·ä¸€ä¸ªæƒ…å†µï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220228215916592.png\" alt=\"image-20220228215916592\" /></p>\n<p>åœ¨ <code>c</code>  æƒ…å†µä¸‹ï¼Œ <code>s1</code>  ä½œä¸º leader å°† index 2 å¤åˆ¶ç»™äº† s2ã€s3ã€‚ç„¶åé—®é¢˜æ¥äº†ï¼Œè¿™æ · index 2 å°±æ˜¯ä¸€ä¸ª committed entry äº†ï¼Œä½†æ˜¯å¦‚æœ s1 è¿™æ—¶å€™æŒ‚æ‰ï¼Œs5 å‚ä¸åˆ°é€‰ä¸¾ï¼Œç”±äº s5 åœ¨ term3 æ—¶å€™èµ¢å¾—äº†é€‰ä¸¾ï¼Œæ‰€ä»¥ä»–æœ‰ term3 çš„ log entryï¼Œé‚£ä¹ˆ s5 åœ¨ <code>d</code>  æƒ…å†µå¯ä»¥èµ¢å¾— term5 é€‰ä¸¾ï¼Œå¹¶æŠŠ index 2 å¤åˆ¶ç»™äº†å…¶ä»– serverã€‚å¯ä»¥çœ‹åˆ°æ­¤æ—¶çš„ index 2 çš„ term å˜æˆäº† 3ã€‚ä¹‹å‰çš„ committed è¢«è¦†ç›–äº†ï¼</p>\n<p>äºæ˜¯ raft è§„å®šï¼Œåªæœ‰å½“å‰ term çš„ log entries æ‰èƒ½é€šè¿‡è®¡ç®— replicas æ•°çš„æ–¹å¼è¿›è¡Œ <code>committed</code> ã€‚</p>\n<p>è¿™é‡Œåˆä¼šæœ‰æ–°çš„é—®é¢˜å‡ºç°äº†ï¼å¦‚æœä¸€ä¸ª command å¯¹åº”äº† log entries æ˜¯ä¹‹å‰çš„ termï¼Œé‚£ä¹ˆåŠæ—¶å½“å‰ leader æ”¶åˆ°äº† majority çš„ confirmï¼Œé‚£ä¹ˆ leader ä¹Ÿä¸èƒ½ apply è¿™ä¸ª log entryã€‚ä¸€ç›´åˆ°å½“å‰çš„ term ä¸‹æ¥äº† new commandã€‚é‚£ä¹ˆè¿™ä¸ªæ—§ term ä¸‹çš„ log entry æ‰ä¼šå¾—åˆ° confirmã€‚</p>\n<h4 id=\"safety-argument\"><a class=\"anchor\" href=\"#safety-argument\">#</a> Safety argument</h4>\n<p><strong>é’ˆå¯¹ figure 9 çš„æƒ…å†µ</strong></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220228224051518.png\" alt=\"image-20220228224051518\" /></p>\n<p>æˆ‘å¯¹äºè¿™å¼ å›¾çš„ç†è§£</p>\n<p>å¦‚æœ s5 å¯ä»¥è·å¾—å¤§éƒ¨åˆ†é€‰ç¥¨çš„è¯ï¼Œé‚£ä¹ˆè‡³å°‘ä¼šå‡ºç° s3 è¿™ç§æ—¢æ”¶åˆ°äº†ä¹‹å‰ leader çš„ log entryã€‚è¯·æ³¨æ„ï¼Œè®ºæ–‡æè¿°ä¸¥æ ¼é€‰ä¸¾æœ‰ä¸€ä¸ªå‰æï¼Œé‚£å°±æ˜¯ï¼šèµ¢å¾—é€‰ä¸¾çš„ server å¿…é¡»è¦åœ¨ majority ä¸­ä¿è¯ up-to-date log entryã€‚è¿™æ„å‘³ç€ leader å¦‚æœè‡ªå·±ä»»æœŸå†…çš„ committed entry ä¸€ç›´æ˜¯ up-to-dateã€‚ä¹Ÿå°±æ˜¯è¯´ s5 ä¸å¯èƒ½é€šè¿‡é€‰ä¸¾ï¼</p>\n<p>æœ‰ä¸€è¯´ä¸€ï¼Œè¿˜æ˜¯æœ‰çš„æŠ½è±¡ã€‚ã€‚ã€‚ã€‚</p>\n<h4 id=\"timing-and-availability\"><a class=\"anchor\" href=\"#timing-and-availability\">#</a> Timing and availability</h4>\n<p>éœ€è¦ä¿è¯</p>\n<p><strong>broadcastTimeâ‰ªelectionTimeoutâ‰ªMTBF</strong></p>\n<p><code>broadcastTime</code>  å°±æ˜¯å¹³è¡Œå‘é€ RPCs çš„å¹³å‡å‘é€æ—¶é—´ + æ¥å—å“åº”æ—¶é—´ã€‚</p>\n<p><code>electionTimeout</code> ï¼šè¿™ä¸ªå°±æ˜¯ä¹‹å‰æåˆ°äº†é€‰ä¸¾è¶…æ—¶ã€‚</p>\n<p><code>MTBF</code>  ï¼šthe average time between failures for a single server</p>\n<p><strong>MTBFs are several months or more</strong>ï¼Œæ‰€ä»¥è¿™ä¸ªä¸ç­‰å¼å¾ˆå®¹æ˜“æ»¡è¶³</p>\n<h3 id=\"log-compaction\"><a class=\"anchor\" href=\"#log-compaction\">#</a> Log compaction</h3>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220301092739411.png\" alt=\"image-20220301092739411\" /></p>\n<p>raft çš„ snap æœºåˆ¶ç”¨äºå‹ç¼©æ—¥å¿—ï¼Œå…¶å®å®ƒä¹Ÿå¾ˆç®€å•ã€‚</p>\n<p><code>last included index</code>  å°±æ˜¯ the last entry the state machine had appliedï¼Œå°±æ˜¯ last apply indexï¼Œæ³¨æ„ï¼Œåªæœ‰ committed çš„ entry æ‰ä¼šè¢« applyï¼Œè€Œ raft å¯ä»¥ç¡®ä¿æ‰€æœ‰ committed entry éƒ½ä¼šåœ¨ state machine å¾—åˆ° applyã€‚</p>\n<p>** å¹¶ä¸”è¿™ä¸ª snapshot è¿˜åŒ…å« state machine stateï¼** è¿™æ˜¯åˆ›å»º snap çš„æœ€å¤§å¼€é”€ã€‚</p>\n<p>æ‰€ä»¥ä¹‹å‰å·²ç» apply çš„ log entry å®é™…ä¸Šå·²ç»æ²¡å•¥å¤ªå¤§å¸®åŠ©äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿å­˜ last ç”¨äº AppendEntries consistency checkã€‚</p>\n<p>å¯¹äºç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ leader ç°åœ¨éœ€è¦åºŸå¼ƒ log entriesï¼Œä½†æ˜¯è¿™äº› log entries ä¸­è¿˜æœ‰ä¸€äº›æ²¡æœ‰å‘é€ç»™æŸä¸ª followerï¼Œæ¯”å¦‚ follower server æ‰§è¡Œå¾ˆæ…¢ï¼Œè¿™ä¸ª server åˆšåˆšåŠ å…¥ç½‘ç»œã€‚ã€‚ã€‚</p>\n<p>äºæ˜¯è¿™æ˜¯ leader ä¼šè°ƒç”¨ InstallSnapShot RPCï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220301095816047.png\" alt=\"image-20220301095816047\" /></p>\n<p>leader é€šè¿‡å‘é€ chunk æ–¹å¼ï¼ŒæŠŠ snapshot å‘é€ç»™ followerã€‚</p>\n<p>å¦‚æœ follower çš„ last log entry æ¯”æ¥æ”¶åˆ°çš„ snapshot é‡Œçš„ last index è¿˜è¦ staleï¼Œé‚£ä¹ˆ follower å°±æŠŠå…¨éƒ¨ log entrie ç»™æ‰”äº†ã€‚å¦‚æœ follower pre index å’Œ snap é‡Œçš„ last index é‡åˆï¼Œé‚£ä¹ˆå°±åªä¸¢å¼ƒä¹‹å‰çš„ã€‚</p>\n<p>snapshot çš„åˆ›å»ºè§„åˆ™ï¼š</p>\n<ol>\n<li>å›ºå®š log size è§¦å‘åˆ›å»º snapshotã€‚</li>\n<li>copy-on-write æŠ€æœ¯ç”¨äºåˆ›å»ºã€‚</li>\n</ol>\n<h3 id=\"å¬è®²\"><a class=\"anchor\" href=\"#å¬è®²\">#</a> å¬è®²</h3>\n<p>ä½¿ç”¨ condition</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220226202117673.png\" alt=\"image-20220226202117673\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220226202457559.png\" alt=\"image-20220226202457559\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220226210149391.png\" alt=\"image-20220226210149391\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220226210527368.png\" alt=\"image-20220226210527368\" /></p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220227155319505.png\" alt=\"image-20220227155319505\" /></p>\n<p>è¿™å¼ å›¾å¾ˆå¥½åœ°è§£ç­”äº†æˆ‘çš„ç–‘æƒ‘ï¼Œraft ä¸­çš„ server åªèƒ½æ˜¯ leader æ¥å¯¹å¤–æä¾›æœåŠ¡ï¼Œä» client å‘é€è¯·æ±‚åˆ° leader å“åº”è¿‡ç¨‹åˆ†ä¸ºï¼š</p>\n<ul>\n<li>client å‘ server å‘é€è¯·æ±‚ï¼Œå‘é€ç»™ follower çš„è¯·æ±‚ä¼šè¢« follower è½¬å‘ç»™ leaderã€‚</li>\n<li>leader æŠŠ client command å†™åœ¨ log ä¸­ï¼Œå¹¶é€šè¿‡ Append Entites RPC å‘é€ç»™å…¶ä»– followersã€‚</li>\n<li>followers è¿”å›ç¡®è®¤æ¶ˆæ¯ï¼Œå¦‚æœé›†ç¾¤ä¸­ majority éƒ½å“åº”äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ leader çŸ¥é“äº† cluster ä¸­å¤§éƒ¨åˆ†èŠ‚ç‚¹å°±æ”¶åˆ°äº†è¿™äº› log entityï¼Œé‚£ä¹ˆå¯¹åº”çš„ entity å°±æ˜¯ <code>committed</code> ã€‚</li>\n<li>leader ç¡®è®¤ entity æ˜¯ committed ä¹‹åï¼Œå°±ä¼šå¼€å§‹æ‰§è¡Œ entity å¯¹åº”çš„ commandï¼Œå¹¶æŠŠæ‰§è¡Œè¿™ä¸ª command å†æ¬¡å‘é€ç»™ followersã€‚</li>\n<li>followers æ”¶åˆ°ç¡®è®¤æ‰§è¡Œ request ä¹‹åå¼€å§‹æ‰§è¡Œã€‚</li>\n</ul>\n<p>æˆ‘ä¹‹å‰æƒ³åˆ°çš„ split partition é—®é¢˜å°±å¯ä»¥å¾ˆå¥½è§£å†³äº†ï¼Œå¦‚æœé›†ç¾¤åˆ†è£‚ä¸ºä¸¤ä¸ª partitionï¼Œç„¶åå„è‡ªéƒ½æœ‰ leaderï¼Œé‚£ä¹ˆå¯¹äº min partition æ¥è¯´ï¼Œleader æ”¶ä¸åˆ° majority çš„ç¡®è®¤ï¼Œå› æ­¤ leader æ²¡æ³•æ‰§è¡ŒæŒ‡ä»¤ã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220301110023351.png\" alt=\"image-20220301110023351\" /></p>\n<p>raft ä½¿ç”¨ fast backup æ–¹æ³•ã€‚</p>\n<h3 id=\"çº¿æ€§ä¸€è‡´æ€§\"><a class=\"anchor\" href=\"#çº¿æ€§ä¸€è‡´æ€§\">#</a> çº¿æ€§ä¸€è‡´æ€§</h3>\n<h4 id=\"ä»€ä¹ˆæ˜¯çº¿æ€§ä¸€è‡´æ€§\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯çº¿æ€§ä¸€è‡´æ€§\">#</a> <strong>ä»€ä¹ˆæ˜¯çº¿æ€§ä¸€è‡´æ€§ï¼Ÿ</strong></h4>\n<p>Raft é‡Œæåˆ°çš„çº¿æ€§ä¸€è‡´æ€§ï¼š</p>\n<p><strong>Linearizable semantics</strong> ï¼ˆLinearizabilityï¼‰(each operation appears to execute instantaneously, exactly once, at some point between its invocation and its response)</p>\n<ul>\n<li>\n<p>åœ¨ä¸€ä¸ªçº¿æ€§ä¸€è‡´æ€§çš„ç³»ç»Ÿé‡Œé¢ï¼Œä»»ä½•æ“ä½œéƒ½å¯èƒ½åœ¨è°ƒç”¨æˆ–è€…è¿”å›ä¹‹é—´åŸå­å’Œç¬é—´æ‰§è¡Œ</p>\n</li>\n<li>\n<p>çº¿æ€§ä¸€è‡´æ€§ï¼ŒLinearizabilityï¼Œä¹Ÿç§°ä¸ºåŸå­ä¸€è‡´æ€§ï¼ˆatomic consistencyï¼‰ï¼Œå¼ºä¸€è‡´æ€§ï¼ˆstrong consistencyï¼‰ç­‰</p>\n</li>\n<li>\n<p>ä¹Ÿå°±æ˜¯é€šå¸¸æ‰€è¯´çš„ CAP ç†è®ºä¸­çš„ C</p>\n</li>\n</ul>\n<p>å®ç°çº¿æ€§ä¸€è‡´æ€§éœ€è¦æ»¡è¶³ä¸‰ç‚¹ï¼š</p>\n<ul>\n<li>ç¬é—´å®Œæˆï¼ˆåŸå­æ€§ï¼‰</li>\n<li>å‘ç”Ÿåœ¨ Inv å’Œ Resp ä¸¤ä¸ªäº‹ä»¶ä¹‹é—´</li>\n<li>åæ˜ å‡º â€œæœ€æ–°â€ çš„å€¼</li>\n</ul>\n<p>1 å’Œ 2 å¾ˆå¥½ç†è§£ï¼Œä½† â€œæœ€æ–°â€ æ€ä¹ˆç†è§£å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•å°±çœ‹å†™æ“ä½œï¼š<br />\n<img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220301144626139.png\" alt=\"image-20220301144626139\" /></p>\n<p>åœ¨å›¾ä¸­ï¼Œx çš„å€¼è¢«å†™æ“ä½œåˆ’åˆ†ä¸º 3 ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸå†…å¯¹åº”æœ€æ–°çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ â€œæœ€æ–°â€ å¹¶ä¸ä»£è¡¨<strong>ç¡®å®š</strong>ï¼</p>\n<h4 id=\"æ•™æˆè®²çš„çº¿æ€§ä¸€è‡´æ€§\"><a class=\"anchor\" href=\"#æ•™æˆè®²çš„çº¿æ€§ä¸€è‡´æ€§\">#</a> æ•™æˆè®²çš„çº¿æ€§ä¸€è‡´æ€§</h4>\n<p>æˆ‘è§‰å¾—æ•™æˆè®²çš„æ›´åŠ è¨€ç®€æ„èµ…ï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220316100700951.png\" alt=\"image-20220316100700951\" /></p>\n<p>å¦‚æœæ‰§è¡Œå†å²æ˜¯çº¿æ€§çš„ï¼Œé‚£ä¹ˆå­˜åœ¨æ“ä½œåºåˆ—ï¼Œæ»¡è¶³<strong>æ‰§è¡Œé¡ºåºå’ŒçœŸå®æ—¶é—´ç›¸åŒ¹é…</strong>ï¼Œ<strong>æ¯ä¸ªè¯»æ“ä½œä¸€å®šçœ‹åˆ°äº†æœ€æ–°å†™æ“ä½œç»“æœ</strong>ã€‚</p>\n<p>æˆ‘ä»¬ä»¥ä¸‹é¢è¿™å¼ å›¾ä¸ºä¾‹å­ï¼š</p>\n<p><strong>æ‰§è¡Œé¡ºåºå’ŒçœŸå®æ—¶é—´ç›¸åŒ¹é…</strong>ï¼šå¯¹äºéå¹¶å‘ä¹Ÿå°±æ˜¯æ—¶é—´ä¸Šä¸é‡åˆçš„è¯·æ±‚ï¼Œæ¯”å¦‚ w1 å’Œ w2ã€‚è¿™ä¸¤ä¸ªè¯·æ±‚åœ¨æ—¶é—´ä¸Šä¸é‡åˆæ‰€ä»¥ä¸€å®šæ˜¯ w2 å‘ç”Ÿåœ¨ w1 ä¹‹å‰ã€‚ä½†æ˜¯å¯¹äºå¹¶å‘ä¹Ÿå°±æ˜¯æ—¶é—´ä¸Šæœ‰é‡åˆçš„è¯·æ±‚ï¼Œåˆ™éœ€è¦  <code>each operation appears to execute instantaneously</code> ã€‚</p>\n<p><strong>æ¯ä¸ªè¯»æ“ä½œä¸€å®šçœ‹åˆ°äº†æœ€æ–°å†™æ“ä½œç»“æœ</strong>ï¼šè¿™å¥è¯çš„æ„æ€å°±æ˜¯ R ä¸€å®šå‘ç”Ÿåœ¨ W ä¹‹åï¼Œæ¯”å¦‚è¯» R1 ä¸€å®šå‘ç”Ÿåœ¨ W1 ä¹‹åï¼Œå‡å¦‚æ²¡æœ‰æœ€æ–°çš„ W æ“ä½œï¼Œé‚£ä¹ˆä¹‹åæ‰€æœ‰è¯»æ“ä½œä¸€å®šéƒ½æ˜¯è¿”å› 1 çš„ã€‚</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturespicturespicturesimage-20220301122149285.png\" alt=\"image-20220301122149285\" /></p>\n<h3 id=\"é‡åˆ°çš„é—®é¢˜\"><a class=\"anchor\" href=\"#é‡åˆ°çš„é—®é¢˜\">#</a> é‡åˆ°çš„é—®é¢˜</h3>\n<h4 id=\"227æ—¥æ›´æ–°\"><a class=\"anchor\" href=\"#227æ—¥æ›´æ–°\">#</a> 2.27 æ—¥æ›´æ–°ï¼š</h4>\n<p>æˆåŠŸå®Œæˆäº† Lab2Aï¼Œä½†æ˜¯è¿˜é—ç•™äº†ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ä¸ºä»€ä¹ˆé™åˆ¶é€‰ä¸¾æ‰§è¡Œæ—¶é—´æ‰èƒ½é€šè¿‡ testï¼ŒæŒ‰é“ç†åªè¦é€‰ä¸¾è¶…æ—¶ä¹‹åï¼Œä¹‹å‰é€‰ä¸¾çš„ç»“æœå°±ä¼šè¢«åºŸå¼ƒçš„ã€‚ã€‚ã€‚</p>\n<pre><code>Test (2A): initial election ...\nlabgob warning: Decoding into a non-default variable/field Term may not work\n  ... Passed --   3.0  3   56    6872    0\nTest (2A): election after network failure ...\n  ... Passed --   9.2  3  238   17813    0\nTest (2A): multiple elections ...\n  ... Passed --   6.5  7  642   55493    0\nPASS\nok  \t6.824/raft\t18.733s\n\n</code></pre>\n<h4 id=\"31å·æ›´æ–°\"><a class=\"anchor\" href=\"#31å·æ›´æ–°\">#</a> 3.1 å·æ›´æ–°</h4>\n<p>raft åœ¨ leader å½“é€‰ä¹‹åä¼šç«‹å³åœ¨ leader çš„ log ä¸­ç”Ÿæˆä¸€æ¡ no-hup æ—¥å¿—å¹¶é€šè¿‡ heartbeat ä¼ é€’ç»™å…¶ä»– serverã€‚ä½†æ˜¯åœ¨ MIT6.824 å®éªŒä¸­æ²¡åŠæ³•å®ç° no-hupã€‚</p>\n<h4 id=\"34-æ›´æ–°\"><a class=\"anchor\" href=\"#34-æ›´æ–°\">#</a> 3.4 æ›´æ–°</h4>\n<p>æ„‰å¿«é€šå…³ï¼</p>\n",
            "tags": [
                "åˆ†å¸ƒå¼",
                "MIT6.824"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/Artur-%E8%B0%83%E5%BA%A6%E5%99%A8/",
            "url": "https://songlinlife.top/2022/Artur-%E8%B0%83%E5%BA%A6%E5%99%A8/",
            "title": "Artur: è°ƒåº¦å™¨",
            "date_published": "2022-02-25T13:46:15.000Z",
            "content_html": "<p>è¿™ç©æ„æœ‰ç‚¹åƒæˆ‘ä¹‹å‰å†™è¿‡çš„ MapReduceï¼Œä¹Ÿæ˜¯å• master è´Ÿè´£è°ƒåº¦ï¼Œå¤š worker è´Ÿè´£æ‰§è¡Œ taskã€‚å¹¶ä¸”ä¸€ä¸ª worker åªå…è®¸æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä½†æ‰§è¡Œå®Œä»»åŠ¡åå¯ä»¥é‡æ–°ç”³è¯· taskã€‚</p>\n<p>Artur å°±æ˜¯è´Ÿè´£ä¹‹å‰ <code>perceval</code>  ä»»åŠ¡çš„è°ƒåº¦ï¼Œåˆ†ä¸º <code>arthurd</code>  å’Œ  <code>arthurw</code> ã€‚ <code>arthurd</code>  ä¹Ÿå°±æ˜¯æœåŠ¡ç«¯ï¼Œè´Ÿè´£ assign taskã€‚è€Œ  <code>arturw</code>  è´Ÿè´£ç”³è¯· task ç„¶åæ‰§è¡Œã€‚</p>\n<h3 id=\"é…ç½®æ–‡ä»¶\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶\">#</a> é…ç½®æ–‡ä»¶</h3>\n<p><code>Arturd</code> ï¼š</p>\n<figure class=\"highlight ini\"><figcaption data-lang=\"ini\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">arthur</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key attr-name\">archive_path</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">/tmp/.arthur/archive</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key attr-name\">debug</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">True</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key attr-name\">log_path</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">/tmp/logs/arthurd</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key attr-name\">no_archive</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">True</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token key attr-name\">sync_mode</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">True</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">connection</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token key attr-name\">host</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">127.0.0.1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token key attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">8080</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">elasticsearch</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token key attr-name\">es_index</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">http://localhost:9200/items</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">redis</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token key attr-name\">database</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">redis://localhost/8</span></pre></td></tr></table></figure><p>å¯ä»¥æŒ‡å®š portï¼Œç”¨äºæä¾›æœåŠ¡ã€‚</p>\n<p><code>Arturw</code> ï¼š</p>\n<pre><code class=\"language-sh\">arthurw -d redis://localhost/8\n</code></pre>\n<p>ç›´æ¥ç»™ redis æ•°æ®åº“åœ°å€ã€‚</p>\n<h3 id=\"æ·»åŠ task\"><a class=\"anchor\" href=\"#æ·»åŠ task\">#</a> æ·»åŠ  task</h3>\n<pre><code class=\"language-sh\">$ cat tasks.json\n&#123;\n    &quot;tasks&quot;: [\n        &#123;\n            &quot;task_id&quot;: &quot;arthur.git&quot;,\n            &quot;backend&quot;: &quot;git&quot;,\n            &quot;backend_args&quot;: &#123;\n                &quot;gitpath&quot;: &quot;/tmp/git/arthur.git/&quot;,\n                &quot;uri&quot;: &quot;https://github.com/chaoss/grimoirelab-kingarthur.git&quot;,\n                &quot;from_date&quot;: &quot;2015-03-01&quot;\n            &#125;,\n            &quot;category&quot;: &quot;commit&quot;,\n            &quot;scheduler&quot;: &#123;\n                &quot;delay&quot;: 10\n            &#125;\n        &#125;,\n        &#123;\n            &quot;task_id&quot;: &quot;bugzilla_mozilla&quot;,\n            &quot;backend&quot;: &quot;bugzillarest&quot;,\n            &quot;backend_args&quot;: &#123;\n                &quot;url&quot;: &quot;https://bugzilla.mozilla.org/&quot;,\n                &quot;from_date&quot;: &quot;2016-09-19&quot;\n            &#125;,\n            &quot;category&quot;: &quot;bug&quot;,\n            &quot;archive&quot;: &#123;\n                &quot;fetch_from_archive&quot;: true,\n                &quot;archived_after&quot;: &quot;2018-02-26 09:00&quot;\n            &#125;,\n            &quot;scheduler&quot;: &#123;\n                &quot;delay&quot;: 60,\n                &quot;max_retries&quot;: 5\n            &#125;\n        &#125;\n    ]\n&#125;\n</code></pre>\n<p>ç„¶åå‘é€ï¼š</p>\n<pre><code class=\"language-sh\">curl -H &quot;Content-Type: application/json&quot; --data @tasks.json http://127.0.0.1:8080/add\n</code></pre>\n<p>å¯ä»¥è¿™å¾ˆ restfulã€‚</p>\n<h3 id=\"åç»­\"><a class=\"anchor\" href=\"#åç»­\">#</a> åç»­</h3>\n<p>æœ¬æ¥æƒ³è‡ªå·±è¿è¡Œä¸€ä¸‹çš„ï¼Œä½†æ˜¯å‘ƒå‘ƒæˆ‘çš„ redis é•œåƒä¸€ç›´æ‹‰ä¸ä¸‹æ¥ï¼Œå°±æ‡’å¾—å¼„äº†ã€‚</p>\n",
            "tags": [
                "xlab"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/Graal-%E5%AD%98%E5%82%A8%E5%BA%93%E5%88%86%E6%9E%90%E5%99%A8/",
            "url": "https://songlinlife.top/2022/Graal-%E5%AD%98%E5%82%A8%E5%BA%93%E5%88%86%E6%9E%90%E5%99%A8/",
            "title": "Graal: å­˜å‚¨åº“åˆ†æå™¨",
            "date_published": "2022-02-25T12:08:11.000Z",
            "content_html": "<p>Graal leverages on the Git backend of <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2NoYW9zcy9ncmltb2lyZWxhYi1wZXJjZXZhbA==\">Perceval</span> and enhances it to set up ad-hoc source code analysis. Thus, it fetches the commits from a Git repository and provides a mechanism to plug third party tools/libraries focused on source code analysis.</p>\n<p>Graal å°±æ˜¯ä½¿ç”¨äº†ä¹‹å‰æåˆ°çš„ perceval ç»„ä»¶çš„ git backendã€‚æ‹‰å– repo çš„ commits å¹¶ä¸”æä¾›ä¸€ç§æ–¹æ³•ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·ç”¨äºæºç åˆ†æã€‚</p>\n<h2 id=\"how-it-works\"><a class=\"anchor\" href=\"#how-it-works\">#</a> How it works</h2>\n<p>å°±æ˜¯æ‹‰å–ä¸€ä¸ª git repo é•œåƒä»¥åŠ commits çš„ meta dataã€‚é€šè¿‡åˆ›å»ºå·¥ä½œæ ‘æ¥æ‰§è¡Œ checkout æ“ä½œã€‚Graal è·å– json åï¼Œåˆ†ä¸ºä¸‰æ­¥ï¼š</p>\n<ul>\n<li>Filterã€‚é€šè¿‡ json æ–‡æ¡£ï¼Œé€‰æ‹©æˆ–è€…ä¸¢å¼ƒ commitã€‚ç„¶ååœ¨å·¥ä½œæ ‘ä¸Šç”¨ commit hash æ¥æ‰§è¡Œ checkout æ“ä½œã€‚</li>\n<li>Analyzeã€‚å°±æ˜¯å¼•å…¥åˆ†æå·¥å…·ã€‚</li>\n<li>Post-processã€‚æœ€åä¸€æ­¥å¤„ç† json æ–‡æ¡£ï¼Œæ¯”å¦‚åˆ é™¤æˆ–è€…é‡å‘½åã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…æ•™ç¨‹\"><a class=\"anchor\" href=\"#å®‰è£…æ•™ç¨‹\">#</a> å®‰è£…æ•™ç¨‹</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2NoYW9zcy9ncmltb2lyZWxhYi1ncmFhbA==\">https://github.com/chaoss/grimoirelab-graal</span></p>\n<h3 id=\"å¸¸è§åç«¯\"><a class=\"anchor\" href=\"#å¸¸è§åç«¯\">#</a> å¸¸è§åç«¯</h3>\n<p><strong>CoCom</strong>: ä»£ç å¤æ‚åº¦åˆ†æã€‚</p>\n<p><strong>CoDep</strong>ï¼šè§£æ python æ¨¡å—çš„ä¾èµ–å¹¶ä¸”è½¬æ¢ä¸º json æ ¼å¼ï¼Œè€Œä¸”è¿˜å¯ä»¥ä½¿ç”¨ graph å¯è§†åŒ–ã€‚</p>\n<p><strong>CoQua</strong>ï¼šæ£€æŸ¥ä»£ç çš„è´¨é‡ã€‚</p>\n<p><strong>CoVuln</strong>ï¼šæ£€æŸ¥ä»£ç çš„å®‰å…¨æ€§æ¯”å¦‚å°†åœ¨çš„ sql æ³¨å…¥ã€shell æ³¨å…¥ã€‚</p>\n<p><strong>CoLic</strong> ï¼šæ‰«æä»£ç å¹¶ä¸”æå– licens å’Œç‰ˆæƒä¿¡æ¯ã€‚</p>\n<p><strong>CoLang</strong> ï¼šè·å¾— git repo çš„ä»£ç è¯­è¨€åˆ†å¸ƒæ´å¯Ÿã€‚</p>\n<h3 id=\"ç”¨æ³•\"><a class=\"anchor\" href=\"#ç”¨æ³•\">#</a> ç”¨æ³•</h3>\n<p>å’Œ <code>perceval</code>  ç›¸ç±»ä¼¼ï¼š</p>\n<pre><code class=\"language-sh\">$ graal cocom https://github.com/chaoss/grimoirelab-perceval --git-path /tmp/graal-cocom &gt; /graal-cocom.test\nStarting the quest for the Graal.\nGit worktree /tmp/... created!\nFetching commits: ...\nGit worktree /tmp/... deleted!\nFetch process completed: .. commits inspected\nQuest completed.\n</code></pre>\n<h4 id=\"pythonä¸­\"><a class=\"anchor\" href=\"#pythonä¸­\">#</a> python ä¸­ï¼š</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#! /usr/bin/env python3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> graal<span class=\"token punctuation\">.</span>backends<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>cocom <span class=\"token keyword\">import</span> CoCom</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># URL for the git repo to analyze</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>repo_uri <span class=\"token operator\">=</span> â€™http<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>chaoss<span class=\"token operator\">/</span>grimoirelab<span class=\"token operator\">-</span>percevalâ€™</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># directory where to mirror the repo</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>repo_dir <span class=\"token operator\">=</span> â€™<span class=\"token operator\">/</span>tmp<span class=\"token operator\">/</span>graal<span class=\"token operator\">-</span>cocomâ€™</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># Cocom object initialization</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>cc <span class=\"token operator\">=</span> CoCom<span class=\"token punctuation\">(</span>uri<span class=\"token operator\">=</span>repo_uri<span class=\"token punctuation\">,</span> git_path<span class=\"token operator\">=</span>repo_dir<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># fetch all commits</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>commits <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>commit <span class=\"token keyword\">for</span> commit <span class=\"token keyword\">in</span> cc<span class=\"token punctuation\">.</span>fetch<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure>",
            "tags": [
                "xlab"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-The-Design-of-a-Practical-System-for-Fault-Tolerant-Virtual-Machines/",
            "url": "https://songlinlife.top/2022/%E5%88%86%E5%B8%83%E5%BC%8F/MIT6-824-The-Design-of-a-Practical-System-for-Fault-Tolerant-Virtual-Machines/",
            "title": "MIT6.824: The Design of a Practical System for Fault-Tolerant Virtual Machines",
            "date_published": "2022-02-25T02:18:21.000Z",
            "content_html": "<h3 id=\"é”™è¯¯å®¹å¿\"><a class=\"anchor\" href=\"#é”™è¯¯å®¹å¿\">#</a> é”™è¯¯å®¹å¿</h3>\n<h3 id=\"è®ºæ–‡\"><a class=\"anchor\" href=\"#è®ºæ–‡\">#</a> è®ºæ–‡</h3>\n<h4 id=\"primarybackup\"><a class=\"anchor\" href=\"#primarybackup\">#</a> primary/backup</h4>\n<p>è¿™ç¯‡ paper æå‡ºäº†ä¸€ç§ VM é”™è¯¯å®¹å¿çš„æ–¹æ³•ï¼Œç®€å•æ¥è¯´å°±æ˜¯è®¾ç½® Primary/backupã€‚primary ç”¨äºæä¾›æœåŠ¡ï¼Œè€Œ backup ç”¨äºåš primary çš„å¤‡ä»½ã€‚å¦‚æœ primary æŒ‚æ‰ä¹‹åï¼Œé‚£ä¹ˆ backup èƒ½å¤Ÿè‡ªåŠ¨åœ°æ¥ç®¡æœåŠ¡ï¼Œç»™å¤–ç•Œ client ä¸€ç§æ²¡æœ‰å‘ç”Ÿè¿‡æ•…éšœçš„é”™è§‰ã€‚</p>\n<p>è¯¥æ–¹æ³•çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ä¿è¯ primary å’Œ backup çŠ¶æ€ç›¸åŒï¼Œæ–¹æ³•ä¹Ÿå¾ˆç®€å•ã€‚primary æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Œbackup ä¹Ÿæ‰§è¡Œä»€ä¹ˆæ“ä½œã€‚å¦‚æœæœ‰ä¸€ä¸ªä¸ç¡®å®šçš„ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™äº›ä¿¡æ¯ä¼šè¢« primary ä¼ é€ç»™ backupã€‚è¿™æ ·ä¿è¯è‹¥ backup å’Œ primary ä¸€ç›´çŠ¶æ€ç›¸åŒã€‚</p>\n<p>The Design of a Practical System for Fault-Tolerant</p>\n<h4 id=\"åŸºæœ¬è®¾è®¡\"><a class=\"anchor\" href=\"#åŸºæœ¬è®¾è®¡\">#</a> åŸºæœ¬è®¾è®¡</h4>\n<p>é¦–å…ˆæ˜¯ shared disk æ¶æ„ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220225110519498.png\" alt=\"image-20220225110519498\" /></p>\n<p>åªæœ‰ primary ä¼šè¢«æš´éœ²åœ¨ç½‘ç»œä¸­ï¼Œæ‰€ä»¥ client çš„è¾“å…¥éƒ½ä¼šè¾“å‡ºç»™ primaryã€‚primary çš„æ‰€æœ‰è¾“å‡ºéƒ½é€šè¿‡ logging channel ç»™ä¼ é€ç»™ backupã€‚</p>\n<p>ç¡®å®šæ“ä½œçš„ä¸‰ä¸ªè¦æ±‚ï¼š</p>\n<ul>\n<li>primary å¿…é¡»æ•è·ç¡®å®šçš„å’Œéç¡®å®šçš„ä¿¡æ¯ã€‚</li>\n<li>ç¡®åœ°å°†è¾“å…¥å’Œä¸ç¡®å®šä¿¡æ¯åº”ç”¨åˆ° backup</li>\n<li>ä¸èƒ½é™ä½æ€§èƒ½</li>\n</ul>\n<h4 id=\"ftåè®®\"><a class=\"anchor\" href=\"#ftåè®®\">#</a> FT åè®®</h4>\n<p><img data-src=\"https://image-2021-wu.oss-cn-beijing.aliyuncs.com/blogs/picturesimage-20220225113932596.png\" alt=\"image-20220225113932596\" /></p>\n<p>primary å°† output operation ä¼ é€’ç»™ backupï¼Œå¹¶æ¨è¿Ÿ outputï¼ŒçŸ¥é“ backup è¿”å›ç¡®è®¤ã€‚ä½†æ˜¯è¿™ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœ primary å‘é€ output operation åç«‹å³æŒ‚äº†ï¼Œé‚£ä¹ˆ output ä¹Ÿä¼šè¢«å‘é€ 2 æ¬¡ã€‚ä½†æ˜¯ tcp åè®®å¯ä»¥å¤„ç†è¿™äº›é‡å¤åŒ…ã€‚</p>\n",
            "tags": [
                "åˆ†å¸ƒå¼",
                "MIT6.824"
            ]
        },
        {
            "id": "https://songlinlife.top/2022/xlab/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94Perceval/",
            "url": "https://songlinlife.top/2022/xlab/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94Perceval/",
            "title": "æ•°æ®é‡‡é›†ç»„ä»¶â€”â€”Perceval",
            "date_published": "2022-02-24T13:54:45.000Z",
            "content_html": "<h1 id=\"æ•°æ®é‡‡é›†ç»„ä»¶perceval\"><a class=\"anchor\" href=\"#æ•°æ®é‡‡é›†ç»„ä»¶perceval\">#</a> æ•°æ®é‡‡é›†ç»„ä»¶ â€”â€”Perceval</h1>\n<h3 id=\"å®˜æ–¹æ–‡æ¡£\"><a class=\"anchor\" href=\"#å®˜æ–¹æ–‡æ¡£\">#</a> å®˜æ–¹æ–‡æ¡£</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9wZXJjZXZhbC5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3Qv\">https://perceval.readthedocs.io/en/latest/</span></p>\n<h3 id=\"ä»‹ç»\"><a class=\"anchor\" href=\"#ä»‹ç»\">#</a> ä»‹ç»</h3>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2NoYW9zcy9ncmltb2lyZWxhYi1wZXJjZXZhbA==\">Perceval</span> is a Python module for retrieving data from repositories related to software development. It works with many data sources, from git repositories and GitHub projects to mailing lists, Gerrit or StackOverflow, In this chapter, you will learn the basics of working with Perceval, including how to use it to retrieve information from some kinds of repositories. Youâ€™re on your way to software development analysis!</p>\n</blockquote>\n<p><code>perceval</code>  å°±æ˜¯ <code>grimoirelab</code>  çš„æ•°æ®æºé‡‡é›†ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯æœ€åŸºç¡€çš„ç»„ä»¶ã€‚</p>\n<h3 id=\"å®‰è£…\"><a class=\"anchor\" href=\"#å®‰è£…\">#</a> å®‰è£…</h3>\n<pre><code class=\"language-sh\">pip3 install perceval\n</code></pre>\n<p>æˆ–è€…ä¹Ÿå¯ä»¥ç”¨ docker æ–¹å¼ï¼š</p>\n<pre><code class=\"language-sh\">docker run -it grimoirelab/perceval\n</code></pre>\n<h3 id=\"é£Ÿç”¨æ–¹å¼\"><a class=\"anchor\" href=\"#é£Ÿç”¨æ–¹å¼\">#</a> é£Ÿç”¨æ–¹å¼</h3>\n<p>è¿™ä¸ªå·¥å…·è¯´ç™½äº†å°±æ˜¯é‡‡é›†å·¥å…·ï¼Œå®ƒæ”¯æŒçš„åç«¯æœ‰ï¼š</p>\n<pre><code>    askbot           Fetch questions and answers from Askbot site\n    bugzilla         Fetch bugs from a Bugzilla server\n    bugzillarest     Fetch bugs from a Bugzilla server (&gt;=5.0) using its REST API\n    confluence       Fetch contents from a Confluence server\n    discourse        Fetch posts from Discourse site\n    dockerhub        Fetch repository data from Docker Hub site\n    gerrit           Fetch reviews from a Gerrit server\n    git              Fetch commits from Git\n    github           Fetch issues, pull requests and repository information from GitHub\n    gitlab           Fetch issues, merge requests from GitLab\n    gitter           Fetch messages from a Gitter room\n    googlehits       Fetch hits from Google API\n    groupsio         Fetch messages from Groups.io\n    hyperkitty       Fetch messages from a HyperKitty archiver\n    jenkins          Fetch builds from a Jenkins server\n    jira             Fetch issues from JIRA issue tracker\n    launchpad        Fetch issues from Launchpad issue tracker\n    mattermost       Fetch posts from a Mattermost server\n    mbox             Fetch messages from MBox files\n    mediawiki        Fetch pages and revisions from a MediaWiki site\n    meetup           Fetch events from a Meetup group\n    nntp             Fetch articles from a NNTP news group\n    pagure           Fetch issues from Pagure\n    phabricator      Fetch tasks from a Phabricator site\n    pipermail        Fetch messages from a Pipermail archiver\n    redmine          Fetch issues from a Redmine server\n    rocketchat       Fetch messages from a Rocket.Chat channel\n    rss              Fetch entries from a RSS feed server\n    slack            Fetch messages from a Slack channel\n    stackexchange    Fetch questions from StackExchange sites\n    supybot          Fetch messages from Supybot log files\n    telegram         Fetch messages from the Telegram server\n    twitter          Fetch tweets from the Twitter Search API\n</code></pre>\n<p>æœ‰ç‚¹æ„å¤–ï¼Œæˆ‘æ²¡æœ‰æƒ³åˆ°è¿ Twitter éƒ½èƒ½æ”¯æŒã€‚ã€‚ã€‚ã€‚</p>\n<h4 id=\"git\"><a class=\"anchor\" href=\"#git\">#</a> git</h4>\n<pre><code class=\"language-sh\">time perceval git https://github.com/grimoirelab/perceval.git \\\n  --git-path /tmp/perceval.git &gt; /tmp/perceval.test\n</code></pre>\n<p>è¿™æ¡å‘½ä»¤ä¼šå°†æ‹‰å–åˆ°çš„ git commit æ•°æ®ä¿å­˜åˆ°å¯¹åº”äº†æ–‡ä»¶ï¼Œæ ¼å¼ä¸º jsonã€‚</p>\n<p>åŒæ—¶è¿˜æ”¯æŒ python è„šæœ¬çš„æ–¹å¼ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#! /usr/bin/env python3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> perceval<span class=\"token punctuation\">.</span>backends<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>git <span class=\"token keyword\">import</span> Git</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># url for the git repo to analyze</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>repo_url <span class=\"token operator\">=</span> <span class=\"token string\">'http://github.com/grimoirelab/perceval.git'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># directory for letting Perceval clone the git repo</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>repo_dir <span class=\"token operator\">=</span> <span class=\"token string\">'/tmp/perceval.git'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># create a Git object, pointing to repo_url, using repo_dir for cloning</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>repo <span class=\"token operator\">=</span> Git<span class=\"token punctuation\">(</span>uri<span class=\"token operator\">=</span>repo_url<span class=\"token punctuation\">,</span> gitpath<span class=\"token operator\">=</span>repo_dir<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># fetch all commits as an iterator, and iterate it printing each hash</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">for</span> commit <span class=\"token keyword\">in</span> repo<span class=\"token punctuation\">.</span>fetch<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>commit<span class=\"token punctuation\">[</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'commit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"github\"><a class=\"anchor\" href=\"#github\">#</a> github</h4>\n<pre><code class=\"language-sh\"> perceval github grimoirelab perceval --sleep-for-rate \\\n    -t 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 &gt; ~/tmp/github.json\n</code></pre>\n<p>é€šè¿‡ perceval  backend repoOwner è¿™ç§æ–¹å¼æ¥è·å–æ•°æ®</p>\n<p>é€šè¿‡  <code>--category issue</code>  æ¥æŒ‡å®šè·å– issue ä¿¡æ¯ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ github ä¼šæŠŠ pr å½“åš issue è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥ä¹Ÿä¼šè‡ªåŠ¨å¾—åˆ°æ‰€æœ‰ pr ä¿¡æ¯ã€‚</p>\n<pre><code class=\"language-è·å–æ•°æ®æ ¼å¼\">&#123;\n    &quot;backend_name&quot;: &quot;GitHub&quot;,\n    &quot;backend_version&quot;: &quot;0.27.0&quot;,\n    &quot;category&quot;: &quot;issue&quot;,\n    &quot;classified_fields_filtered&quot;: null,\n    &quot;data&quot;: &#123;\n        &quot;active_lock_reason&quot;: null,\n        &quot;assignee&quot;: null,\n        &quot;assignee_data&quot;: &#123;&#125;,\n        &quot;assignees&quot;: [],\n        &quot;assignees_data&quot;: [],\n        &quot;author_association&quot;: &quot;CONTRIBUTOR&quot;,\n        &quot;body&quot;: &quot;Based on Sphynx, prepared for ReadTheDocs.\\n\\nRight now, this produces (from jgbarah/perceval repository) [this documentation in ReadTheDocs](http://perceval.readthedocs.org). Once this PR is accepted, I plan to switch ReadTheDocs to point to this repostory (master branch), so that the documentation gets rebuilt every time changes are made to the source code.\\n\\nThe configuration (docs/conf.py) include lines for running sphinx-apidoc, which generates automatically the docs/perceval.rst file, which is the entry point for the automatically generated documentation, produced based on the docstring comments in the source code.\\n\\nThe file index.rst is still a bare bones schema. It should be completed in a later patch, with more detailed information about Perceval itself.\\n&quot;,\n        &quot;closed_at&quot;: &quot;2016-01-04T13:51:56Z&quot;,\n        &quot;comments&quot;: 0,\n        &quot;comments_data&quot;: [],\n        &quot;comments_url&quot;: &quot;https://api.github.com/repos/chaoss/grimoirelab-perceval/issues/3/comments&quot;,\n        &quot;created_at&quot;: &quot;2016-01-03T23:46:04Z&quot;,\n        &quot;draft&quot;: false,\n        &quot;events_url&quot;: &quot;https://api.github.com/repos/chaoss/grimoirelab-perceval/issues/3/events&quot;,\n        &quot;html_url&quot;: &quot;https://github.com/chaoss/grimoirelab-perceval/pull/3&quot;,\n        &quot;id&quot;: 124679251,\n        &quot;labels&quot;: [],\n        &quot;labels_url&quot;: &quot;https://api.github.com/repos/chaoss/grimoirelab-perceval/issues/3/labels&#123;/name&#125;&quot;,\n        &quot;locked&quot;: false,\n        &quot;milestone&quot;: null,\n        &quot;node_id&quot;: &quot;MDExOlB1bGxSZXF1ZXN0NTQ5MzUxODA=&quot;,\n        &quot;number&quot;: 3,\n        &quot;performed_via_github_app&quot;: null,\n        &quot;pull_request&quot;: &#123;\n            &quot;diff_url&quot;: &quot;https://github.com/chaoss/grimoirelab-perceval/pull/3.diff&quot;,\n            &quot;html_url&quot;: &quot;https://github.com/chaoss/grimoirelab-perceval/pull/3&quot;,\n            &quot;merged_at&quot;: null,\n            &quot;patch_url&quot;: &quot;https://github.com/chaoss/grimoirelab-perceval/pull/3.patch&quot;,\n            &quot;url&quot;: &quot;https://api.github.com/repos/chaoss/grimoirelab-perceval/pulls/3&quot;\n        &#125;,\n        &quot;reactions&quot;: &#123;\n            &quot;+1&quot;: 0,\n            &quot;-1&quot;: 0,\n            &quot;confused&quot;: 0,\n            &quot;eyes&quot;: 0,\n            &quot;heart&quot;: 0,\n            &quot;hooray&quot;: 0,\n            &quot;laugh&quot;: 0,\n            &quot;rocket&quot;: 0,\n            &quot;total_count&quot;: 0,\n            &quot;url&quot;: &quot;https://api.github.com/repos/chaoss/grimoirelab-perceval/issues/3/reactions&quot;\n        &#125;,\n        &quot;reactions_data&quot;: [],\n        &quot;repository_url&quot;: &quot;https://api.github.com/repos/chaoss/grimoirelab-perceval&quot;,\n        &quot;state&quot;: &quot;closed&quot;,\n        &quot;timeline_url&quot;: &quot;https://api.github.com/repos/chaoss/grimoirelab-perceval/issues/3/timeline&quot;,\n        &quot;title&quot;: &quot;Config files for a documentation, using Sphinx.&quot;,\n        &quot;updated_at&quot;: &quot;2016-01-04T17:42:23Z&quot;,\n        &quot;url&quot;: &quot;https://api.github.com/repos/chaoss/grimoirelab-perceval/issues/3&quot;,\n        &quot;user&quot;: &#123;\n            &quot;avatar_url&quot;: &quot;https://avatars.githubusercontent.com/u/1039693?v=4&quot;,\n            &quot;events_url&quot;: &quot;https://api.github.com/users/jgbarah/events&#123;/privacy&#125;&quot;,\n            &quot;followers_url&quot;: &quot;https://api.github.com/users/jgbarah/followers&quot;,\n            &quot;following_url&quot;: &quot;https://api.github.com/users/jgbarah/following&#123;/other_user&#125;&quot;,\n            &quot;gists_url&quot;: &quot;https://api.github.com/users/jgbarah/gists&#123;/gist_id&#125;&quot;,\n            &quot;gravatar_id&quot;: &quot;&quot;,\n            &quot;html_url&quot;: &quot;https://github.com/jgbarah&quot;,\n            &quot;id&quot;: 1039693,\n            &quot;login&quot;: &quot;jgbarah&quot;,\n            &quot;node_id&quot;: &quot;MDQ6VXNlcjEwMzk2OTM=&quot;,\n            &quot;organizations_url&quot;: &quot;https://api.github.com/users/jgbarah/orgs&quot;,\n            &quot;received_events_url&quot;: &quot;https://api.github.com/users/jgbarah/received_events&quot;,\n            &quot;repos_url&quot;: &quot;https://api.github.com/users/jgbarah/repos&quot;,\n            &quot;site_admin&quot;: false,\n            &quot;starred_url&quot;: &quot;https://api.github.com/users/jgbarah/starred&#123;/owner&#125;&#123;/repo&#125;&quot;,\n            &quot;subscriptions_url&quot;: &quot;https://api.github.com/users/jgbarah/subscriptions&quot;,\n            &quot;type&quot;: &quot;User&quot;,\n            &quot;url&quot;: &quot;https://api.github.com/users/jgbarah&quot;\n        &#125;,\n        &quot;user_data&quot;: &#123;\n            &quot;avatar_url&quot;: &quot;https://avatars.githubusercontent.com/u/1039693?v=4&quot;,\n            &quot;bio&quot;: null,\n            &quot;blog&quot;: &quot;http://gsyc.es/~jgb&quot;,\n            &quot;company&quot;: null,\n            &quot;created_at&quot;: &quot;2011-09-09T21:47:40Z&quot;,\n            &quot;email&quot;: null,\n            &quot;events_url&quot;: &quot;https://api.github.com/users/jgbarah/events&#123;/privacy&#125;&quot;,\n            &quot;followers&quot;: 100,\n            &quot;followers_url&quot;: &quot;https://api.github.com/users/jgbarah/followers&quot;,\n            &quot;following&quot;: 0,\n            &quot;following_url&quot;: &quot;https://api.github.com/users/jgbarah/following&#123;/other_user&#125;&quot;,\n            &quot;gists_url&quot;: &quot;https://api.github.com/users/jgbarah/gists&#123;/gist_id&#125;&quot;,\n            &quot;gravatar_id&quot;: &quot;&quot;,\n            &quot;hireable&quot;: null,\n            &quot;html_url&quot;: &quot;https://github.com/jgbarah&quot;,\n            &quot;id&quot;: 1039693,\n            &quot;location&quot;: null,\n            &quot;login&quot;: &quot;jgbarah&quot;,\n            &quot;name&quot;: &quot;Jesus M. Gonzalez-Barahona&quot;,\n            &quot;node_id&quot;: &quot;MDQ6VXNlcjEwMzk2OTM=&quot;,\n            &quot;organizations&quot;: [\n                &#123;\n                    &quot;avatar_url&quot;: &quot;https://avatars.githubusercontent.com/u/1843608?v=4&quot;,\n                    &quot;description&quot;: null,\n                    &quot;events_url&quot;: &quot;https://api.github.com/orgs/MetricsGrimoire/events&quot;,\n                    &quot;hooks_url&quot;: &quot;https://api.github.com/orgs/MetricsGrimoire/hooks&quot;,\n                    &quot;id&quot;: 1843608,\n                    &quot;issues_url&quot;: &quot;https://api.github.com/orgs/MetricsGrimoire/issues&quot;,\n                    &quot;login&quot;: &quot;MetricsGrimoire&quot;,\n                    &quot;members_url&quot;: &quot;https://api.github.com/orgs/MetricsGrimoire/members&#123;/member&#125;&quot;,\n                    &quot;node_id&quot;: &quot;MDEyOk9yZ2FuaXphdGlvbjE4NDM2MDg=&quot;,\n                    &quot;public_members_url&quot;: &quot;https://api.github.com/orgs/MetricsGrimoire/public_members&#123;/member&#125;&quot;,\n                    &quot;repos_url&quot;: &quot;https://api.github.com/orgs/MetricsGrimoire/repos&quot;,\n                    &quot;url&quot;: &quot;https://api.github.com/orgs/MetricsGrimoire&quot;\n                &#125;,\n                &#123;\n                    &quot;avatar_url&quot;: &quot;https://avatars.githubusercontent.com/u/1918070?v=4&quot;,\n                    &quot;description&quot;: null,\n                    &quot;events_url&quot;: &quot;https://api.github.com/orgs/Bitergia/events&quot;,\n                    &quot;hooks_url&quot;: &quot;https://api.github.com/orgs/Bitergia/hooks&quot;,\n                    &quot;id&quot;: 1918070,\n                    &quot;issues_url&quot;: &quot;https://api.github.com/orgs/Bitergia/issues&quot;,\n                    &quot;login&quot;: &quot;Bitergia&quot;,\n                    &quot;members_url&quot;: &quot;https://api.github.com/orgs/Bitergia/members&#123;/member&#125;&quot;,\n                    &quot;node_id&quot;: &quot;MDEyOk9yZ2FuaXphdGlvbjE5MTgwNzA=&quot;,\n                    &quot;public_members_url&quot;: &quot;https://api.github.com/orgs/Bitergia/public_members&#123;/member&#125;&quot;,\n                    &quot;repos_url&quot;: &quot;https://api.github.com/orgs/Bitergia/repos&quot;,\n                    &quot;url&quot;: &quot;https://api.github.com/orgs/Bitergia&quot;\n                &#125;,\n                &#123;\n                    &quot;avatar_url&quot;: &quot;https://avatars.githubusercontent.com/u/2191340?v=4&quot;,\n                    &quot;description&quot;: null,\n                    &quot;events_url&quot;: &quot;https://api.github.com/orgs/VizGrimoire/events&quot;,\n                    &quot;hooks_url&quot;: &quot;https://api.github.com/orgs/VizGrimoire/hooks&quot;,\n                    &quot;id&quot;: 2191340,\n                    &quot;issues_url&quot;: &quot;https://api.github.com/orgs/VizGrimoire/issues&quot;,\n                    &quot;login&quot;: &quot;VizGrimoire&quot;,\n                    &quot;members_url&quot;: &quot;https://api.github.com/orgs/VizGrimoire/members&#123;/member&#125;&quot;,\n                    &quot;node_id&quot;: &quot;MDEyOk9yZ2FuaXphdGlvbjIxOTEzNDA=&quot;,\n                    &quot;public_members_url&quot;: &quot;https://api.github.com/orgs/VizGrimoire/public_members&#123;/member&#125;&quot;,\n                    &quot;repos_url&quot;: &quot;https://api.github.com/orgs/VizGrimoire/repos&quot;,\n                    &quot;url&quot;: &quot;https://api.github.com/orgs/VizGrimoire&quot;\n                &#125;,\n                &#123;\n                    &quot;avatar_url&quot;: &quot;https://avatars.githubusercontent.com/u/3017044?v=4&quot;,\n                    &quot;description&quot;: null,\n                    &quot;events_url&quot;: &quot;https://api.github.com/orgs/AlertProject/events&quot;,\n                    &quot;hooks_url&quot;: &quot;https://api.github.com/orgs/AlertProject/hooks&quot;,\n                    &quot;id&quot;: 3017044,\n                    &quot;issues_url&quot;: &quot;https://api.github.com/orgs/AlertProject/issues&quot;,\n                    &quot;login&quot;: &quot;AlertProject&quot;,\n                    &quot;members_url&quot;: &quot;https://api.github.com/orgs/AlertProject/members&#123;/member&#125;&quot;,\n                    &quot;node_id&quot;: &quot;MDEyOk9yZ2FuaXphdGlvbjMwMTcwNDQ=&quot;,\n                    &quot;public_members_url&quot;: &quot;https://api.github.com/orgs/AlertProject/public_members&#123;/member&#125;&quot;,\n                    &quot;repos_url&quot;: &quot;https://api.github.com/orgs/AlertProject/repos&quot;,\n                    &quot;url&quot;: &quot;https://api.github.com/orgs/AlertProject&quot;\n                &#125;,\n                &#123;\n                    &quot;avatar_url&quot;: &quot;https://avatars.githubusercontent.com/u/16151805?v=4&quot;,\n                    &quot;description&quot;: &quot;&quot;,\n                    &quot;events_url&quot;: &quot;https://api.github.com/orgs/grimoirelab/events&quot;,\n                    &quot;hooks_url&quot;: &quot;https://api.github.com/orgs/grimoirelab/hooks&quot;,\n                    &quot;id&quot;: 16151805,\n                    &quot;issues_url&quot;: &quot;https://api.github.com/orgs/grimoirelab/issues&quot;,\n                    &quot;login&quot;: &quot;grimoirelab&quot;,\n                    &quot;members_url&quot;: &quot;https://api.github.com/orgs/grimoirelab/members&#123;/member&#125;&quot;,\n                    &quot;node_id&quot;: &quot;MDEyOk9yZ2FuaXphdGlvbjE2MTUxODA1&quot;,\n                    &quot;public_members_url&quot;: &quot;https://api.github.com/orgs/grimoirelab/public_members&#123;/member&#125;&quot;,\n                    &quot;repos_url&quot;: &quot;https://api.github.com/orgs/grimoirelab/repos&quot;,\n                    &quot;url&quot;: &quot;https://api.github.com/orgs/grimoirelab&quot;\n                &#125;\n            ],\n            &quot;organizations_url&quot;: &quot;https://api.github.com/users/jgbarah/orgs&quot;,\n            &quot;public_gists&quot;: 0,\n            &quot;public_repos&quot;: 41,\n            &quot;received_events_url&quot;: &quot;https://api.github.com/users/jgbarah/received_events&quot;,\n            &quot;repos_url&quot;: &quot;https://api.github.com/users/jgbarah/repos&quot;,\n            &quot;site_admin&quot;: false,\n            &quot;starred_url&quot;: &quot;https://api.github.com/users/jgbarah/starred&#123;/owner&#125;&#123;/repo&#125;&quot;,\n            &quot;subscriptions_url&quot;: &quot;https://api.github.com/users/jgbarah/subscriptions&quot;,\n            &quot;twitter_username&quot;: null,\n            &quot;type&quot;: &quot;User&quot;,\n            &quot;updated_at&quot;: &quot;2022-02-16T16:51:43Z&quot;,\n            &quot;url&quot;: &quot;https://api.github.com/users/jgbarah&quot;\n        &#125;\n    &#125;,\n    &quot;origin&quot;: &quot;https://github.com/grimoirelab/perceval&quot;,\n    &quot;perceval_version&quot;: &quot;0.17.16&quot;,\n    &quot;search_fields&quot;: &#123;\n        &quot;item_id&quot;: &quot;124679251&quot;,\n        &quot;owner&quot;: &quot;grimoirelab&quot;,\n        &quot;repo&quot;: &quot;perceval&quot;\n    &#125;,\n    &quot;tag&quot;: &quot;https://github.com/grimoirelab/perceval&quot;,\n    &quot;timestamp&quot;: 1645709133.739694,\n    &quot;updated_on&quot;: 1451929343.0,\n    &quot;uuid&quot;: &quot;c403532b196ed4020cc86d001feb091c009d3d26&quot;\n&#125;\n</code></pre>\n<h3 id=\"è·å–å™¨çš„æ¶æ„\"><a class=\"anchor\" href=\"#è·å–å™¨çš„æ¶æ„\">#</a> è·å–å™¨çš„æ¶æ„</h3>\n<p>Client: interacts directly with the data source.</p>\n<p>Backend: orchestrates the fetching process by using the Client.</p>\n<p>CommandLine: defines the arguments to initialize and run the Backend from the command line.</p>\n",
            "tags": [
                "xlab"
            ]
        }
    ]
}